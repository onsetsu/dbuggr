/*! lively.ast-v0.2.13 2015-12-08 */

(function(a){function b(a,c){if({}.hasOwnProperty.call(b.cache,a))return b.cache[a];var d=b.resolve(a);if(!d)throw new Error("Failed to resolve module "+a);var e={id:a,require:b,filename:a,exports:{},loaded:!1,parent:c,children:[]};c&&c.children.push(e);var f=a.slice(0,a.lastIndexOf("/")+1);return b.cache[a]=e.exports,d.call(e.exports,e,e.exports,f,a),e.loaded=!0,b.cache[a]=e.exports}b.modules={},b.cache={},b.resolve=function(a){return{}.hasOwnProperty.call(b.modules,a)?b.modules[a]:void 0},b.define=function(a,c){b.modules[a]=c};var c=function(b){return b="/",{title:"browser",version:"v0.10.26",browser:!0,env:{},argv:[],nextTick:a.setImmediate||function(a){setTimeout(a,0)},cwd:function(){return b},chdir:function(a){b=a}}}();b.define("/tools/entry-point.js",function(c,d,e,f){!function(){"use strict";a.escodegen=b("/escodegen.js",c),escodegen.browser=!0}()}),b.define("/escodegen.js",function(c,d,e,f){!function(e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V){"use strict";function W(a){return xa.Expression.hasOwnProperty(a.type)}function X(a){return xa.Statement.hasOwnProperty(a.type)}function Y(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Z(a,b){var c="";for(b|=0;b>0;b>>>=1,a+=a)1&b&&(c+=a);return c}function $(a){return/[\r\n]/g.test(a)}function _(a){var b=a.length;return b&&j.code.isLineTerminator(a.charCodeAt(b-1))}function aa(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function ba(a,b){function c(a){return"object"==typeof a&&a instanceof Object&&!(a instanceof RegExp)}var d,e;for(d in b)b.hasOwnProperty(d)&&(e=b[d],c(e)?c(a[d])?ba(a[d],e):a[d]=ba({},e):a[d]=e);return a}function ca(a){var b,c,d,e,f;if(a!==a)throw new Error("Numeric literal whose value is NaN");if(0>a||0===a&&0>1/a)throw new Error("Numeric literal whose value is negative");if(a===1/0)return n?"null":o?"1e400":"1e+400";if(b=""+a,!o||b.length<3)return b;for(c=b.indexOf("."),!n&&48===b.charCodeAt(0)&&1===c&&(c=0,b=b.slice(1)),d=b,b=b.replace("e+","e"),e=0,(f=d.indexOf("e"))>0&&(e=+d.slice(f+1),d=d.slice(0,f)),c>=0&&(e-=d.length-c-1,d=+(d.slice(0,c)+d.slice(c+1))+""),f=0;48===d.charCodeAt(d.length+f-1);)--f;return 0!==f&&(e-=f,d=d.slice(0,f)),0!==e&&(d+="e"+e),(d.length<b.length||p&&a>1e12&&Math.floor(a)===a&&(d="0x"+a.toString(16)).length<b.length)&&+d===a&&(b=d),b}function da(a,b){return 8232===(-2&a)?(b?"u":"\\u")+(8232===a?"2028":"2029"):10===a||13===a?(b?"":"\\")+(10===a?"n":"r"):String.fromCharCode(a)}function ea(a){var b,c,d,e,f,g,h,i;if(c=a.toString(),a.source){if(b=c.match(/\/([^\/]*)$/),!b)return c;for(d=b[1],c="",h=!1,i=!1,e=0,f=a.source.length;f>e;++e)g=a.source.charCodeAt(e),i?(c+=da(g,i),i=!1):(h?93===g&&(h=!1):47===g?c+="\\":91===g&&(h=!0),c+=da(g,i),i=92===g);return"/"+c+"/"+d}return c}function fa(a,b){var c;return 8===a?"\\b":12===a?"\\f":9===a?"\\t":(c=a.toString(16).toUpperCase(),n||a>255?"\\u"+"0000".slice(c.length)+c:0!==a||j.code.isDecimalDigit(b)?11===a?"\\x0B":"\\x"+"00".slice(c.length)+c:"\\0")}function ga(a){if(92===a)return"\\\\";if(10===a)return"\\n";if(13===a)return"\\r";if(8232===a)return"\\u2028";if(8233===a)return"\\u2029";throw new Error("Incorrectly classified character")}function ha(a){var b,c,d,e;for(e="double"===q?'"':"'",b=0,c=a.length;c>b;++b){if(d=a.charCodeAt(b),39===d){e='"';break}if(34===d){e="'";break}92===d&&++b}return e+a+e}function ia(a){var b,c,d,e,f,g="",h=0,i=0;for(b=0,c=a.length;c>b;++b){if(d=a.charCodeAt(b),39===d)++h;else if(34===d)++i;else if(47===d&&n)g+="\\";else{if(j.code.isLineTerminator(d)||92===d){g+=ga(d);continue}if(n&&32>d||!(n||r||d>=32&&126>=d)){g+=fa(d,a.charCodeAt(b+1));continue}}g+=String.fromCharCode(d)}if(e=!("double"===q||"auto"===q&&h>i),f=e?"'":'"',!(e?h:i))return f+g+f;for(a=g,g=f,b=0,c=a.length;c>b;++b)d=a.charCodeAt(b),(39===d&&e||34===d&&!e)&&(g+="\\"),g+=String.fromCharCode(d);return g+f}function ja(a){var b,c,d,e="";for(b=0,c=a.length;c>b;++b)d=a[b],e+=k(d)?ja(d):d;return e}function ka(a,b){if(!A)return k(a)?ja(a):a;if(null==b){if(a instanceof h)return a;b={}}return null==b.loc?new h(null,null,A,a,b.name||null):new h(b.loc.start.line,b.loc.start.column,A===!0?b.loc.source||null:A,a,b.name||null)}function la(){return t?t:" "}function ma(a,b){var c,d,e,f;return c=ka(a).toString(),0===c.length?[b]:(d=ka(b).toString(),0===d.length?[a]:(e=c.charCodeAt(c.length-1),f=d.charCodeAt(0),(43===e||45===e)&&e===f||j.code.isIdentifierPart(e)&&j.code.isIdentifierPart(f)||47===e&&105===f?[a,la(),b]:j.code.isWhiteSpace(e)||j.code.isLineTerminator(e)||j.code.isWhiteSpace(f)||j.code.isLineTerminator(f)?[a,b]:[a,t,b]))}function na(a){return[l,a]}function oa(a){var b;b=l,l+=m,a(l),l=b}function pa(a){var b;for(b=a.length-1;b>=0&&!j.code.isLineTerminator(a.charCodeAt(b));--b);return a.length-1-b}function qa(a,b){var c,d,e,f,g,h,i,k;for(c=a.split(/\r\n|[\r\n]/),h=Number.MAX_VALUE,d=1,e=c.length;e>d;++d){for(f=c[d],g=0;g<f.length&&j.code.isWhiteSpace(f.charCodeAt(g));)++g;h>g&&(h=g)}for(void 0!==b?(i=l,"*"===c[1][h]&&(b+=" "),l=b):(1&h&&--h,i=l),d=1,e=c.length;e>d;++d)k=ka(na(c[d].slice(h))),c[d]=A?k.join(""):k;return l=i,c.join("\n")}function ra(a,b){if("Line"===a.type){if(_(a.value))return"//"+a.value;var c="//"+a.value;return C||(c+="\n"),c}return y.format.indent.adjustMultilineComment&&/[\n\r]/.test(a.value)?qa("/*"+a.value+"*/",b):"/*"+a.value+"*/"}function sa(a,b){var c,d,f,g,h,i,j,k,n,o,p,q,r,s;if(a.leadingComments&&a.leadingComments.length>0){if(g=b,C){for(f=a.leadingComments[0],b=[],k=f.extendedRange,n=f.range,p=B.substring(k[0],n[0]),s=(p.match(/\n/g)||[]).length,s>0?(b.push(Z("\n",s)),b.push(na(ra(f)))):(b.push(p),b.push(ra(f))),o=n,c=1,d=a.leadingComments.length;d>c;c++)f=a.leadingComments[c],n=f.range,q=B.substring(o[1],n[0]),s=(q.match(/\n/g)||[]).length,b.push(Z("\n",s)),b.push(na(ra(f))),o=n;r=B.substring(n[1],k[1]),s=(r.match(/\n/g)||[]).length,b.push(Z("\n",s))}else for(f=a.leadingComments[0],b=[],w&&a.type===e.Program&&0===a.body.length&&b.push("\n"),b.push(ra(f)),_(ka(b).toString())||b.push("\n"),c=1,d=a.leadingComments.length;d>c;++c)f=a.leadingComments[c],j=[ra(f)],_(ka(j).toString())||j.push("\n"),b.push(na(j));b.push(na(g))}if(a.trailingComments)if(C)f=a.trailingComments[0],k=f.extendedRange,n=f.range,p=B.substring(k[0],n[0]),s=(p.match(/\n/g)||[]).length,s>0?(b.push(Z("\n",s)),b.push(na(ra(f)))):(b.push(p),b.push(ra(f)));else for(h=!_(ka(b).toString()),i=Z(" ",pa(ka([l,b,m]).toString())),c=0,d=a.trailingComments.length;d>c;++c)f=a.trailingComments[c],h?(b=0===c?[b,m]:[b,i],b.push(ra(f,i))):b=[b,na(ra(f))],c!==d-1&&!_(ka(b).toString())&&(b=[b,"\n"]);return b}function ta(a,b,c){var d,e=0;for(d=a;b>d;d++)"\n"===B[d]&&e++;for(d=1;e>d;d++)c.push(s)}function ua(a,b,c){return c>b?["(",a,")"]:a}function va(a){var b,c,d;for(d=a.split(/\r\n|\n/),b=1,c=d.length;c>b;b++)d[b]=s+l+d[b];return d}function wa(a,b){var c,d,e;return c=a[y.verbatim],"string"==typeof c?d=ua(va(c),f.Sequence,b):(d=va(c.content),e=null!=c.precedence?c.precedence:f.Sequence,d=ua(d,e,b)),ka(d,a)}function xa(){}function ya(a){return ka(a.name,a)}function za(a,b){return a.async?"async"+(b?la():t):""}function Aa(a){var b=a.generator&&!y.moz.starlessGenerator;return b?"*"+t:""}function Ba(a){var b=a.value;return b.async?za(b,!a.computed):Aa(b)?"*":""}function Ca(a){var b;if(b=new xa,X(a))return b.generateStatement(a,R);if(W(a))return b.generateExpression(a,f.Sequence,N);throw new Error("Unknown node type: "+a.type)}function Da(e,f){var g,i,j=Y();return null!=f?("string"==typeof f.indent&&(j.format.indent.style=f.indent),"number"==typeof f.base&&(j.format.indent.base=f.base),f=ba(j,f),m=f.format.indent.style,l="string"==typeof f.base?f.base:Z(m,f.format.indent.base)):(f=j,m=f.format.indent.style,l=Z(m,f.format.indent.base)),n=f.format.json,o=f.format.renumber,p=n?!1:f.format.hexadecimal,q=n?"double":f.format.quotes,r=f.format.escapeless,s=f.format.newline,t=f.format.space,f.format.compact&&(s=t=m=l=""),u=f.format.parentheses,v=f.format.semicolons,w=f.format.safeConcatenation,x=f.directive,z=n?null:f.parse,A=f.sourceMap,B=f.sourceCode,C=f.format.preserveBlankLines&&null!==B,y=f,A&&(h=d.browser?a.sourceMap.SourceNode:b("/node_modules/source-map/lib/source-map.js",c).SourceNode),g=Ca(e),A?(i=g.toStringWithSourceMap({file:f.file,sourceRoot:f.sourceMapRoot}),f.sourceContent&&i.map.setSourceContent(f.sourceMap,f.sourceContent),f.sourceMapWithCode?i:i.map.toString()):(i={code:g.toString(),map:null},f.sourceMapWithCode?i:i.code)}i=b("/node_modules/estraverse/estraverse.js",c),j=b("/node_modules/esutils/lib/utils.js",c),e=i.Syntax,f={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19},g={"||":f.LogicalOR,"&&":f.LogicalAND,"|":f.BitwiseOR,"^":f.BitwiseXOR,"&":f.BitwiseAND,"==":f.Equality,"!=":f.Equality,"===":f.Equality,"!==":f.Equality,is:f.Equality,isnt:f.Equality,"<":f.Relational,">":f.Relational,"<=":f.Relational,">=":f.Relational,"in":f.Relational,"instanceof":f.Relational,"<<":f.BitwiseSHIFT,">>":f.BitwiseSHIFT,">>>":f.BitwiseSHIFT,"+":f.Additive,"-":f.Additive,"*":f.Multiplicative,"%":f.Multiplicative,"/":f.Multiplicative},F=1,G=2,H=4,I=8,J=16,K=32,L=G|H,M=F|G,N=F|G|H,O=F,P=H,Q=F|H,R=F,S=F|K,T=0,U=F|J,V=F|I,k=Array.isArray,k||(k=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),xa.prototype.maybeBlock=function(a,b){var c,d,f=this;return d=!y.comment||!a.leadingComments,a.type===e.BlockStatement&&d?[t,this.generateStatement(a,b)]:a.type===e.EmptyStatement&&d?";":(oa(function(){c=[s,na(f.generateStatement(a,b))]}),c)},xa.prototype.maybeBlockSuffix=function(a,b){var c=_(ka(b).toString());return a.type!==e.BlockStatement||y.comment&&a.leadingComments||c?c?[b,l]:[b,s,l]:[b,t]},xa.prototype.generatePattern=function(a,b,c){return a.type===e.Identifier?ya(a):this.generateExpression(a,b,c)},xa.prototype.generateFunctionParams=function(a){var b,c,d,g;if(g=!1,a.type!==e.ArrowFunctionExpression||a.rest||a.defaults&&0!==a.defaults.length||1!==a.params.length||a.params[0].type!==e.Identifier){for(d=a.type===e.ArrowFunctionExpression?[za(a,!1)]:[],d.push("("),a.defaults&&(g=!0),b=0,c=a.params.length;c>b;++b)g&&a.defaults[b]?d.push(this.generateAssignment(a.params[b],a.defaults[b],"=",f.Assignment,N)):d.push(this.generatePattern(a.params[b],f.Assignment,N)),c>b+1&&d.push(","+t);a.rest&&(a.params.length&&d.push(","+t),d.push("..."),d.push(ya(a.rest))),d.push(")")}else d=[za(a,!0),ya(a.params[0])];return d},xa.prototype.generateFunctionBody=function(a){var b,c;return b=this.generateFunctionParams(a),a.type===e.ArrowFunctionExpression&&(b.push(t),b.push("=>")),a.expression?(b.push(t),c=this.generateExpression(a.body,f.Assignment,N),"{"===c.toString().charAt(0)&&(c=["(",c,")"]),b.push(c)):b.push(this.maybeBlock(a.body,V)),b},xa.prototype.generateIterationForStatement=function(a,b,c){var d=["for"+t+"("],g=this;return oa(function(){b.left.type===e.VariableDeclaration?oa(function(){d.push(b.left.kind+la()),d.push(g.generateStatement(b.left.declarations[0],T))}):d.push(g.generateExpression(b.left,f.Call,N)),d=ma(d,a),d=[ma(d,g.generateExpression(b.right,f.Sequence,N)),")"]}),d.push(this.maybeBlock(b.body,c)),d},xa.prototype.generatePropertyKey=function(a,b){var c=[];return b&&c.push("["),c.push(this.generateExpression(a,f.Sequence,N)),b&&c.push("]"),c},xa.prototype.generateAssignment=function(a,b,c,d,e){return f.Assignment<d&&(e|=F),ua([this.generateExpression(a,f.Call,e),t+c+t,this.generateExpression(b,f.Assignment,e)],f.Assignment,d)},xa.prototype.semicolon=function(a){return!v&&a&K?"":";"},xa.Statement={BlockStatement:function(a,b){var c,d,e=["{",s],f=this;return oa(function(){0===a.body.length&&C&&(c=a.range,c[1]-c[0]>2)&&(d=B.substring(c[0]+1,c[1]-1),"\n"===d[0]&&(e=["{"]),e.push(d));var g,h,i,j;for(j=R,b&I&&(j|=J),g=0,h=a.body.length;h>g;++g)C&&(0===g&&(a.body[0].leadingComments&&(c=a.body[0].leadingComments[0].extendedRange,d=B.substring(c[0],c[1]),"\n"===d[0]&&(e=["{"])),a.body[0].leadingComments||ta(a.range[0],a.body[0].range[0],e)),g>0&&!(a.body[g-1].trailingComments||a.body[g].leadingComments)&&ta(a.body[g-1].range[1],a.body[g].range[0],e)),g===h-1&&(j|=K),i=a.body[g].leadingComments&&C?f.generateStatement(a.body[g],j):na(f.generateStatement(a.body[g],j)),e.push(i),_(ka(i).toString())||(C&&h-1>g?a.body[g+1].leadingComments||e.push(s):e.push(s)),C&&g===h-1&&(a.body[g].trailingComments||ta(a.body[g].range[1],a.range[1],e))}),e.push(na("}")),e},BreakStatement:function(a,b){return a.label?"break "+a.label.name+this.semicolon(b):"break"+this.semicolon(b)},ContinueStatement:function(a,b){return a.label?"continue "+a.label.name+this.semicolon(b):"continue"+this.semicolon(b)},ClassBody:function(a,b){var c=["{",s],d=this;return oa(function(b){var e,g;for(e=0,g=a.body.length;g>e;++e)c.push(b),c.push(d.generateExpression(a.body[e],f.Sequence,N)),g>e+1&&c.push(s)}),_(ka(c).toString())||c.push(s),c.push(l),c.push("}"),c},ClassDeclaration:function(a,b){var c,d;return c=["class "+a.id.name],a.superClass&&(d=ma("extends",this.generateExpression(a.superClass,f.Assignment,N)),c=ma(c,d)),c.push(t),c.push(this.generateStatement(a.body,S)),c},DirectiveStatement:function(a,b){return y.raw&&a.raw?a.raw+this.semicolon(b):ha(a.directive)+this.semicolon(b)},DoWhileStatement:function(a,b){var c=ma("do",this.maybeBlock(a.body,R));return c=this.maybeBlockSuffix(a.body,c),ma(c,["while"+t+"(",this.generateExpression(a.test,f.Sequence,N),")"+this.semicolon(b)])},CatchClause:function(a,b){var c,d=this;return oa(function(){var b;c=["catch"+t+"(",d.generateExpression(a.param,f.Sequence,N),")"],a.guard&&(b=d.generateExpression(a.guard,f.Sequence,N),c.splice(2,0," if ",b))}),c.push(this.maybeBlock(a.body,R)),c},DebuggerStatement:function(a,b){return"debugger"+this.semicolon(b)},EmptyStatement:function(a,b){return";"},ExportDeclaration:function(a,b){var c,d=["export"],g=this;return c=b&K?S:R,a["default"]?(d=ma(d,"default"),d=X(a.declaration)?ma(d,this.generateStatement(a.declaration,c)):ma(d,this.generateExpression(a.declaration,f.Assignment,N)+this.semicolon(b))):a.declaration?ma(d,this.generateStatement(a.declaration,c)):(a.specifiers&&(0===a.specifiers.length?d=ma(d,"{"+t+"}"):a.specifiers[0].type===e.ExportBatchSpecifier?d=ma(d,this.generateExpression(a.specifiers[0],f.Sequence,N)):(d=ma(d,"{"),oa(function(b){var c,e;for(d.push(s),c=0,e=a.specifiers.length;e>c;++c)d.push(b),d.push(g.generateExpression(a.specifiers[c],f.Sequence,N)),e>c+1&&d.push(","+s)}),_(ka(d).toString())||d.push(s),d.push(l+"}")),a.source?d=ma(d,["from"+t,this.generateExpression(a.source,f.Sequence,N),this.semicolon(b)]):d.push(this.semicolon(b))),d)},ExpressionStatement:function(a,b){function c(a){var b;return"class"!==a.slice(0,5)?!1:(b=a.charCodeAt(5),123===b||j.code.isWhiteSpace(b)||j.code.isLineTerminator(b))}function d(a){var b;return"function"!==a.slice(0,8)?!1:(b=a.charCodeAt(8),40===b||j.code.isWhiteSpace(b)||42===b||j.code.isLineTerminator(b))}function g(a){var b,c,d;if("async"!==a.slice(0,5))return!1;if(!j.code.isWhiteSpace(a.charCodeAt(5)))return!1;for(c=6,d=a.length;d>c&&j.code.isWhiteSpace(a.charCodeAt(c));++c);return c===d?!1:"function"!==a.slice(c,c+8)?!1:(b=a.charCodeAt(c+8),40===b||j.code.isWhiteSpace(b)||42===b||j.code.isLineTerminator(b))}var h,i;return h=[this.generateExpression(a.expression,f.Sequence,N)],i=ka(h).toString(),123===i.charCodeAt(0)||c(i)||d(i)||g(i)||x&&b&J&&a.expression.type===e.Literal&&"string"==typeof a.expression.value?h=["(",h,")"+this.semicolon(b)]:h.push(this.semicolon(b)),h},ImportDeclaration:function(a,b){var c,d,g=this;return 0===a.specifiers.length?["import",t,this.generateExpression(a.source,f.Sequence,N),this.semicolon(b)]:(c=["import"],d=0,a.specifiers[d].type===e.ImportDefaultSpecifier&&(c=ma(c,[this.generateExpression(a.specifiers[d],f.Sequence,N)]),++d),a.specifiers[d]&&(0!==d&&c.push(","),a.specifiers[d].type===e.ImportNamespaceSpecifier?c=ma(c,[t,this.generateExpression(a.specifiers[d],f.Sequence,N)]):(c.push(t+"{"),a.specifiers.length-d===1?(c.push(t),c.push(this.generateExpression(a.specifiers[d],f.Sequence,N)),c.push(t+"}"+t)):(oa(function(b){var e,h;for(c.push(s),e=d,h=a.specifiers.length;h>e;++e)c.push(b),c.push(g.generateExpression(a.specifiers[e],f.Sequence,N)),h>e+1&&c.push(","+s)}),_(ka(c).toString())||c.push(s),c.push(l+"}"+t)))),c=ma(c,["from"+t,this.generateExpression(a.source,f.Sequence,N),this.semicolon(b)]))},VariableDeclarator:function(a,b){var c=b&F?N:L;return a.init?[this.generateExpression(a.id,f.Assignment,c),t,"=",t,this.generateExpression(a.init,f.Assignment,c)]:this.generatePattern(a.id,f.Assignment,c)},VariableDeclaration:function(a,b){function c(){for(g=a.declarations[0],y.comment&&g.leadingComments?(d.push("\n"),d.push(na(i.generateStatement(g,h)))):(d.push(la()),d.push(i.generateStatement(g,h))),e=1,f=a.declarations.length;f>e;++e)g=a.declarations[e],y.comment&&g.leadingComments?(d.push(","+s),d.push(na(i.generateStatement(g,h)))):(d.push(","+t),d.push(i.generateStatement(g,h)))}var d,e,f,g,h,i=this;return d=[a.kind],h=b&F?R:T,a.declarations.length>1?oa(c):c(),d.push(this.semicolon(b)),d},ThrowStatement:function(a,b){return[ma("throw",this.generateExpression(a.argument,f.Sequence,N)),this.semicolon(b)]},TryStatement:function(a,b){var c,d,e,f;if(c=["try",this.maybeBlock(a.block,R)],c=this.maybeBlockSuffix(a.block,c),a.handlers)for(d=0,e=a.handlers.length;e>d;++d)c=ma(c,this.generateStatement(a.handlers[d],R)),(a.finalizer||d+1!==e)&&(c=this.maybeBlockSuffix(a.handlers[d].body,c));else{for(f=a.guardedHandlers||[],d=0,e=f.length;e>d;++d)c=ma(c,this.generateStatement(f[d],R)),(a.finalizer||d+1!==e)&&(c=this.maybeBlockSuffix(f[d].body,c));if(a.handler)if(k(a.handler))for(d=0,e=a.handler.length;e>d;++d)c=ma(c,this.generateStatement(a.handler[d],R)),(a.finalizer||d+1!==e)&&(c=this.maybeBlockSuffix(a.handler[d].body,c));else c=ma(c,this.generateStatement(a.handler,R)),a.finalizer&&(c=this.maybeBlockSuffix(a.handler.body,c))}return a.finalizer&&(c=ma(c,["finally",this.maybeBlock(a.finalizer,R)])),c},SwitchStatement:function(a,b){var c,d,e,g,h,i=this;if(oa(function(){c=["switch"+t+"(",i.generateExpression(a.discriminant,f.Sequence,N),")"+t+"{"+s]}),a.cases)for(h=R,e=0,g=a.cases.length;g>e;++e)e===g-1&&(h|=K),d=na(this.generateStatement(a.cases[e],h)),c.push(d),_(ka(d).toString())||c.push(s);return c.push(na("}")),c},SwitchCase:function(a,b){var c,d,g,h,i,j=this;return oa(function(){for(c=a.test?[ma("case",j.generateExpression(a.test,f.Sequence,N)),":"]:["default:"],g=0,h=a.consequent.length,h&&a.consequent[0].type===e.BlockStatement&&(d=j.maybeBlock(a.consequent[0],R),c.push(d),g=1),g!==h&&!_(ka(c).toString())&&c.push(s),i=R;h>g;++g)g===h-1&&b&K&&(i|=K),d=na(j.generateStatement(a.consequent[g],i)),c.push(d),g+1!==h&&!_(ka(d).toString())&&c.push(s)}),c},IfStatement:function(a,b){var c,d,g,h=this;return oa(function(){c=["if"+t+"(",h.generateExpression(a.test,f.Sequence,N),")"]}),g=b&K,d=R,g&&(d|=K),a.alternate?(c.push(this.maybeBlock(a.consequent,R)),c=this.maybeBlockSuffix(a.consequent,c),c=a.alternate.type===e.IfStatement?ma(c,["else ",this.generateStatement(a.alternate,d)]):ma(c,ma("else",this.maybeBlock(a.alternate,d)))):c.push(this.maybeBlock(a.consequent,d)),c},ForStatement:function(a,b){var c,d=this;return oa(function(){c=["for"+t+"("],a.init?a.init.type===e.VariableDeclaration?c.push(d.generateStatement(a.init,T)):(c.push(d.generateExpression(a.init,f.Sequence,L)),c.push(";")):c.push(";"),a.test?(c.push(t),c.push(d.generateExpression(a.test,f.Sequence,N)),c.push(";")):c.push(";"),a.update?(c.push(t),c.push(d.generateExpression(a.update,f.Sequence,N)),c.push(")")):c.push(")")}),c.push(this.maybeBlock(a.body,b&K?S:R)),c},ForInStatement:function(a,b){return this.generateIterationForStatement("in",a,b&K?S:R)},ForOfStatement:function(a,b){return this.generateIterationForStatement("of",a,b&K?S:R)},LabeledStatement:function(a,b){return[a.label.name+":",this.maybeBlock(a.body,b&K?S:R)]},Program:function(a,b){var c,d,e,f,g;for(f=a.body.length,c=[w&&f>0?"\n":""],g=U,e=0;f>e;++e)!w&&e===f-1&&(g|=K),C&&(0===e&&(a.body[0].leadingComments||ta(a.range[0],a.body[e].range[0],c)),e>0&&!(a.body[e-1].trailingComments||a.body[e].leadingComments)&&ta(a.body[e-1].range[1],a.body[e].range[0],c)),d=na(this.generateStatement(a.body[e],g)),c.push(d),f>e+1&&!_(ka(d).toString())&&(C?a.body[e+1].leadingComments||c.push(s):c.push(s)),C&&e===f-1&&(a.body[e].trailingComments||ta(a.body[e].range[1],a.range[1],c));return c},FunctionDeclaration:function(a,b){return[za(a,!0),"function",Aa(a)||la(),ya(a.id),this.generateFunctionBody(a)]},ReturnStatement:function(a,b){return a.argument?[ma("return",this.generateExpression(a.argument,f.Sequence,N)),this.semicolon(b)]:["return"+this.semicolon(b)]},WhileStatement:function(a,b){var c,d=this;return oa(function(){c=["while"+t+"(",d.generateExpression(a.test,f.Sequence,N),")"]}),c.push(this.maybeBlock(a.body,b&K?S:R)),c},WithStatement:function(a,b){var c,d=this;return oa(function(){c=["with"+t+"(",d.generateExpression(a.object,f.Sequence,N),")"]}),c.push(this.maybeBlock(a.body,b&K?S:R)),c}},aa(xa.prototype,xa.Statement),xa.Expression={SequenceExpression:function(a,b,c){var d,e,g;for(f.Sequence<b&&(c|=F),d=[],e=0,g=a.expressions.length;g>e;++e)d.push(this.generateExpression(a.expressions[e],f.Assignment,c)),g>e+1&&d.push(","+t);return ua(d,f.Sequence,b)},AssignmentExpression:function(a,b,c){return this.generateAssignment(a.left,a.right,a.operator,b,c)},ArrowFunctionExpression:function(a,b,c){return ua(this.generateFunctionBody(a),f.ArrowFunction,b)},ConditionalExpression:function(a,b,c){return f.Conditional<b&&(c|=F),ua([this.generateExpression(a.test,f.LogicalOR,c),t+"?"+t,this.generateExpression(a.consequent,f.Assignment,c),t+":"+t,this.generateExpression(a.alternate,f.Assignment,c)],f.Conditional,b)},LogicalExpression:function(a,b,c){return this.BinaryExpression(a,b,c)},BinaryExpression:function(a,b,c){var d,e,f,h;return e=g[a.operator],b>e&&(c|=F),f=this.generateExpression(a.left,e,c),h=f.toString(),d=47===h.charCodeAt(h.length-1)&&j.code.isIdentifierPart(a.operator.charCodeAt(0))?[f,la(),a.operator]:ma(f,a.operator),f=this.generateExpression(a.right,e+1,c),"/"===a.operator&&"/"===f.toString().charAt(0)||"<"===a.operator.slice(-1)&&"!--"===f.toString().slice(0,3)?(d.push(la()),d.push(f)):d=ma(d,f),"in"!==a.operator||c&F?ua(d,e,b):["(",d,")"]},CallExpression:function(a,b,c){var d,e,g;for(d=[this.generateExpression(a.callee,f.Call,M)],d.push("("),e=0,g=a.arguments.length;g>e;++e)d.push(this.generateExpression(a.arguments[e],f.Assignment,N)),g>e+1&&d.push(","+t);return d.push(")"),c&G?ua(d,f.Call,b):["(",d,")"]},NewExpression:function(a,b,c){var d,e,g,h,i;if(e=a.arguments.length,i=c&H&&!u&&0===e?Q:O,d=ma("new",this.generateExpression(a.callee,f.New,i)),!(c&H)||u||e>0){for(d.push("("),g=0,h=e;h>g;++g)d.push(this.generateExpression(a.arguments[g],f.Assignment,N)),h>g+1&&d.push(","+t);d.push(")")}return ua(d,f.New,b)},MemberExpression:function(a,b,c){var d,g;return d=[this.generateExpression(a.object,f.Call,c&G?M:O)],a.computed?(d.push("["),d.push(this.generateExpression(a.property,f.Sequence,c&G?N:Q)),d.push("]")):(a.object.type===e.Literal&&"number"==typeof a.object.value&&(g=ka(d).toString(),g.indexOf(".")<0&&!/[eExX]/.test(g)&&j.code.isDecimalDigit(g.charCodeAt(g.length-1))&&!(g.length>=2&&48===g.charCodeAt(0))&&d.push(".")),d.push("."),d.push(ya(a.property))),ua(d,f.Member,b)},UnaryExpression:function(a,b,c){var d,e,g,h,i;return e=this.generateExpression(a.argument,f.Unary,N),""===t?d=ma(a.operator,e):(d=[a.operator],a.operator.length>2?d=ma(d,e):(h=ka(d).toString(),i=h.charCodeAt(h.length-1),g=e.toString().charCodeAt(0),(43===i||45===i)&&i===g||j.code.isIdentifierPart(i)&&j.code.isIdentifierPart(g)?(d.push(la()),d.push(e)):d.push(e))),ua(d,f.Unary,b)},YieldExpression:function(a,b,c){var d;return d=a.delegate?"yield*":"yield",a.argument&&(d=ma(d,this.generateExpression(a.argument,f.Yield,N))),ua(d,f.Yield,b)},AwaitExpression:function(a,b,c){var d=ma(a.delegate?"await*":"await",this.generateExpression(a.argument,f.Await,N));return ua(d,f.Await,b)},UpdateExpression:function(a,b,c){return a.prefix?ua([a.operator,this.generateExpression(a.argument,f.Unary,N)],f.Unary,b):ua([this.generateExpression(a.argument,f.Postfix,N),a.operator],f.Postfix,b)},FunctionExpression:function(a,b,c){var d=[za(a,!0),"function"];return a.id?(d.push(Aa(a)||la()),d.push(ya(a.id))):d.push(Aa(a)||t),d.push(this.generateFunctionBody(a)),d},ExportBatchSpecifier:function(a,b,c){return"*"},ArrayPattern:function(a,b,c){return this.ArrayExpression(a,b,c)},ArrayExpression:function(a,b,c){var d,e,g=this;return a.elements.length?(e=a.elements.length>1,d=["[",e?s:""],oa(function(b){var c,h;for(c=0,h=a.elements.length;h>c;++c)a.elements[c]?(d.push(e?b:""),d.push(g.generateExpression(a.elements[c],f.Assignment,N))):(e&&d.push(b),c+1===h&&d.push(",")),h>c+1&&d.push(","+(e?s:t))}),e&&!_(ka(d).toString())&&d.push(s),d.push(e?l:""),d.push("]"),d):"[]"},ClassExpression:function(a,b,c){var d,e;return d=["class"],a.id&&(d=ma(d,this.generateExpression(a.id,f.Sequence,N))),a.superClass&&(e=ma("extends",this.generateExpression(a.superClass,f.Assignment,N)),d=ma(d,e)),d.push(t),d.push(this.generateStatement(a.body,S)),d},MethodDefinition:function(a,b,c){var d,e;return d=a["static"]?["static"+t]:[],e="get"===a.kind||"set"===a.kind?[ma(a.kind,this.generatePropertyKey(a.key,a.computed)),this.generateFunctionBody(a.value)]:[Ba(a),this.generatePropertyKey(a.key,a.computed),this.generateFunctionBody(a.value)],ma(d,e)},Property:function(a,b,c){return"get"===a.kind||"set"===a.kind?[a.kind,la(),this.generatePropertyKey(a.key,a.computed),this.generateFunctionBody(a.value)]:a.shorthand?this.generatePropertyKey(a.key,a.computed):a.method?[Ba(a),this.generatePropertyKey(a.key,a.computed),this.generateFunctionBody(a.value)]:[this.generatePropertyKey(a.key,a.computed),":"+t,this.generateExpression(a.value,f.Assignment,N)]},ObjectExpression:function(a,b,c){var d,e,g,h=this;return a.properties.length?(d=a.properties.length>1,oa(function(){g=h.generateExpression(a.properties[0],f.Sequence,N)}),d||$(ka(g).toString())?(oa(function(b){var c,i;if(e=["{",s,b,g],d)for(e.push(","+s),c=1,i=a.properties.length;i>c;++c)e.push(b),e.push(h.generateExpression(a.properties[c],f.Sequence,N)),i>c+1&&e.push(","+s)}),_(ka(e).toString())||e.push(s),e.push(l),e.push("}"),e):["{",t,g,t,"}"]):"{}"},ObjectPattern:function(a,b,c){var d,g,h,i,j,k=this;if(!a.properties.length)return"{}";if(i=!1,1===a.properties.length)j=a.properties[0],j.value.type!==e.Identifier&&(i=!0);else for(g=0,h=a.properties.length;h>g;++g)if(j=a.properties[g],!j.shorthand){i=!0;break}return d=["{",i?s:""],oa(function(b){var c,e;for(c=0,e=a.properties.length;e>c;++c)d.push(i?b:""),d.push(k.generateExpression(a.properties[c],f.Sequence,N)),e>c+1&&d.push(","+(i?s:t))}),i&&!_(ka(d).toString())&&d.push(s),d.push(i?l:""),d.push("}"),d},ThisExpression:function(a,b,c){return"this"},Identifier:function(a,b,c){return ya(a)},ImportDefaultSpecifier:function(a,b,c){return ya(a.id)},ImportNamespaceSpecifier:function(a,b,c){var d=["*"];return a.id&&d.push(t+"as"+la()+ya(a.id)),d},ImportSpecifier:function(a,b,c){return this.ExportSpecifier(a,b,c)},ExportSpecifier:function(a,b,c){var d=[a.id.name];return a.name&&d.push(la()+"as"+la()+ya(a.name)),d},Literal:function(a,b,c){var d;if(a.hasOwnProperty("raw")&&z&&y.raw)try{if(d=z(a.raw).body[0].expression,d.type===e.Literal&&d.value===a.value)return a.raw}catch(a){}return null===a.value?"null":"string"==typeof a.value?ia(a.value):"number"==typeof a.value?ca(a.value):"boolean"==typeof a.value?a.value?"true":"false":ea(a.value)},GeneratorExpression:function(a,b,c){return this.ComprehensionExpression(a,b,c)},ComprehensionExpression:function(a,b,c){var d,g,h,i,j=this;return d=a.type===e.GeneratorExpression?["("]:["["],y.moz.comprehensionExpressionStartsWithAssignment&&(i=this.generateExpression(a.body,f.Assignment,N),d.push(i)),a.blocks&&oa(function(){for(g=0,h=a.blocks.length;h>g;++g)i=j.generateExpression(a.blocks[g],f.Sequence,N),g>0||y.moz.comprehensionExpressionStartsWithAssignment?d=ma(d,i):d.push(i)}),a.filter&&(d=ma(d,"if"+t),i=this.generateExpression(a.filter,f.Sequence,N),d=ma(d,["(",i,")"])),y.moz.comprehensionExpressionStartsWithAssignment||(i=this.generateExpression(a.body,f.Assignment,N),d=ma(d,i)),d.push(a.type===e.GeneratorExpression?")":"]"),d},ComprehensionBlock:function(a,b,c){var d;return d=a.left.type===e.VariableDeclaration?[a.left.kind,la(),this.generateStatement(a.left.declarations[0],T)]:this.generateExpression(a.left,f.Call,N),d=ma(d,a.of?"of":"in"),d=ma(d,this.generateExpression(a.right,f.Sequence,N)),["for"+t+"(",d,")"]},SpreadElement:function(a,b,c){return["...",this.generateExpression(a.argument,f.Assignment,N)]},TaggedTemplateExpression:function(a,b,c){var d=M;c&G||(d=O);var e=[this.generateExpression(a.tag,f.Call,d),this.generateExpression(a.quasi,f.Primary,P)];return ua(e,f.TaggedTemplate,b)},TemplateElement:function(a,b,c){return a.value.raw},TemplateLiteral:function(a,b,c){var d,e,g;for(d=["`"],e=0,g=a.quasis.length;g>e;++e)d.push(this.generateExpression(a.quasis[e],f.Primary,N)),g>e+1&&(d.push("${"+t),d.push(this.generateExpression(a.expressions[e],f.Sequence,N)),d.push(t+"}"));return d.push("`"),d},ModuleSpecifier:function(a,b,c){return this.Literal(a,b,c)}},aa(xa.prototype,xa.Expression),xa.prototype.generateExpression=function(a,b,c){var d,f;return f=a.type||e.Property,y.verbatim&&a.hasOwnProperty(y.verbatim)?wa(a,b):(d=this[f](a,b,c),y.comment&&(d=sa(a,d)),ka(d,a))},xa.prototype.generateStatement=function(a,b){var c,d;return c=this[a.type](a,b),y.comment&&(c=sa(a,c)),d=ka(c).toString(),a.type===e.Program&&!w&&""===s&&"\n"===d.charAt(d.length-1)&&(c=A?ka(c).replaceRight(/\s+$/,""):d.replace(/\s+$/,"")),ka(c,a)},D={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},E=Y().format,d.version=b("/package.json",c).version,d.generate=Da,d.attachComments=i.attachComments,d.Precedence=ba({},f),d.browser=!1,d.FORMAT_MINIFY=D,d.FORMAT_DEFAULTS=E}()}),b.define("/package.json",function(a,b,c,d){a.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],version:"1.6.1",engines:{node:">=0.10.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^1.9.1",esutils:"^1.1.6",esprima:"^1.2.2",optionator:"^0.5.0"},optionalDependencies:{"source-map":"~0.1.40"},devDependencies:{"acorn-6to5":"^0.11.1-25",bluebird:"^2.3.11","bower-registry-client":"^0.2.1",chai:"^1.10.0","commonjs-everywhere":"^0.9.7","esprima-moz":"*",gulp:"^3.8.10","gulp-eslint":"^0.2.0","gulp-mocha":"^2.0.0",semver:"^4.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/escodegen/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}}),b.define("/node_modules/source-map/lib/source-map.js",function(a,c,d,e){
c.SourceMapGenerator=b("/node_modules/source-map/lib/source-map/source-map-generator.js",a).SourceMapGenerator,c.SourceMapConsumer=b("/node_modules/source-map/lib/source-map/source-map-consumer.js",a).SourceMapConsumer,c.SourceNode=b("/node_modules/source-map/lib/source-map/source-node.js",a).SourceNode}),b.define("/node_modules/source-map/lib/source-map/source-node.js",function(a,c,d,e){if("function"!=typeof f)var f=b("/node_modules/source-map/node_modules/amdefine/amdefine.js",a)(a,b);f(function(a,b,c){function d(a,b,c,d,e){this.children=[],this.sourceContents={},this.line=null==a?null:a,this.column=null==b?null:b,this.source=null==c?null:c,this.name=null==e?null:e,this[i]=!0,null!=d&&this.add(d)}var e=a("/node_modules/source-map/lib/source-map/source-map-generator.js",c).SourceMapGenerator,f=a("/node_modules/source-map/lib/source-map/util.js",c),g=/(\r?\n)/,h=/\r\n|[\s\S]/g,i="$$$isSourceNode$$$";d.fromStringWithSourceMap=function(a,b,c){function e(a,b){if(null===a||void 0===a.source)h.add(b);else{var e=c?f.join(c,a.source):a.source;h.add(new d(a.originalLine,a.originalColumn,e,b,a.name))}}var h=new d,i=a.split(g),j=function(){var a=i.shift(),b=i.shift()||"";return a+b},k=1,l=0,m=null;return b.eachMapping(function(a){if(null!==m){if(!(k<a.generatedLine)){var b=i[0],c=b.substr(0,a.generatedColumn-l);return i[0]=b.substr(a.generatedColumn-l),l=a.generatedColumn,e(m,c),m=a,void 0}var c="";e(m,j()),k++,l=0}for(;k<a.generatedLine;)h.add(j()),k++;if(l<a.generatedColumn){var b=i[0];h.add(b.substr(0,a.generatedColumn)),i[0]=b.substr(a.generatedColumn),l=a.generatedColumn}m=a},this),i.length>0&&(m&&e(m,j()),h.add(i.join(""))),b.sources.forEach(function(a){var d=b.sourceContentFor(a);null!=d&&(null!=c&&(a=f.join(c,a)),h.setSourceContent(a,d))}),h},d.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(a){this.add(a)},this);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);a&&this.children.push(a)}return this},d.prototype.prepend=function(a){if(Array.isArray(a))for(var b=a.length-1;b>=0;b--)this.prepend(a[b]);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);this.children.unshift(a)}return this},d.prototype.walk=function(a){for(var b,c=0,d=this.children.length;d>c;c++)b=this.children[c],b[i]?b.walk(a):""!==b&&a(b,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(a){var b,c,d=this.children.length;if(d>0){for(b=[],c=0;d-1>c;c++)b.push(this.children[c]),b.push(a);b.push(this.children[c]),this.children=b}return this},d.prototype.replaceRight=function(a,b){var c=this.children[this.children.length-1];return c[i]?c.replaceRight(a,b):"string"==typeof c?this.children[this.children.length-1]=c.replace(a,b):this.children.push("".replace(a,b)),this},d.prototype.setSourceContent=function(a,b){this.sourceContents[f.toSetString(a)]=b},d.prototype.walkSourceContents=function(a){for(var b=0,c=this.children.length;c>b;b++)this.children[b][i]&&this.children[b].walkSourceContents(a);for(var d=Object.keys(this.sourceContents),b=0,c=d.length;c>b;b++)a(f.fromSetString(d[b]),this.sourceContents[d[b]])},d.prototype.toString=function(){var a="";return this.walk(function(b){a+=b}),a},d.prototype.toStringWithSourceMap=function(a){var b={code:"",line:1,column:0},c=new e(a),d=!1,f=null,i=null,j=null,k=null;return this.walk(function(a,e){b.code+=a,null!==e.source&&null!==e.line&&null!==e.column?((f!==e.source||i!==e.line||j!==e.column||k!==e.name)&&c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name}),f=e.source,i=e.line,j=e.column,k=e.name,d=!0):d&&(c.addMapping({generated:{line:b.line,column:b.column}}),f=null,d=!1),a.match(h).forEach(function(a,h,i){g.test(a)?(b.line++,b.column=0,h+1===i.length?(f=null,d=!1):d&&c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name})):b.column+=a.length})}),this.walkSourceContents(function(a,b){c.setSourceContent(a,b)}),{code:b.code,map:c}},b.SourceNode=d})}),b.define("/node_modules/source-map/lib/source-map/util.js",function(a,c,d,e){if("function"!=typeof f)var f=b("/node_modules/source-map/node_modules/amdefine/amdefine.js",a)(a,b);f(function(a,b,c){function d(a,b,c){if(b in a)return a[b];if(3===arguments.length)return c;throw new Error('"'+b+'" is a required argument.')}function e(a){var b=a.match(o);return b?{scheme:b[1],auth:b[2],host:b[3],port:b[4],path:b[5]}:null}function f(a){var b="";return a.scheme&&(b+=a.scheme+":"),b+="//",a.auth&&(b+=a.auth+"@"),a.host&&(b+=a.host),a.port&&(b+=":"+a.port),a.path&&(b+=a.path),b}function g(a){var b=a,c=e(a);if(c){if(!c.path)return a;b=c.path}for(var d,g="/"===b.charAt(0),h=b.split(/\/+/),i=0,j=h.length-1;j>=0;j--)d=h[j],"."===d?h.splice(j,1):".."===d?i++:i>0&&(""===d?(h.splice(j+1,i),i=0):(h.splice(j,2),i--));return b=h.join("/"),""===b&&(b=g?"/":"."),c?(c.path=b,f(c)):b}function h(a,b){""===a&&(a="."),""===b&&(b=".");var c=e(b),d=e(a);if(d&&(a=d.path||"/"),c&&!c.scheme)return d&&(c.scheme=d.scheme),f(c);if(c||b.match(p))return b;if(d&&!d.host&&!d.path)return d.host=b,f(d);var h="/"===b.charAt(0)?b:g(a.replace(/\/+$/,"")+"/"+b);return d?(d.path=h,f(d)):h}function i(a,b){""===a&&(a="."),a=a.replace(/\/$/,"");var c=e(a);return"/"==b.charAt(0)&&c&&"/"==c.path?b.slice(1):0===b.indexOf(a+"/")?b.substr(a.length+1):b}function j(a){return"$"+a}function k(a){return a.substr(1)}function l(a,b){var c=a||"",d=b||"";return(c>d)-(d>c)}function m(a,b,c){var d;return d=l(a.source,b.source),d?d:(d=a.originalLine-b.originalLine,d?d:(d=a.originalColumn-b.originalColumn,d||c?d:(d=l(a.name,b.name),d?d:(d=a.generatedLine-b.generatedLine,d?d:a.generatedColumn-b.generatedColumn))))}function n(a,b,c){var d;return d=a.generatedLine-b.generatedLine,d?d:(d=a.generatedColumn-b.generatedColumn,d||c?d:(d=l(a.source,b.source),d?d:(d=a.originalLine-b.originalLine,d?d:(d=a.originalColumn-b.originalColumn,d?d:l(a.name,b.name)))))}b.getArg=d;var o=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,p=/^data:.+\,.+$/;b.urlParse=e,b.urlGenerate=f,b.normalize=g,b.join=h,b.relative=i,b.toSetString=j,b.fromSetString=k,b.compareByOriginalPositions=m,b.compareByGeneratedPositions=n})}),b.define("/node_modules/source-map/node_modules/amdefine/amdefine.js",function(a,d,e,f){"use strict";function g(a,d){function e(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function g(a,b){var c;return a&&"."===a.charAt(0)&&b&&(c=b.split("/"),c=c.slice(0,c.length-1),c=c.concat(a.split("/")),e(c),a=c.join("/")),a}function h(a){return function(b){return g(b,a)}}function i(a){function b(b){o[a]=b}return b.fromText=function(a,b){throw new Error("amdefine does not implement load.fromText")},b}function j(b,c,e){var g,h,i,j;if(b)h=o[b]={},i={id:b,uri:f,exports:h},g=l(d,h,i,b);else{if(p)throw new Error("amdefine with no module ID cannot be called more than once per file.");p=!0,h=a.exports,i=a,g=l(d,h,i,a.id)}c&&(c=c.map(function(a){return g(a)})),j="function"==typeof e?e.apply(i.exports,c):e,void 0!==j&&(i.exports=j,b&&(o[b]=i.exports))}function k(a,b,c){Array.isArray(a)?(c=b,b=a,a=void 0):"string"!=typeof a&&(c=a,a=b=void 0),b&&!Array.isArray(b)&&(c=b,b=void 0),b||(b=["require","exports","module"]),a?n[a]=[a,b,c]:j(a,b,c)}var l,m,n={},o={},p=!1,q=b("path",a);return l=function(a,b,d,e){function f(f,g){return"string"==typeof f?m(a,b,d,f,e):(f=f.map(function(c){return m(a,b,d,c,e)}),void c.nextTick(function(){g.apply(null,f)}))}return f.toUrl=function(a){return 0===a.indexOf(".")?g(a,q.dirname(d.filename)):a},f},d=d||function(){return a.require.apply(a,arguments)},m=function(a,b,c,d,e){var f,k,p=d.indexOf("!"),q=d;if(-1===p){if(d=g(d,e),"require"===d)return l(a,b,c,e);if("exports"===d)return b;if("module"===d)return c;if(o.hasOwnProperty(d))return o[d];if(n[d])return j.apply(null,n[d]),o[d];if(a)return a(q);throw new Error("No module with ID: "+d)}return f=d.substring(0,p),d=d.substring(p+1,d.length),k=m(a,b,c,f,e),d=k.normalize?k.normalize(d,h(e)):g(d,e),o[d]?o[d]:(k.load(d,l(a,b,c,e),i(d),{}),o[d])},k.require=function(a){return o[a]?o[a]:n[a]?(j.apply(null,n[a]),o[a]):void 0},k.amd={},k}a.exports=g}),b.define("/node_modules/source-map/lib/source-map/source-map-generator.js",function(a,c,d,e){if("function"!=typeof f)var f=b("/node_modules/source-map/node_modules/amdefine/amdefine.js",a)(a,b);f(function(a,b,c){function d(a){a||(a={}),this._file=f.getArg(a,"file",null),this._sourceRoot=f.getArg(a,"sourceRoot",null),this._sources=new g,this._names=new g,this._mappings=[],this._sourcesContents=null}var e=a("/node_modules/source-map/lib/source-map/base64-vlq.js",c),f=a("/node_modules/source-map/lib/source-map/util.js",c),g=a("/node_modules/source-map/lib/source-map/array-set.js",c).ArraySet;d.prototype._version=3,d.fromSourceMap=function(a){var b=a.sourceRoot,c=new d({file:a.file,sourceRoot:b});return a.eachMapping(function(a){var d={generated:{line:a.generatedLine,column:a.generatedColumn}};null!=a.source&&(d.source=a.source,null!=b&&(d.source=f.relative(b,d.source)),d.original={line:a.originalLine,column:a.originalColumn},null!=a.name&&(d.name=a.name)),c.addMapping(d)}),a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&c.setSourceContent(b,d)}),c},d.prototype.addMapping=function(a){var b=f.getArg(a,"generated"),c=f.getArg(a,"original",null),d=f.getArg(a,"source",null),e=f.getArg(a,"name",null);this._validateMapping(b,c,d,e),null!=d&&!this._sources.has(d)&&this._sources.add(d),null!=e&&!this._names.has(e)&&this._names.add(e),this._mappings.push({generatedLine:b.line,generatedColumn:b.column,originalLine:null!=c&&c.line,originalColumn:null!=c&&c.column,source:d,name:e})},d.prototype.setSourceContent=function(a,b){var c=a;null!=this._sourceRoot&&(c=f.relative(this._sourceRoot,c)),null!=b?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[f.toSetString(c)]=b):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(c)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},d.prototype.applySourceMap=function(a,b,c){var d=b;if(null==b){if(null==a.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');d=a.file}var e=this._sourceRoot;null!=e&&(d=f.relative(e,d));var h=new g,i=new g;this._mappings.forEach(function(b){if(b.source===d&&null!=b.originalLine){var g=a.originalPositionFor({line:b.originalLine,column:b.originalColumn});null!=g.source&&(b.source=g.source,null!=c&&(b.source=f.join(c,b.source)),null!=e&&(b.source=f.relative(e,b.source)),b.originalLine=g.line,b.originalColumn=g.column,null!=g.name&&(b.name=g.name))}var j=b.source;null!=j&&!h.has(j)&&h.add(j);var k=b.name;null!=k&&!i.has(k)&&i.add(k)},this),this._sources=h,this._names=i,a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&(null!=c&&(b=f.join(c,b)),null!=e&&(b=f.relative(e,b)),this.setSourceContent(b,d))},this)},d.prototype._validateMapping=function(a,b,c,d){if(!(a&&"line"in a&&"column"in a&&a.line>0&&a.column>=0&&!b&&!c&&!d||a&&"line"in a&&"column"in a&&b&&"line"in b&&"column"in b&&a.line>0&&a.column>=0&&b.line>0&&b.column>=0&&c))throw new Error("Invalid mapping: "+JSON.stringify({generated:a,source:c,original:b,name:d}))},d.prototype._serializeMappings=function(){var a,b=0,c=1,d=0,g=0,h=0,i=0,j="";this._mappings.sort(f.compareByGeneratedPositions);for(var k=0,l=this._mappings.length;l>k;k++){if(a=this._mappings[k],a.generatedLine!==c)for(b=0;a.generatedLine!==c;)j+=";",c++;else if(k>0){if(!f.compareByGeneratedPositions(a,this._mappings[k-1]))continue;j+=","}j+=e.encode(a.generatedColumn-b),b=a.generatedColumn,null!=a.source&&(j+=e.encode(this._sources.indexOf(a.source)-i),i=this._sources.indexOf(a.source),j+=e.encode(a.originalLine-1-g),g=a.originalLine-1,j+=e.encode(a.originalColumn-d),d=a.originalColumn,null!=a.name&&(j+=e.encode(this._names.indexOf(a.name)-h),h=this._names.indexOf(a.name)))}return j},d.prototype._generateSourcesContent=function(a,b){return a.map(function(a){if(!this._sourcesContents)return null;null!=b&&(a=f.relative(b,a));var c=f.toSetString(a);return Object.prototype.hasOwnProperty.call(this._sourcesContents,c)?this._sourcesContents[c]:null},this)},d.prototype.toJSON=function(){var a={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(a.file=this._file),null!=this._sourceRoot&&(a.sourceRoot=this._sourceRoot),this._sourcesContents&&(a.sourcesContent=this._generateSourcesContent(a.sources,a.sourceRoot)),a},d.prototype.toString=function(){return JSON.stringify(this)},b.SourceMapGenerator=d})}),b.define("/node_modules/source-map/lib/source-map/array-set.js",function(a,c,d,e){if("function"!=typeof f)var f=b("/node_modules/source-map/node_modules/amdefine/amdefine.js",a)(a,b);f(function(a,b,c){function d(){this._array=[],this._set={}}var e=a("/node_modules/source-map/lib/source-map/util.js",c);d.fromArray=function(a,b){for(var c=new d,e=0,f=a.length;f>e;e++)c.add(a[e],b);return c},d.prototype.add=function(a,b){var c=this.has(a),d=this._array.length;(!c||b)&&this._array.push(a),c||(this._set[e.toSetString(a)]=d)},d.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this._set,e.toSetString(a))},d.prototype.indexOf=function(a){if(this.has(a))return this._set[e.toSetString(a)];throw new Error('"'+a+'" is not in the set.')},d.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},d.prototype.toArray=function(){return this._array.slice()},b.ArraySet=d})}),b.define("/node_modules/source-map/lib/source-map/base64-vlq.js",function(a,c,d,e){if("function"!=typeof f)var f=b("/node_modules/source-map/node_modules/amdefine/amdefine.js",a)(a,b);f(function(a,b,c){function d(a){return 0>a?(-a<<1)+1:(a<<1)+0}function e(a){var b=1===(1&a),c=a>>1;return b?-c:c}var f=a("/node_modules/source-map/lib/source-map/base64.js",c),g=5,h=1<<g,i=h-1,j=h;b.encode=function(a){var b,c="",e=d(a);do b=e&i,e>>>=g,e>0&&(b|=j),c+=f.encode(b);while(e>0);return c},b.decode=function(a,b){var c,d,h=0,k=a.length,l=0,m=0;do{if(h>=k)throw new Error("Expected more digits in base 64 VLQ value.");d=f.decode(a.charAt(h++)),c=!!(d&j),d&=i,l+=d<<m,m+=g}while(c);b.value=e(l),b.rest=a.slice(h)}})}),b.define("/node_modules/source-map/lib/source-map/base64.js",function(a,c,d,e){if("function"!=typeof f)var f=b("/node_modules/source-map/node_modules/amdefine/amdefine.js",a)(a,b);f(function(a,b,c){var d={},e={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(a,b){d[a]=b,e[b]=a}),b.encode=function(a){if(a in e)return e[a];throw new TypeError("Must be between 0 and 63: "+a)},b.decode=function(a){if(a in d)return d[a];throw new TypeError("Not a valid base 64 digit: "+a)}})}),b.define("/node_modules/source-map/lib/source-map/source-map-consumer.js",function(a,c,d,e){if("function"!=typeof f)var f=b("/node_modules/source-map/node_modules/amdefine/amdefine.js",a)(a,b);f(function(a,b,c){function d(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=e.getArg(b,"version"),d=e.getArg(b,"sources"),f=e.getArg(b,"names",[]),h=e.getArg(b,"sourceRoot",null),i=e.getArg(b,"sourcesContent",null),j=e.getArg(b,"mappings"),k=e.getArg(b,"file",null);if(c!=this._version)throw new Error("Unsupported version: "+c);d=d.map(e.normalize),this._names=g.fromArray(f,!0),this._sources=g.fromArray(d,!0),this.sourceRoot=h,this.sourcesContent=i,this._mappings=j,this.file=k}var e=a("/node_modules/source-map/lib/source-map/util.js",c),f=a("/node_modules/source-map/lib/source-map/binary-search.js",c),g=a("/node_modules/source-map/lib/source-map/array-set.js",c).ArraySet,h=a("/node_modules/source-map/lib/source-map/base64-vlq.js",c);d.fromSourceMap=function(a){var b=Object.create(d.prototype);return b._names=g.fromArray(a._names.toArray(),!0),b._sources=g.fromArray(a._sources.toArray(),!0),b.sourceRoot=a._sourceRoot,b.sourcesContent=a._generateSourcesContent(b._sources.toArray(),b.sourceRoot),b.file=a._file,b.__generatedMappings=a._mappings.slice().sort(e.compareByGeneratedPositions),b.__originalMappings=a._mappings.slice().sort(e.compareByOriginalPositions),b},d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){return this._sources.toArray().map(function(a){return null!=this.sourceRoot?e.join(this.sourceRoot,a):a},this)}}),d.prototype.__generatedMappings=null,Object.defineProperty(d.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),d.prototype.__originalMappings=null,Object.defineProperty(d.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),d.prototype._nextCharIsMappingSeparator=function(a){var b=a.charAt(0);return";"===b||","===b},d.prototype._parseMappings=function(a,b){for(var c,d=1,f=0,g=0,i=0,j=0,k=0,l=a,m={};l.length>0;)if(";"===l.charAt(0))d++,l=l.slice(1),f=0;else if(","===l.charAt(0))l=l.slice(1);else{if(c={},c.generatedLine=d,h.decode(l,m),c.generatedColumn=f+m.value,f=c.generatedColumn,l=m.rest,l.length>0&&!this._nextCharIsMappingSeparator(l)){if(h.decode(l,m),c.source=this._sources.at(j+m.value),j+=m.value,l=m.rest,0===l.length||this._nextCharIsMappingSeparator(l))throw new Error("Found a source, but no line and column");if(h.decode(l,m),c.originalLine=g+m.value,g=c.originalLine,c.originalLine+=1,l=m.rest,0===l.length||this._nextCharIsMappingSeparator(l))throw new Error("Found a source and line, but no column");h.decode(l,m),c.originalColumn=i+m.value,i=c.originalColumn,l=m.rest,l.length>0&&!this._nextCharIsMappingSeparator(l)&&(h.decode(l,m),c.name=this._names.at(k+m.value),k+=m.value,l=m.rest)}this.__generatedMappings.push(c),"number"==typeof c.originalLine&&this.__originalMappings.push(c)}this.__generatedMappings.sort(e.compareByGeneratedPositions),this.__originalMappings.sort(e.compareByOriginalPositions)},d.prototype._findMapping=function(a,b,c,d,e){if(a[c]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+a[c]);if(a[d]<0)throw new TypeError("Column must be greater than or equal to 0, got "+a[d]);return f.search(a,b,e)},d.prototype.computeColumnSpans=function(){for(var a=0;a<this._generatedMappings.length;++a){var b=this._generatedMappings[a];if(a+1<this._generatedMappings.length){var c=this._generatedMappings[a+1];if(b.generatedLine===c.generatedLine){b.lastGeneratedColumn=c.generatedColumn-1;continue}}b.lastGeneratedColumn=1/0}},d.prototype.originalPositionFor=function(a){var b={generatedLine:e.getArg(a,"line"),generatedColumn:e.getArg(a,"column")},c=this._findMapping(b,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositions);if(c>=0){var d=this._generatedMappings[c];if(d.generatedLine===b.generatedLine){var f=e.getArg(d,"source",null);return null!=f&&null!=this.sourceRoot&&(f=e.join(this.sourceRoot,f)),{source:f,line:e.getArg(d,"originalLine",null),column:e.getArg(d,"originalColumn",null),name:e.getArg(d,"name",null)}}}return{source:null,line:null,column:null,name:null}},d.prototype.sourceContentFor=function(a){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(a=e.relative(this.sourceRoot,a)),this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];var b;if(null!=this.sourceRoot&&(b=e.urlParse(this.sourceRoot))){var c=a.replace(/^file:\/\//,"");if("file"==b.scheme&&this._sources.has(c))return this.sourcesContent[this._sources.indexOf(c)];if((!b.path||"/"==b.path)&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}throw new Error('"'+a+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(a){var b={source:e.getArg(a,"source"),originalLine:e.getArg(a,"line"),originalColumn:e.getArg(a,"column")};null!=this.sourceRoot&&(b.source=e.relative(this.sourceRoot,b.source));var c=this._findMapping(b,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions);if(c>=0){var d=this._originalMappings[c];return{line:e.getArg(d,"generatedLine",null),column:e.getArg(d,"generatedColumn",null),lastColumn:e.getArg(d,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},d.prototype.allGeneratedPositionsFor=function(a){var b={source:e.getArg(a,"source"),originalLine:e.getArg(a,"line"),originalColumn:1/0};null!=this.sourceRoot&&(b.source=e.relative(this.sourceRoot,b.source));var c=[],d=this._findMapping(b,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions);if(d>=0)for(var f=this._originalMappings[d];f&&f.originalLine===b.originalLine;)c.push({line:e.getArg(f,"generatedLine",null),column:e.getArg(f,"generatedColumn",null),lastColumn:e.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[--d];return c.reverse()},d.GENERATED_ORDER=1,d.ORIGINAL_ORDER=2,d.prototype.eachMapping=function(a,b,c){var f,g=b||null,h=c||d.GENERATED_ORDER;switch(h){case d.GENERATED_ORDER:f=this._generatedMappings;break;case d.ORIGINAL_ORDER:f=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;f.map(function(a){var b=a.source;return null!=b&&null!=i&&(b=e.join(i,b)),{source:b,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:a.name}}).forEach(a,g)},b.SourceMapConsumer=d})}),b.define("/node_modules/source-map/lib/source-map/binary-search.js",function(a,c,d,e){if("function"!=typeof f)var f=b("/node_modules/source-map/node_modules/amdefine/amdefine.js",a)(a,b);f(function(a,b,c){function d(a,b,c,e,f){var g=Math.floor((b-a)/2)+a,h=f(c,e[g],!0);return 0===h?g:h>0?b-g>1?d(g,b,c,e,f):g:g-a>1?d(a,g,c,e,f):0>a?-1:a}b.search=function(a,b,c){return 0===b.length?-1:d(-1,b.length,a,b,c)}})}),b.define("/node_modules/esutils/lib/utils.js",function(a,c,d,e){!function(){"use strict";c.ast=b("/node_modules/esutils/lib/ast.js",a),c.code=b("/node_modules/esutils/lib/code.js",a),c.keyword=b("/node_modules/esutils/lib/keyword.js",a)}()}),b.define("/node_modules/esutils/lib/keyword.js",function(a,c,d,e){!function(c){"use strict";function d(a){switch(a){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function e(a,b){return b||"yield"!==a?f(a,b):!1}function f(a,b){if(b&&d(a))return!0;switch(a.length){case 2:return"if"===a||"in"===a||"do"===a;case 3:return"var"===a||"for"===a||"new"===a||"try"===a;case 4:return"this"===a||"else"===a||"case"===a||"void"===a||"with"===a||"enum"===a;case 5:return"while"===a||"break"===a||"catch"===a||"throw"===a||"const"===a||"yield"===a||"class"===a||"super"===a;case 6:return"return"===a||"typeof"===a||"delete"===a||"switch"===a||"export"===a||"import"===a;case 7:return"default"===a||"finally"===a||"extends"===a;case 8:return"function"===a||"continue"===a||"debugger"===a;case 10:return"instanceof"===a;default:return!1}}function g(a,b){return"null"===a||"true"===a||"false"===a||e(a,b)}function h(a,b){return"null"===a||"true"===a||"false"===a||f(a,b)}function i(a){return"eval"===a||"arguments"===a}function j(a){var b,d,e;if(0===a.length)return!1;if(e=a.charCodeAt(0),!c.isIdentifierStart(e)||92===e)return!1;for(b=1,d=a.length;d>b;++b)if(e=a.charCodeAt(b),!c.isIdentifierPart(e)||92===e)return!1;return!0}function k(a,b){return j(a)&&!g(a,b)}function l(a,b){return j(a)&&!h(a,b)}c=b("/node_modules/esutils/lib/code.js",a),a.exports={isKeywordES5:e,isKeywordES6:f,isReservedWordES5:g,isReservedWordES6:h,isRestrictedWord:i,isIdentifierName:j,isIdentifierES5:k,isIdentifierES6:l}}()}),b.define("/node_modules/esutils/lib/code.js",function(a,b,c,d){!function(b,c){"use strict";function d(a){return a>=48&&57>=a}function e(a){return d(a)||a>=97&&102>=a||a>=65&&70>=a}function f(a){return a>=48&&55>=a}function g(a){return 32===a||9===a||11===a||12===a||160===a||a>=5760&&c.indexOf(a)>=0}function h(a){return 10===a||13===a||8232===a||8233===a}function i(a){return a>=97&&122>=a||a>=65&&90>=a||36===a||95===a||92===a||a>=128&&b.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function j(a){return a>=97&&122>=a||a>=65&&90>=a||a>=48&&57>=a||36===a||95===a||92===a||a>=128&&b.NonAsciiIdentifierPart.test(String.fromCharCode(a))}b={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},c=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],a.exports={isDecimalDigit:d,isHexDigit:e,isOctalDigit:f,isWhiteSpace:g,isLineTerminator:h,isIdentifierStart:i,isIdentifierPart:j}}()}),b.define("/node_modules/esutils/lib/ast.js",function(a,b,c,d){!function(){"use strict";function b(a){if(null==a)return!1;switch(a.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function c(a){if(null==a)return!1;switch(a.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function d(a){if(null==a)return!1;switch(a.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function e(a){return d(a)||null!=a&&"FunctionDeclaration"===a.type}function f(a){switch(a.type){case"IfStatement":return null!=a.alternate?a.alternate:a.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return a.body}return null}function g(a){var b;if("IfStatement"!==a.type)return!1;if(null==a.alternate)return!1;b=a.consequent;do{if("IfStatement"===b.type&&null==b.alternate)return!0;b=f(b)}while(b);return!1}a.exports={isExpression:b,isStatement:d,isIterationStatement:c,isSourceElement:e,isProblematicIfStatement:g,trailingStatement:f}}()}),b.define("/node_modules/estraverse/estraverse.js",function(a,b,c,d){!function(a,c){"use strict";"function"==typeof define&&define.amd?define(["exports"],c):c(void 0!==b?b:a.estraverse={})}(this,function e(a){"use strict";function b(){}function c(a){var b,d,e={};for(b in a)a.hasOwnProperty(b)&&(d=a[b],"object"==typeof d&&null!==d?e[b]=c(d):e[b]=d);return e}function d(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}function f(a,b){var c,d,e,f;for(d=a.length,e=0;d;)c=d>>>1,f=e+c,b(a[f])?d=c:(e=f+1,d-=c+1);return e}function g(a,b){var c,d,e,f;for(d=a.length,e=0;d;)c=d>>>1,f=e+c,b(a[f])?(e=f+1,d-=c+1):d=c;return e}function h(a,b){return w(b).forEach(function(c){a[c]=b[c]}),a}function i(a,b){this.parent=a,this.key=b}function j(a,b,c,d){this.node=a,this.path=b,this.wrap=c,this.ref=d}function k(){}function l(a){return null==a?!1:"object"==typeof a&&"string"==typeof a.type}function m(a,b){return(a===r.ObjectExpression||a===r.ObjectPattern)&&"properties"===b}function n(a,b){var c=new k;return c.traverse(a,b)}function o(a,b){var c=new k;return c.replace(a,b)}function p(a,b){var c;return c=f(b,function(b){return b.range[0]>a.range[0]}),a.extendedRange=[a.range[0],a.range[1]],c!==b.length&&(a.extendedRange[1]=b[c].range[0]),c-=1,c>=0&&(a.extendedRange[0]=b[c].range[1]),a}function q(a,b,d){var e,f,g,h,i=[];if(!a.range)throw new Error("attachComments needs range information");if(!d.length){if(b.length){for(g=0,f=b.length;f>g;g+=1)e=c(b[g]),e.extendedRange=[0,a.range[0]],i.push(e);a.leadingComments=i}return a}for(g=0,f=b.length;f>g;g+=1)i.push(p(c(b[g]),d));return h=0,n(a,{enter:function(a){for(var b;h<i.length&&(b=i[h],!(b.extendedRange[1]>a.range[0]));)b.extendedRange[1]===a.range[0]?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.push(b),i.splice(h,1)):h+=1;return h===i.length?t.Break:i[h].extendedRange[0]>a.range[1]?t.Skip:void 0}}),h=0,n(a,{leave:function(a){for(var b;h<i.length&&(b=i[h],!(a.range[1]<b.extendedRange[0]));)a.range[1]===b.extendedRange[0]?(a.trailingComments||(a.trailingComments=[]),a.trailingComments.push(b),i.splice(h,1)):h+=1;return h===i.length?t.Break:i[h].extendedRange[0]>a.range[1]?t.Skip:void 0}}),a}var r,s,t,u,v,w,x,y,z;return s=Array.isArray,s||(s=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),b(d),b(g),v=Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),w=Object.keys||function(a){var b,c=[];for(b in a)c.push(b);return c},r={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",
DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},u={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id","name"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},x={},y={},z={},t={Break:x,Skip:y,Remove:z},i.prototype.replace=function(a){this.parent[this.key]=a},i.prototype.remove=function(){return s(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},k.prototype.path=function(){function a(a,b){if(s(b))for(d=0,e=b.length;e>d;++d)a.push(b[d]);else a.push(b)}var b,c,d,e,f,g;if(!this.__current.path)return null;for(f=[],b=2,c=this.__leavelist.length;c>b;++b)g=this.__leavelist[b],a(f,g.path);return a(f,this.__current.path),f},k.prototype.type=function(){var a=this.current();return a.type||this.__current.wrap},k.prototype.parents=function(){var a,b,c;for(c=[],a=1,b=this.__leavelist.length;b>a;++a)c.push(this.__leavelist[a].node);return c},k.prototype.current=function(){return this.__current.node},k.prototype.__execute=function(a,b){var c,d;return d=void 0,c=this.__current,this.__current=b,this.__state=null,a&&(d=a.call(this,b.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=c,d},k.prototype.notify=function(a){this.__state=a},k.prototype.skip=function(){this.notify(y)},k.prototype["break"]=function(){this.notify(x)},k.prototype.remove=function(){this.notify(z)},k.prototype.__initialize=function(a,b){this.visitor=b,this.root=a,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===b.fallback,this.__keys=u,b.keys&&(this.__keys=h(v(this.__keys),b.keys))},k.prototype.traverse=function(a,b){var c,d,e,f,g,h,i,k,n,o,p,q;for(this.__initialize(a,b),q={},c=this.__worklist,d=this.__leavelist,c.push(new j(a,null,null,null)),d.push(new j(null,null,null,null));c.length;)if(e=c.pop(),e!==q){if(e.node){if(h=this.__execute(b.enter,e),this.__state===x||h===x)return;if(c.push(q),d.push(e),this.__state===y||h===y)continue;if(f=e.node,g=e.wrap||f.type,o=this.__keys[g],!o){if(!this.__fallback)throw new Error("Unknown node type "+g+".");o=w(f)}for(k=o.length;(k-=1)>=0;)if(i=o[k],p=f[i])if(s(p)){for(n=p.length;(n-=1)>=0;)if(p[n]){if(m(g,o[k]))e=new j(p[n],[i,n],"Property",null);else{if(!l(p[n]))continue;e=new j(p[n],[i,n],null,null)}c.push(e)}}else l(p)&&c.push(new j(p,i,null,null))}}else if(e=d.pop(),h=this.__execute(b.leave,e),this.__state===x||h===x)return},k.prototype.replace=function(a,b){function c(a){var b,c,e,f;if(a.ref.remove())for(c=a.ref.key,f=a.ref.parent,b=d.length;b--;)if(e=d[b],e.ref&&e.ref.parent===f){if(e.ref.key<c)break;--e.ref.key}}var d,e,f,g,h,k,n,o,p,q,r,t,u;for(this.__initialize(a,b),r={},d=this.__worklist,e=this.__leavelist,t={root:a},k=new j(a,null,null,new i(t,"root")),d.push(k),e.push(k);d.length;)if(k=d.pop(),k!==r){if(h=this.__execute(b.enter,k),void 0!==h&&h!==x&&h!==y&&h!==z&&(k.ref.replace(h),k.node=h),(this.__state===z||h===z)&&(c(k),k.node=null),this.__state===x||h===x)return t.root;if((f=k.node)&&(d.push(r),e.push(k),this.__state!==y&&h!==y)){if(g=k.wrap||f.type,p=this.__keys[g],!p){if(!this.__fallback)throw new Error("Unknown node type "+g+".");p=w(f)}for(n=p.length;(n-=1)>=0;)if(u=p[n],q=f[u])if(s(q)){for(o=q.length;(o-=1)>=0;)if(q[o]){if(m(g,p[n]))k=new j(q[o],[u,o],"Property",new i(q,o));else{if(!l(q[o]))continue;k=new j(q[o],[u,o],null,new i(q,o))}d.push(k)}}else l(q)&&d.push(new j(q,u,null,new i(f,u)))}}else if(k=e.pop(),h=this.__execute(b.leave,k),void 0!==h&&h!==x&&h!==y&&h!==z&&k.ref.replace(h),(this.__state===z||h===z)&&c(k),this.__state===x||h===x)return t.root;return t.root},a.version="1.8.1-dev",a.Syntax=r,a.traverse=n,a.replace=o,a.attachComments=q,a.VisitorKeys=u,a.VisitorOption=t,a.Controller=k,a.cloneEnvironment=function(){return e({})},a})}),b("/tools/entry-point.js")}).call(this,this),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.acorn=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./tokentype"),e=a("./state"),f=a("./identifier"),g=a("./util"),h=e.Parser.prototype;h.checkPropClash=function(a,b){if(!(this.options.ecmaVersion>=6&&(a.computed||a.method||a.shorthand))){var c=a.key,d=void 0;switch(c.type){case"Identifier":d=c.name;break;case"Literal":d=String(c.value);break;default:return}var e=a.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===d&&"init"===e&&(b.proto&&this.raise(c.start,"Redefinition of __proto__ property"),b.proto=!0));var f=void 0;if(g.has(b,d)){f=b[d];var h="init"!==e;((this.strict||h)&&f[e]||!(h^f.init))&&this.raise(c.start,"Redefinition of property")}else f=b[d]={init:!1,get:!1,set:!1};f[e]=!0}},h.parseExpression=function(a,b){var c=this.start,e=this.startLoc,f=this.parseMaybeAssign(a,b);if(this.type===d.types.comma){var g=this.startNodeAt(c,e);for(g.expressions=[f];this.eat(d.types.comma);)g.expressions.push(this.parseMaybeAssign(a,b));return this.finishNode(g,"SequenceExpression")}return f},h.parseMaybeAssign=function(a,b,c){if(this.type==d.types._yield&&this.inGenerator)return this.parseYield();var e=void 0;b?e=!1:(b={start:0},e=!0);var f=this.start,g=this.startLoc;(this.type==d.types.parenL||this.type==d.types.name)&&(this.potentialArrowAt=this.start);var h=this.parseMaybeConditional(a,b);if(c&&(h=c.call(this,h,f,g)),this.type.isAssign){var i=this.startNodeAt(f,g);return i.operator=this.value,i.left=this.type===d.types.eq?this.toAssignable(h):h,b.start=0,this.checkLVal(h),this.next(),i.right=this.parseMaybeAssign(a),this.finishNode(i,"AssignmentExpression")}return e&&b.start&&this.unexpected(b.start),h},h.parseMaybeConditional=function(a,b){var c=this.start,e=this.startLoc,f=this.parseExprOps(a,b);if(b&&b.start)return f;if(this.eat(d.types.question)){var g=this.startNodeAt(c,e);return g.test=f,g.consequent=this.parseMaybeAssign(),this.expect(d.types.colon),g.alternate=this.parseMaybeAssign(a),this.finishNode(g,"ConditionalExpression")}return f},h.parseExprOps=function(a,b){var c=this.start,d=this.startLoc,e=this.parseMaybeUnary(b);return b&&b.start?e:this.parseExprOp(e,c,d,-1,a)},h.parseExprOp=function(a,b,c,e,f){var g=this.type.binop;if(null!=g&&(!f||this.type!==d.types._in)&&g>e){var h=this.startNodeAt(b,c);h.left=a,h.operator=this.value;var i=this.type;this.next();var j=this.start,k=this.startLoc;return h.right=this.parseExprOp(this.parseMaybeUnary(),j,k,g,f),this.finishNode(h,i===d.types.logicalOR||i===d.types.logicalAND?"LogicalExpression":"BinaryExpression"),this.parseExprOp(h,b,c,e,f)}return a},h.parseMaybeUnary=function(a){if(this.type.prefix){var b=this.startNode(),c=this.type===d.types.incDec;return b.operator=this.value,b.prefix=!0,this.next(),b.argument=this.parseMaybeUnary(),a&&a.start&&this.unexpected(a.start),c?this.checkLVal(b.argument):this.strict&&"delete"===b.operator&&"Identifier"===b.argument.type&&this.raise(b.start,"Deleting local variable in strict mode"),this.finishNode(b,c?"UpdateExpression":"UnaryExpression")}var e=this.start,f=this.startLoc,g=this.parseExprSubscripts(a);if(a&&a.start)return g;for(;this.type.postfix&&!this.canInsertSemicolon();){var b=this.startNodeAt(e,f);b.operator=this.value,b.prefix=!1,b.argument=g,this.checkLVal(g),this.next(),g=this.finishNode(b,"UpdateExpression")}return g},h.parseExprSubscripts=function(a){var b=this.start,c=this.startLoc,d=this.parseExprAtom(a);return a&&a.start?d:this.parseSubscripts(d,b,c)},h.parseSubscripts=function(a,b,c,e){for(;;)if(this.eat(d.types.dot)){var f=this.startNodeAt(b,c);f.object=a,f.property=this.parseIdent(!0),f.computed=!1,a=this.finishNode(f,"MemberExpression")}else if(this.eat(d.types.bracketL)){var f=this.startNodeAt(b,c);f.object=a,f.property=this.parseExpression(),f.computed=!0,this.expect(d.types.bracketR),a=this.finishNode(f,"MemberExpression")}else if(!e&&this.eat(d.types.parenL)){var f=this.startNodeAt(b,c);f.callee=a,f.arguments=this.parseExprList(d.types.parenR,!1),a=this.finishNode(f,"CallExpression")}else{if(this.type!==d.types.backQuote)return a;var f=this.startNodeAt(b,c);f.tag=a,f.quasi=this.parseTemplate(),a=this.finishNode(f,"TaggedTemplateExpression")}},h.parseExprAtom=function(a){var b=void 0,c=this.potentialArrowAt==this.start;switch(this.type){case d.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case d.types._this:var e=this.type===d.types._this?"ThisExpression":"Super";return b=this.startNode(),this.next(),this.finishNode(b,e);case d.types._yield:this.inGenerator&&this.unexpected();case d.types.name:var f=this.start,g=this.startLoc,h=this.parseIdent(this.type!==d.types.name);return c&&!this.canInsertSemicolon()&&this.eat(d.types.arrow)?this.parseArrowExpression(this.startNodeAt(f,g),[h]):h;case d.types.regexp:var i=this.value;return b=this.parseLiteral(i.value),b.regex={pattern:i.pattern,flags:i.flags},b;case d.types.num:case d.types.string:return this.parseLiteral(this.value);case d.types._null:case d.types._true:case d.types._false:return b=this.startNode(),b.value=this.type===d.types._null?null:this.type===d.types._true,b.raw=this.type.keyword,this.next(),this.finishNode(b,"Literal");case d.types.parenL:return this.parseParenAndDistinguishExpression(c);case d.types.bracketL:return b=this.startNode(),this.next(),this.options.ecmaVersion>=7&&this.type===d.types._for?this.parseComprehension(b,!1):(b.elements=this.parseExprList(d.types.bracketR,!0,!0,a),this.finishNode(b,"ArrayExpression"));case d.types.braceL:return this.parseObj(!1,a);case d.types._function:return b=this.startNode(),this.next(),this.parseFunction(b,!1);case d.types._class:return this.parseClass(this.startNode(),!1);case d.types._new:return this.parseNew();case d.types.backQuote:return this.parseTemplate();default:this.unexpected()}},h.parseLiteral=function(a){var b=this.startNode();return b.value=a,b.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(b,"Literal")},h.parseParenExpression=function(){this.expect(d.types.parenL);var a=this.parseExpression();return this.expect(d.types.parenR),a},h.parseParenAndDistinguishExpression=function(a){var b=this.start,c=this.startLoc,e=void 0;if(this.options.ecmaVersion>=6){if(this.next(),this.options.ecmaVersion>=7&&this.type===d.types._for)return this.parseComprehension(this.startNodeAt(b,c),!0);for(var f=this.start,g=this.startLoc,h=[],i=!0,j={start:0},k=void 0,l=void 0;this.type!==d.types.parenR;){if(i?i=!1:this.expect(d.types.comma),this.type===d.types.ellipsis){k=this.start,h.push(this.parseParenItem(this.parseRest()));break}this.type!==d.types.parenL||l||(l=this.start),h.push(this.parseMaybeAssign(!1,j,this.parseParenItem))}var m=this.start,n=this.startLoc;if(this.expect(d.types.parenR),a&&!this.canInsertSemicolon()&&this.eat(d.types.arrow))return l&&this.unexpected(l),this.parseParenArrowList(b,c,h);h.length||this.unexpected(this.lastTokStart),k&&this.unexpected(k),j.start&&this.unexpected(j.start),h.length>1?(e=this.startNodeAt(f,g),e.expressions=h,this.finishNodeAt(e,"SequenceExpression",m,n)):e=h[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var o=this.startNodeAt(b,c);return o.expression=e,this.finishNode(o,"ParenthesizedExpression")}return e},h.parseParenItem=function(a){return a},h.parseParenArrowList=function(a,b,c){return this.parseArrowExpression(this.startNodeAt(a,b),c)};var i=[];h.parseNew=function(){var a=this.startNode(),b=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(d.types.dot))return a.meta=b,a.property=this.parseIdent(!0),"target"!==a.property.name&&this.raise(a.property.start,"The only valid meta property for new is new.target"),this.finishNode(a,"MetaProperty");var c=this.start,e=this.startLoc;return a.callee=this.parseSubscripts(this.parseExprAtom(),c,e,!0),this.eat(d.types.parenL)?a.arguments=this.parseExprList(d.types.parenR,!1):a.arguments=i,this.finishNode(a,"NewExpression")},h.parseTemplateElement=function(){var a=this.startNode();return a.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),a.tail=this.type===d.types.backQuote,this.finishNode(a,"TemplateElement")},h.parseTemplate=function(){var a=this.startNode();this.next(),a.expressions=[];var b=this.parseTemplateElement();for(a.quasis=[b];!b.tail;)this.expect(d.types.dollarBraceL),a.expressions.push(this.parseExpression()),this.expect(d.types.braceR),a.quasis.push(b=this.parseTemplateElement());return this.next(),this.finishNode(a,"TemplateLiteral")},h.parseObj=function(a,b){var c=this.startNode(),e=!0,f={};for(c.properties=[],this.next();!this.eat(d.types.braceR);){if(e)e=!1;else if(this.expect(d.types.comma),this.afterTrailingComma(d.types.braceR))break;var g=this.startNode(),h=void 0,i=void 0,j=void 0;this.options.ecmaVersion>=6&&(g.method=!1,g.shorthand=!1,(a||b)&&(i=this.start,j=this.startLoc),a||(h=this.eat(d.types.star))),this.parsePropertyName(g),this.parsePropertyValue(g,a,h,i,j,b),this.checkPropClash(g,f),c.properties.push(this.finishNode(g,"Property"))}return this.finishNode(c,a?"ObjectPattern":"ObjectExpression")},h.parsePropertyValue=function(a,b,c,e,g,h){if(this.eat(d.types.colon))a.value=b?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,h),a.kind="init";else if(this.options.ecmaVersion>=6&&this.type===d.types.parenL)b&&this.unexpected(),a.kind="init",a.method=!0,a.value=this.parseMethod(c);else if(this.options.ecmaVersion>=5&&!a.computed&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)&&this.type!=d.types.comma&&this.type!=d.types.braceR){(c||b)&&this.unexpected(),a.kind=a.key.name,this.parsePropertyName(a),a.value=this.parseMethod(!1);var i="get"===a.kind?0:1;if(a.value.params.length!==i){var j=a.value.start;"get"===a.kind?this.raise(j,"getter should have no params"):this.raise(j,"setter should have exactly one param")}}else this.options.ecmaVersion>=6&&!a.computed&&"Identifier"===a.key.type?(a.kind="init",b?((this.isKeyword(a.key.name)||this.strict&&(f.reservedWords.strictBind(a.key.name)||f.reservedWords.strict(a.key.name))||!this.options.allowReserved&&this.isReservedWord(a.key.name))&&this.raise(a.key.start,"Binding "+a.key.name),a.value=this.parseMaybeDefault(e,g,a.key)):this.type===d.types.eq&&h?(h.start||(h.start=this.start),a.value=this.parseMaybeDefault(e,g,a.key)):a.value=a.key,a.shorthand=!0):this.unexpected()},h.parsePropertyName=function(a){if(this.options.ecmaVersion>=6){if(this.eat(d.types.bracketL))return a.computed=!0,a.key=this.parseMaybeAssign(),this.expect(d.types.bracketR),a.key;a.computed=!1}return a.key=this.type===d.types.num||this.type===d.types.string?this.parseExprAtom():this.parseIdent(!0)},h.initFunction=function(a){a.id=null,this.options.ecmaVersion>=6&&(a.generator=!1,a.expression=!1)},h.parseMethod=function(a){var b=this.startNode();this.initFunction(b),this.expect(d.types.parenL),b.params=this.parseBindingList(d.types.parenR,!1,!1);return this.options.ecmaVersion>=6&&(b.generator=a),this.parseFunctionBody(b,!1),this.finishNode(b,"FunctionExpression")},h.parseArrowExpression=function(a,b){return this.initFunction(a),a.params=this.toAssignableList(b,!0),this.parseFunctionBody(a,!0),this.finishNode(a,"ArrowFunctionExpression")},h.parseFunctionBody=function(a,b){var c=b&&this.type!==d.types.braceL;if(c)a.body=this.parseMaybeAssign(),a.expression=!0;else{var e=this.inFunction,f=this.inGenerator,g=this.labels;this.inFunction=!0,this.inGenerator=a.generator,this.labels=[],a.body=this.parseBlock(!0),a.expression=!1,this.inFunction=e,this.inGenerator=f,this.labels=g}if(this.strict||!c&&a.body.body.length&&this.isUseStrict(a.body.body[0])){var h={},i=this.strict;this.strict=!0,a.id&&this.checkLVal(a.id,!0);for(var j=0;j<a.params.length;j++)this.checkLVal(a.params[j],!0,h);this.strict=i}},h.parseExprList=function(a,b,c,e){for(var f=[],g=!0;!this.eat(a);){if(g)g=!1;else if(this.expect(d.types.comma),b&&this.afterTrailingComma(a))break;var h=void 0;h=c&&this.type===d.types.comma?null:this.type===d.types.ellipsis?this.parseSpread(e):this.parseMaybeAssign(!1,e),f.push(h)}return f},h.parseIdent=function(a){var b=this.startNode();return a&&"never"==this.options.allowReserved&&(a=!1),this.type===d.types.name?(!a&&(!this.options.allowReserved&&this.isReservedWord(this.value)||this.strict&&f.reservedWords.strict(this.value)&&(this.options.ecmaVersion>=6||-1==this.input.slice(this.start,this.end).indexOf("\\")))&&this.raise(this.start,"The keyword '"+this.value+"' is reserved"),b.name=this.value):a&&this.type.keyword?b.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(b,"Identifier")},h.parseYield=function(){var a=this.startNode();return this.next(),this.type==d.types.semi||this.canInsertSemicolon()||this.type!=d.types.star&&!this.type.startsExpr?(a.delegate=!1,a.argument=null):(a.delegate=this.eat(d.types.star),a.argument=this.parseMaybeAssign()),this.finishNode(a,"YieldExpression")},h.parseComprehension=function(a,b){for(a.blocks=[];this.type===d.types._for;){var c=this.startNode();this.next(),this.expect(d.types.parenL),c.left=this.parseBindingAtom(),this.checkLVal(c.left,!0),this.expectContextual("of"),c.right=this.parseExpression(),this.expect(d.types.parenR),a.blocks.push(this.finishNode(c,"ComprehensionBlock"))}return a.filter=this.eat(d.types._if)?this.parseParenExpression():null,a.body=this.parseExpression(),this.expect(b?d.types.parenR:d.types.bracketR),a.generator=b,this.finishNode(a,"ComprehensionExpression")}},{"./identifier":2,"./state":10,"./tokentype":14,"./util":15}],2:[function(a,b,c){"use strict";function d(a){function b(a){if(1==a.length)return c+="return str === "+JSON.stringify(a[0])+";";c+="switch(str){";for(var b=0;b<a.length;++b)c+="case "+JSON.stringify(a[b])+":";c+="return true}return false;"}a=a.split(" ");var c="",d=[];a:for(var e=0;e<a.length;++e){for(var f=0;f<d.length;++f)if(d[f][0].length==a[e].length){d[f].push(a[e]);continue a}d.push([a[e]])}if(d.length>3){d.sort(function(a,b){return b.length-a.length}),c+="switch(str.length){";for(var e=0;e<d.length;++e){var g=d[e];c+="case "+g[0].length+":",b(g)}c+="}"}else b(a);return new Function("str",c)}function e(a,b){for(var c=65536,d=0;d<b.length;d+=2){if(c+=b[d],c>a)return!1;if(c+=b[d+1],c>=a)return!0}}function f(a,b){return 65>a?36===a:91>a?!0:97>a?95===a:123>a?!0:65535>=a?a>=170&&m.test(String.fromCharCode(a)):b===!1?!1:e(a,o)}function g(a,b){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:65535>=a?a>=170&&n.test(String.fromCharCode(a)):b===!1?!1:e(a,o)||e(a,p)}c.__esModule=!0,c.isIdentifierStart=f,c.isIdentifierChar=g;var h={3:d("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),5:d("class enum extends super const export import"),6:d("enum await"),strict:d("implements interface let package private protected public static yield"),strictBind:d("eval arguments")};c.reservedWords=h;var i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",j={5:d(i),6:d(i+" let const class extends export import yield super")};c.keywords=j;var k="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",l="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏ᦰ-ᧀᧈᧉ᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︭︳︴﹍-﹏０-９＿",m=new RegExp("["+k+"]"),n=new RegExp("["+k+l+"]");k=l=null;var o=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,99,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,98,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,955,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,38,17,2,24,133,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,32,4,287,47,21,1,2,0,185,46,82,47,21,0,60,42,502,63,32,0,449,56,1288,920,104,110,2962,1070,13266,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,16481,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,1340,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,16355,541],p=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,16,9,83,11,168,11,6,9,8,2,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,316,19,13,9,214,6,3,8,112,16,16,9,82,12,9,9,535,9,20855,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,4305,6,792618,239]},{}],3:[function(a,b,c){"use strict";function d(a,b){return new g.Parser(b,a).parse()}function e(a,b,c){var d=new g.Parser(c,a,b);return d.nextToken(),d.parseExpression()}function f(a,b){return new g.Parser(b,a)}c.__esModule=!0,c.parse=d,c.parseExpressionAt=e,c.tokenizer=f;var g=a("./state"),h=a("./options");a("./parseutil"),a("./statement"),a("./lval"),a("./expression"),a("./location"),c.Parser=g.Parser,c.plugins=g.plugins,c.defaultOptions=h.defaultOptions;var i=a("./locutil");c.Position=i.Position,c.SourceLocation=i.SourceLocation,c.getLineInfo=i.getLineInfo;var j=a("./node");c.Node=j.Node;var k=a("./tokentype");c.TokenType=k.TokenType,c.tokTypes=k.types;var l=a("./tokencontext");c.TokContext=l.TokContext,c.tokContexts=l.types;var m=a("./identifier");c.isIdentifierChar=m.isIdentifierChar,c.isIdentifierStart=m.isIdentifierStart;var n=a("./tokenize");c.Token=n.Token;var o=a("./whitespace");c.isNewLine=o.isNewLine,c.lineBreak=o.lineBreak,c.lineBreakG=o.lineBreakG;var p="2.4.0";c.version=p},{"./expression":1,"./identifier":2,"./location":4,"./locutil":5,"./lval":6,"./node":7,"./options":8,"./parseutil":9,"./state":10,"./statement":11,"./tokencontext":12,"./tokenize":13,"./tokentype":14,"./whitespace":16}],4:[function(a,b,c){"use strict";var d=a("./state"),e=a("./locutil"),f=d.Parser.prototype;f.raise=function(a,b){var c=e.getLineInfo(this.input,a);b+=" ("+c.line+":"+c.column+")";var d=new SyntaxError(b);throw d.pos=a,d.loc=c,d.raisedAt=this.pos,d},f.curPosition=function(){return this.options.locations?new e.Position(this.curLine,this.pos-this.lineStart):void 0}},{"./locutil":5,"./state":10}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){for(var c=1,d=0;;){f.lineBreakG.lastIndex=d;var e=f.lineBreakG.exec(a);if(!(e&&e.index<b))return new g(c,b-d);++c,d=e.index+e[0].length}}c.__esModule=!0,c.getLineInfo=e;var f=a("./whitespace"),g=function(){function a(b,c){d(this,a),this.line=b,this.column=c}return a.prototype.offset=function(b){return new a(this.line,this.column+b)},a}();c.Position=g;var h=function i(a,b,c){d(this,i),this.start=b,this.end=c,null!==a.sourceFile&&(this.source=a.sourceFile)};c.SourceLocation=h},{"./whitespace":16}],6:[function(a,b,c){"use strict";var d=a("./tokentype"),e=a("./state"),f=a("./identifier"),g=a("./util"),h=e.Parser.prototype;h.toAssignable=function(a,b){if(this.options.ecmaVersion>=6&&a)switch(a.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":break;case"ObjectExpression":a.type="ObjectPattern";for(var c=0;c<a.properties.length;c++){var d=a.properties[c];"init"!==d.kind&&this.raise(d.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(d.value,b)}break;case"ArrayExpression":a.type="ArrayPattern",this.toAssignableList(a.elements,b);break;case"AssignmentExpression":"="===a.operator?(a.type="AssignmentPattern",delete a.operator):this.raise(a.left.end,"Only '=' operator can be used for specifying default value.");break;case"ParenthesizedExpression":a.expression=this.toAssignable(a.expression,b);break;case"MemberExpression":if(!b)break;default:this.raise(a.start,"Assigning to rvalue")}return a},h.toAssignableList=function(a,b){var c=a.length;if(c){var d=a[c-1];if(d&&"RestElement"==d.type)--c;else if(d&&"SpreadElement"==d.type){d.type="RestElement";var e=d.argument;this.toAssignable(e,b),"Identifier"!==e.type&&"MemberExpression"!==e.type&&"ArrayPattern"!==e.type&&this.unexpected(e.start),--c}}for(var f=0;c>f;f++){var g=a[f];g&&this.toAssignable(g,b)}return a},h.parseSpread=function(a){var b=this.startNode();return this.next(),b.argument=this.parseMaybeAssign(a),this.finishNode(b,"SpreadElement")},h.parseRest=function(){var a=this.startNode();return this.next(),a.argument=this.type===d.types.name||this.type===d.types.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(a,"RestElement")},h.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case d.types.name:return this.parseIdent();case d.types.bracketL:var a=this.startNode();return this.next(),a.elements=this.parseBindingList(d.types.bracketR,!0,!0),this.finishNode(a,"ArrayPattern");case d.types.braceL:return this.parseObj(!0);default:this.unexpected()}},h.parseBindingList=function(a,b,c){for(var e=[],f=!0;!this.eat(a);)if(f?f=!1:this.expect(d.types.comma),b&&this.type===d.types.comma)e.push(null);else{if(c&&this.afterTrailingComma(a))break;if(this.type===d.types.ellipsis){var g=this.parseRest();this.parseBindingListItem(g),e.push(g),this.expect(a);break}var h=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(h),e.push(h)}return e},h.parseBindingListItem=function(a){return a},h.parseMaybeDefault=function(a,b,c){if(c=c||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(d.types.eq))return c;var e=this.startNodeAt(a,b);return e.left=c,e.right=this.parseMaybeAssign(),this.finishNode(e,"AssignmentPattern")},h.checkLVal=function(a,b,c){switch(a.type){case"Identifier":this.strict&&(f.reservedWords.strictBind(a.name)||f.reservedWords.strict(a.name))&&this.raise(a.start,(b?"Binding ":"Assigning to ")+a.name+" in strict mode"),c&&(g.has(c,a.name)&&this.raise(a.start,"Argument name clash in strict mode"),c[a.name]=!0);break;case"MemberExpression":b&&this.raise(a.start,(b?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var d=0;d<a.properties.length;d++)this.checkLVal(a.properties[d].value,b,c);break;case"ArrayPattern":for(var d=0;d<a.elements.length;d++){var e=a.elements[d];e&&this.checkLVal(e,b,c)}break;case"AssignmentPattern":this.checkLVal(a.left,b,c);break;case"RestElement":this.checkLVal(a.argument,b,c);break;case"ParenthesizedExpression":
this.checkLVal(a.expression,b,c);break;default:this.raise(a.start,(b?"Binding":"Assigning to")+" rvalue")}}},{"./identifier":2,"./state":10,"./tokentype":14,"./util":15}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d){return a.type=b,a.end=c,this.options.locations&&(a.loc.end=d),this.options.ranges&&(a.range[1]=c),a}c.__esModule=!0;var f=a("./state"),g=a("./locutil"),h=function j(a,b,c){d(this,j),this.type="",this.start=b,this.end=0,a.options.locations&&(this.loc=new g.SourceLocation(a,c)),a.options.directSourceFile&&(this.sourceFile=a.options.directSourceFile),a.options.ranges&&(this.range=[b,0])};c.Node=h;var i=f.Parser.prototype;i.startNode=function(){return new h(this,this.start,this.startLoc)},i.startNodeAt=function(a,b){return new h(this,a,b)},i.finishNode=function(a,b){return e.call(this,a,b,this.lastTokEnd,this.lastTokEndLoc)},i.finishNodeAt=function(a,b,c,d){return e.call(this,a,b,c,d)}},{"./locutil":5,"./state":10}],8:[function(a,b,c){"use strict";function d(a){var b={};for(var c in h)b[c]=a&&f.has(a,c)?a[c]:h[c];return f.isArray(b.onToken)&&!function(){var a=b.onToken;b.onToken=function(b){return a.push(b)}}(),f.isArray(b.onComment)&&(b.onComment=e(b,b.onComment)),b}function e(a,b){return function(c,d,e,f,h,i){var j={type:c?"Block":"Line",value:d,start:e,end:f};a.locations&&(j.loc=new g.SourceLocation(this,h,i)),a.ranges&&(j.range=[e,f]),b.push(j)}}c.__esModule=!0,c.getOptions=d;var f=a("./util"),g=a("./locutil"),h={ecmaVersion:5,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:!0,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};c.defaultOptions=h},{"./locutil":5,"./util":15}],9:[function(a,b,c){"use strict";var d=a("./tokentype"),e=a("./state"),f=a("./whitespace"),g=e.Parser.prototype;g.isUseStrict=function(a){return this.options.ecmaVersion>=5&&"ExpressionStatement"===a.type&&"Literal"===a.expression.type&&"use strict"===a.expression.raw.slice(1,-1)},g.eat=function(a){return this.type===a?(this.next(),!0):!1},g.isContextual=function(a){return this.type===d.types.name&&this.value===a},g.eatContextual=function(a){return this.value===a&&this.eat(d.types.name)},g.expectContextual=function(a){this.eatContextual(a)||this.unexpected()},g.canInsertSemicolon=function(){return this.type===d.types.eof||this.type===d.types.braceR||f.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},g.insertSemicolon=function(){return this.canInsertSemicolon()?(this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0):void 0},g.semicolon=function(){this.eat(d.types.semi)||this.insertSemicolon()||this.unexpected()},g.afterTrailingComma=function(a){return this.type==a?(this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),this.next(),!0):void 0},g.expect=function(a){this.eat(a)||this.unexpected()},g.unexpected=function(a){this.raise(null!=a?a:this.start,"Unexpected token")}},{"./state":10,"./tokentype":14,"./whitespace":16}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("./identifier"),f=a("./tokentype"),g=a("./whitespace"),h=a("./options"),i={};c.plugins=i;var j=function(){function a(b,c,i){d(this,a),this.options=h.getOptions(b),this.sourceFile=this.options.sourceFile,this.isKeyword=e.keywords[this.options.ecmaVersion>=6?6:5],this.isReservedWord=e.reservedWords[this.options.ecmaVersion],this.input=String(c),this.containsEsc=!1,this.loadPlugins(this.options.plugins),i?(this.pos=i,this.lineStart=Math.max(0,this.input.lastIndexOf("\n",i)),this.curLine=this.input.slice(0,this.lineStart).split(g.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=f.types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.strict=this.inModule="module"===this.options.sourceType,this.potentialArrowAt=-1,this.inFunction=this.inGenerator=!1,this.labels=[],0===this.pos&&this.options.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)}return a.prototype.extend=function(a,b){this[a]=b(this[a])},a.prototype.loadPlugins=function(a){for(var b in a){var c=i[b];if(!c)throw new Error("Plugin '"+b+"' not found");c(this,a[b])}},a.prototype.parse=function(){var a=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(a)},a}();c.Parser=j},{"./identifier":2,"./options":8,"./tokentype":14,"./whitespace":16}],11:[function(a,b,c){"use strict";var d=a("./tokentype"),e=a("./state"),f=a("./whitespace"),g=e.Parser.prototype;g.parseTopLevel=function(a){var b=!0;for(a.body||(a.body=[]);this.type!==d.types.eof;){var c=this.parseStatement(!0,!0);a.body.push(c),b&&(this.isUseStrict(c)&&this.setStrict(!0),b=!1)}return this.next(),this.options.ecmaVersion>=6&&(a.sourceType=this.options.sourceType),this.finishNode(a,"Program")};var h={kind:"loop"},i={kind:"switch"};g.parseStatement=function(a,b){var c=this.type,e=this.startNode();switch(c){case d.types._break:case d.types._continue:return this.parseBreakContinueStatement(e,c.keyword);case d.types._debugger:return this.parseDebuggerStatement(e);case d.types._do:return this.parseDoStatement(e);case d.types._for:return this.parseForStatement(e);case d.types._function:return!a&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(e);case d.types._class:return a||this.unexpected(),this.parseClass(e,!0);case d.types._if:return this.parseIfStatement(e);case d.types._return:return this.parseReturnStatement(e);case d.types._switch:return this.parseSwitchStatement(e);case d.types._throw:return this.parseThrowStatement(e);case d.types._try:return this.parseTryStatement(e);case d.types._let:case d.types._const:a||this.unexpected();case d.types._var:return this.parseVarStatement(e,c);case d.types._while:return this.parseWhileStatement(e);case d.types._with:return this.parseWithStatement(e);case d.types.braceL:return this.parseBlock();case d.types.semi:return this.parseEmptyStatement(e);case d.types._export:case d.types._import:return this.options.allowImportExportEverywhere||(b||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),c===d.types._import?this.parseImport(e):this.parseExport(e);default:var f=this.value,g=this.parseExpression();return c===d.types.name&&"Identifier"===g.type&&this.eat(d.types.colon)?this.parseLabeledStatement(e,f,g):this.parseExpressionStatement(e,g)}},g.parseBreakContinueStatement=function(a,b){var c="break"==b;this.next(),this.eat(d.types.semi)||this.insertSemicolon()?a.label=null:this.type!==d.types.name?this.unexpected():(a.label=this.parseIdent(),this.semicolon());for(var e=0;e<this.labels.length;++e){var f=this.labels[e];if(null==a.label||f.name===a.label.name){if(null!=f.kind&&(c||"loop"===f.kind))break;if(a.label&&c)break}}return e===this.labels.length&&this.raise(a.start,"Unsyntactic "+b),this.finishNode(a,c?"BreakStatement":"ContinueStatement")},g.parseDebuggerStatement=function(a){return this.next(),this.semicolon(),this.finishNode(a,"DebuggerStatement")},g.parseDoStatement=function(a){return this.next(),this.labels.push(h),a.body=this.parseStatement(!1),this.labels.pop(),this.expect(d.types._while),a.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(d.types.semi):this.semicolon(),this.finishNode(a,"DoWhileStatement")},g.parseForStatement=function(a){if(this.next(),this.labels.push(h),this.expect(d.types.parenL),this.type===d.types.semi)return this.parseFor(a,null);if(this.type===d.types._var||this.type===d.types._let||this.type===d.types._const){var b=this.startNode(),c=this.type;return this.next(),this.parseVar(b,!0,c),this.finishNode(b,"VariableDeclaration"),!(this.type===d.types._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==b.declarations.length||c!==d.types._var&&b.declarations[0].init?this.parseFor(a,b):this.parseForIn(a,b)}var e={start:0},f=this.parseExpression(!0,e);return this.type===d.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.toAssignable(f),this.checkLVal(f),this.parseForIn(a,f)):(e.start&&this.unexpected(e.start),this.parseFor(a,f))},g.parseFunctionStatement=function(a){return this.next(),this.parseFunction(a,!0)},g.parseIfStatement=function(a){return this.next(),a.test=this.parseParenExpression(),a.consequent=this.parseStatement(!1),a.alternate=this.eat(d.types._else)?this.parseStatement(!1):null,this.finishNode(a,"IfStatement")},g.parseReturnStatement=function(a){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(d.types.semi)||this.insertSemicolon()?a.argument=null:(a.argument=this.parseExpression(),this.semicolon()),this.finishNode(a,"ReturnStatement")},g.parseSwitchStatement=function(a){this.next(),a.discriminant=this.parseParenExpression(),a.cases=[],this.expect(d.types.braceL),this.labels.push(i);for(var b,c=!1;this.type!=d.types.braceR;)if(this.type===d.types._case||this.type===d.types._default){var e=this.type===d.types._case;b&&this.finishNode(b,"SwitchCase"),a.cases.push(b=this.startNode()),b.consequent=[],this.next(),e?b.test=this.parseExpression():(c&&this.raise(this.lastTokStart,"Multiple default clauses"),c=!0,b.test=null),this.expect(d.types.colon)}else b||this.unexpected(),b.consequent.push(this.parseStatement(!0));return b&&this.finishNode(b,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(a,"SwitchStatement")},g.parseThrowStatement=function(a){return this.next(),f.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),a.argument=this.parseExpression(),this.semicolon(),this.finishNode(a,"ThrowStatement")};var j=[];g.parseTryStatement=function(a){if(this.next(),a.block=this.parseBlock(),a.handler=null,this.type===d.types._catch){var b=this.startNode();this.next(),this.expect(d.types.parenL),b.param=this.parseBindingAtom(),this.checkLVal(b.param,!0),this.expect(d.types.parenR),b.guard=null,b.body=this.parseBlock(),a.handler=this.finishNode(b,"CatchClause")}return a.guardedHandlers=j,a.finalizer=this.eat(d.types._finally)?this.parseBlock():null,a.handler||a.finalizer||this.raise(a.start,"Missing catch or finally clause"),this.finishNode(a,"TryStatement")},g.parseVarStatement=function(a,b){return this.next(),this.parseVar(a,!1,b),this.semicolon(),this.finishNode(a,"VariableDeclaration")},g.parseWhileStatement=function(a){return this.next(),a.test=this.parseParenExpression(),this.labels.push(h),a.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(a,"WhileStatement")},g.parseWithStatement=function(a){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),a.object=this.parseParenExpression(),a.body=this.parseStatement(!1),this.finishNode(a,"WithStatement")},g.parseEmptyStatement=function(a){return this.next(),this.finishNode(a,"EmptyStatement")},g.parseLabeledStatement=function(a,b,c){for(var e=0;e<this.labels.length;++e)this.labels[e].name===b&&this.raise(c.start,"Label '"+b+"' is already declared");for(var f=this.type.isLoop?"loop":this.type===d.types._switch?"switch":null,e=this.labels.length-1;e>=0;e--){var g=this.labels[e];if(g.statementStart!=a.start)break;g.statementStart=this.start,g.kind=f}return this.labels.push({name:b,kind:f,statementStart:this.start}),a.body=this.parseStatement(!0),this.labels.pop(),a.label=c,this.finishNode(a,"LabeledStatement")},g.parseExpressionStatement=function(a,b){return a.expression=b,this.semicolon(),this.finishNode(a,"ExpressionStatement")},g.parseBlock=function(a){var b=this.startNode(),c=!0,e=void 0;for(b.body=[],this.expect(d.types.braceL);!this.eat(d.types.braceR);){var f=this.parseStatement(!0);b.body.push(f),c&&a&&this.isUseStrict(f)&&(e=this.strict,this.setStrict(this.strict=!0)),c=!1}return e===!1&&this.setStrict(!1),this.finishNode(b,"BlockStatement")},g.parseFor=function(a,b){return a.init=b,this.expect(d.types.semi),a.test=this.type===d.types.semi?null:this.parseExpression(),this.expect(d.types.semi),a.update=this.type===d.types.parenR?null:this.parseExpression(),this.expect(d.types.parenR),a.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(a,"ForStatement")},g.parseForIn=function(a,b){var c=this.type===d.types._in?"ForInStatement":"ForOfStatement";return this.next(),a.left=b,a.right=this.parseExpression(),this.expect(d.types.parenR),a.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(a,c)},g.parseVar=function(a,b,c){for(a.declarations=[],a.kind=c.keyword;;){var e=this.startNode();if(this.parseVarId(e),this.eat(d.types.eq)?e.init=this.parseMaybeAssign(b):c!==d.types._const||this.type===d.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"==e.id.type||b&&(this.type===d.types._in||this.isContextual("of"))?e.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),a.declarations.push(this.finishNode(e,"VariableDeclarator")),!this.eat(d.types.comma))break}return a},g.parseVarId=function(a){a.id=this.parseBindingAtom(),this.checkLVal(a.id,!0)},g.parseFunction=function(a,b,c){return this.initFunction(a),this.options.ecmaVersion>=6&&(a.generator=this.eat(d.types.star)),(b||this.type===d.types.name)&&(a.id=this.parseIdent()),this.parseFunctionParams(a),this.parseFunctionBody(a,c),this.finishNode(a,b?"FunctionDeclaration":"FunctionExpression")},g.parseFunctionParams=function(a){this.expect(d.types.parenL),a.params=this.parseBindingList(d.types.parenR,!1,!1)},g.parseClass=function(a,b){this.next(),this.parseClassId(a,b),this.parseClassSuper(a);var c=this.startNode(),e=!1;for(c.body=[],this.expect(d.types.braceL);!this.eat(d.types.braceR);)if(!this.eat(d.types.semi)){var f=this.startNode(),g=this.eat(d.types.star),h=this.type===d.types.name&&"static"===this.value;this.parsePropertyName(f),f["static"]=h&&this.type!==d.types.parenL,f["static"]&&(g&&this.unexpected(),g=this.eat(d.types.star),this.parsePropertyName(f)),f.kind="method";var i=!1;if(!f.computed){var j=f.key;g||"Identifier"!==j.type||this.type===d.types.parenL||"get"!==j.name&&"set"!==j.name||(i=!0,f.kind=j.name,j=this.parsePropertyName(f)),!f["static"]&&("Identifier"===j.type&&"constructor"===j.name||"Literal"===j.type&&"constructor"===j.value)&&(e&&this.raise(j.start,"Duplicate constructor in the same class"),i&&this.raise(j.start,"Constructor can't have get/set modifier"),g&&this.raise(j.start,"Constructor can't be a generator"),f.kind="constructor",e=!0)}if(this.parseClassMethod(c,f,g),i){var k="get"===f.kind?0:1;if(f.value.params.length!==k){var l=f.value.start;"get"===f.kind?this.raise(l,"getter should have no params"):this.raise(l,"setter should have exactly one param")}}}return a.body=this.finishNode(c,"ClassBody"),this.finishNode(a,b?"ClassDeclaration":"ClassExpression")},g.parseClassMethod=function(a,b,c){b.value=this.parseMethod(c),a.body.push(this.finishNode(b,"MethodDefinition"))},g.parseClassId=function(a,b){a.id=this.type===d.types.name?this.parseIdent():b?this.unexpected():null},g.parseClassSuper=function(a){a.superClass=this.eat(d.types._extends)?this.parseExprSubscripts():null},g.parseExport=function(a){if(this.next(),this.eat(d.types.star))return this.expectContextual("from"),a.source=this.type===d.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(a,"ExportAllDeclaration");if(this.eat(d.types._default)){var b=this.parseMaybeAssign(),c=!0;return("FunctionExpression"==b.type||"ClassExpression"==b.type)&&(c=!1,b.id&&(b.type="FunctionExpression"==b.type?"FunctionDeclaration":"ClassDeclaration")),a.declaration=b,c&&this.semicolon(),this.finishNode(a,"ExportDefaultDeclaration")}return this.shouldParseExportStatement()?(a.declaration=this.parseStatement(!0),a.specifiers=[],a.source=null):(a.declaration=null,a.specifiers=this.parseExportSpecifiers(),this.eatContextual("from")?a.source=this.type===d.types.string?this.parseExprAtom():this.unexpected():a.source=null,this.semicolon()),this.finishNode(a,"ExportNamedDeclaration")},g.shouldParseExportStatement=function(){return this.type.keyword},g.parseExportSpecifiers=function(){var a=[],b=!0;for(this.expect(d.types.braceL);!this.eat(d.types.braceR);){if(b)b=!1;else if(this.expect(d.types.comma),this.afterTrailingComma(d.types.braceR))break;var c=this.startNode();c.local=this.parseIdent(this.type===d.types._default),c.exported=this.eatContextual("as")?this.parseIdent(!0):c.local,a.push(this.finishNode(c,"ExportSpecifier"))}return a},g.parseImport=function(a){return this.next(),this.type===d.types.string?(a.specifiers=j,a.source=this.parseExprAtom()):(a.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),a.source=this.type===d.types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(a,"ImportDeclaration")},g.parseImportSpecifiers=function(){var a=[],b=!0;if(this.type===d.types.name){var c=this.startNode();if(c.local=this.parseIdent(),this.checkLVal(c.local,!0),a.push(this.finishNode(c,"ImportDefaultSpecifier")),!this.eat(d.types.comma))return a}if(this.type===d.types.star){var c=this.startNode();return this.next(),this.expectContextual("as"),c.local=this.parseIdent(),this.checkLVal(c.local,!0),a.push(this.finishNode(c,"ImportNamespaceSpecifier")),a}for(this.expect(d.types.braceL);!this.eat(d.types.braceR);){if(b)b=!1;else if(this.expect(d.types.comma),this.afterTrailingComma(d.types.braceR))break;var c=this.startNode();c.imported=this.parseIdent(!0),c.local=this.eatContextual("as")?this.parseIdent():c.imported,this.checkLVal(c.local,!0),a.push(this.finishNode(c,"ImportSpecifier"))}return a}},{"./state":10,"./tokentype":14,"./whitespace":16}],12:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("./state"),f=a("./tokentype"),g=a("./whitespace"),h=function k(a,b,c,e){d(this,k),this.token=a,this.isExpr=!!b,this.preserveSpace=!!c,this.override=e};c.TokContext=h;var i={b_stat:new h("{",!1),b_expr:new h("{",!0),b_tmpl:new h("${",!0),p_stat:new h("(",!1),p_expr:new h("(",!0),q_tmpl:new h("`",!0,!0,function(a){return a.readTmplToken()}),f_expr:new h("function",!0)};c.types=i;var j=e.Parser.prototype;j.initialContext=function(){return[i.b_stat]},j.braceIsBlock=function(a){if(a===f.types.colon){var b=this.curContext();if(b===i.b_stat||b===i.b_expr)return!b.isExpr}return a===f.types._return?g.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):a===f.types._else||a===f.types.semi||a===f.types.eof||a===f.types.parenR?!0:a==f.types.braceL?this.curContext()===i.b_stat:!this.exprAllowed},j.updateContext=function(a){var b=void 0,c=this.type;c.keyword&&a==f.types.dot?this.exprAllowed=!1:(b=c.updateContext)?b.call(this,a):this.exprAllowed=c.beforeExpr},f.types.parenR.updateContext=f.types.braceR.updateContext=function(){if(1==this.context.length)return void(this.exprAllowed=!0);var a=this.context.pop();a===i.b_stat&&this.curContext()===i.f_expr?(this.context.pop(),this.exprAllowed=!1):a===i.b_tmpl?this.exprAllowed=!0:this.exprAllowed=!a.isExpr},f.types.braceL.updateContext=function(a){this.context.push(this.braceIsBlock(a)?i.b_stat:i.b_expr),this.exprAllowed=!0},f.types.dollarBraceL.updateContext=function(){this.context.push(i.b_tmpl),this.exprAllowed=!0},f.types.parenL.updateContext=function(a){var b=a===f.types._if||a===f.types._for||a===f.types._with||a===f.types._while;this.context.push(b?i.p_stat:i.p_expr),this.exprAllowed=!0},f.types.incDec.updateContext=function(){},f.types._function.updateContext=function(){this.curContext()!==i.b_stat&&this.context.push(i.f_expr),this.exprAllowed=!1},f.types.backQuote.updateContext=function(){this.curContext()===i.q_tmpl?this.context.pop():this.context.push(i.q_tmpl),this.exprAllowed=!1}},{"./state":10,"./tokentype":14,"./whitespace":16}],13:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c){try{return new RegExp(a,b)}catch(d){void 0!==c&&(d instanceof SyntaxError&&this.raise(c,"Error parsing regular expression: "+d.message),this.raise(d))}}function f(a){return 65535>=a?String.fromCharCode(a):(a-=65536,String.fromCharCode((a>>10)+55296,(1023&a)+56320))}c.__esModule=!0;var g=a("./identifier"),h=a("./tokentype"),i=a("./state"),j=a("./locutil"),k=a("./whitespace"),l=function p(a){d(this,p),this.type=a.type,this.value=a.value,this.start=a.start,this.end=a.end,a.options.locations&&(this.loc=new j.SourceLocation(a,a.startLoc,a.endLoc)),a.options.ranges&&(this.range=[a.start,a.end])};c.Token=l;var m=i.Parser.prototype,n="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);m.next=function(){this.options.onToken&&this.options.onToken(new l(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},m.getToken=function(){return this.next(),new l(this)},"undefined"!=typeof Symbol&&(m[Symbol.iterator]=function(){var a=this;return{next:function(){var b=a.getToken();return{done:b.type===h.types.eof,value:b}}}}),m.setStrict=function(a){if(this.strict=a,this.type===h.types.num||this.type===h.types.string){if(this.pos=this.start,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}},m.curContext=function(){return this.context[this.context.length-1]},m.nextToken=function(){var a=this.curContext();return a&&a.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(h.types.eof):a.override?a.override(this):void this.readToken(this.fullCharCodeAtPos())},m.readToken=function(a){return g.isIdentifierStart(a,this.options.ecmaVersion>=6)||92===a?this.readWord():this.getTokenFromCode(a)},m.fullCharCodeAtPos=function(){var a=this.input.charCodeAt(this.pos);if(55295>=a||a>=57344)return a;var b=this.input.charCodeAt(this.pos+1);return(a<<10)+b-56613888},m.skipBlockComment=function(){var a=this.options.onComment&&this.curPosition(),b=this.pos,c=this.input.indexOf("*/",this.pos+=2);if(-1===c&&this.raise(this.pos-2,"Unterminated comment"),this.pos=c+2,this.options.locations){k.lineBreakG.lastIndex=b;for(var d=void 0;(d=k.lineBreakG.exec(this.input))&&d.index<this.pos;)++this.curLine,this.lineStart=d.index+d[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(b+2,c),b,this.pos,a,this.curPosition())},m.skipLineComment=function(a){for(var b=this.pos,c=this.options.onComment&&this.curPosition(),d=this.input.charCodeAt(this.pos+=a);this.pos<this.input.length&&10!==d&&13!==d&&8232!==d&&8233!==d;)++this.pos,d=this.input.charCodeAt(this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(b+a,this.pos),b,this.pos,c,this.curPosition())},m.skipSpace=function(){a:for(;this.pos<this.input.length;){var a=this.input.charCodeAt(this.pos);switch(a){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(!(a>8&&14>a||a>=5760&&k.nonASCIIwhitespace.test(String.fromCharCode(a))))break a;++this.pos}}},m.finishToken=function(a,b){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var c=this.type;this.type=a,this.value=b,this.updateContext(c)},m.readToken_dot=function(){var a=this.input.charCodeAt(this.pos+1);if(a>=48&&57>=a)return this.readNumber(!0);var b=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===a&&46===b?(this.pos+=3,this.finishToken(h.types.ellipsis)):(++this.pos,this.finishToken(h.types.dot))},m.readToken_slash=function(){var a=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===a?this.finishOp(h.types.assign,2):this.finishOp(h.types.slash,1)},m.readToken_mult_modulo=function(a){var b=this.input.charCodeAt(this.pos+1);return 61===b?this.finishOp(h.types.assign,2):this.finishOp(42===a?h.types.star:h.types.modulo,1)},m.readToken_pipe_amp=function(a){var b=this.input.charCodeAt(this.pos+1);return b===a?this.finishOp(124===a?h.types.logicalOR:h.types.logicalAND,2):61===b?this.finishOp(h.types.assign,2):this.finishOp(124===a?h.types.bitwiseOR:h.types.bitwiseAND,1)},m.readToken_caret=function(){var a=this.input.charCodeAt(this.pos+1);return 61===a?this.finishOp(h.types.assign,2):this.finishOp(h.types.bitwiseXOR,1)},m.readToken_plus_min=function(a){var b=this.input.charCodeAt(this.pos+1);return b===a?45==b&&62==this.input.charCodeAt(this.pos+2)&&k.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(h.types.incDec,2):61===b?this.finishOp(h.types.assign,2):this.finishOp(h.types.plusMin,1)},m.readToken_lt_gt=function(a){var b=this.input.charCodeAt(this.pos+1),c=1;return b===a?(c=62===a&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+c)?this.finishOp(h.types.assign,c+1):this.finishOp(h.types.bitShift,c)):33==b&&60==a&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&this.unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):(61===b&&(c=61===this.input.charCodeAt(this.pos+2)?3:2),this.finishOp(h.types.relational,c))},m.readToken_eq_excl=function(a){var b=this.input.charCodeAt(this.pos+1);return 61===b?this.finishOp(h.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===a&&62===b&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(h.types.arrow)):this.finishOp(61===a?h.types.eq:h.types.prefix,1)},m.getTokenFromCode=function(a){switch(a){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(h.types.parenL);case 41:return++this.pos,this.finishToken(h.types.parenR);case 59:return++this.pos,this.finishToken(h.types.semi);case 44:return++this.pos,this.finishToken(h.types.comma);case 91:return++this.pos,this.finishToken(h.types.bracketL);case 93:return++this.pos,this.finishToken(h.types.bracketR);case 123:return++this.pos,this.finishToken(h.types.braceL);case 125:return++this.pos,this.finishToken(h.types.braceR);case 58:return++this.pos,this.finishToken(h.types.colon);case 63:return++this.pos,this.finishToken(h.types.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(h.types.backQuote);case 48:var b=this.input.charCodeAt(this.pos+1);if(120===b||88===b)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===b||79===b)return this.readRadixNumber(8);if(98===b||66===b)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(a);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo(a);case 124:case 38:return this.readToken_pipe_amp(a);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(a);case 60:case 62:return this.readToken_lt_gt(a);case 61:case 33:return this.readToken_eq_excl(a);case 126:return this.finishOp(h.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+f(a)+"'")},m.finishOp=function(a,b){var c=this.input.slice(this.pos,this.pos+b);return this.pos+=b,this.finishToken(a,c)};var o=!!e("￿","u");m.readRegexp=function(){for(var a=this,b=void 0,c=void 0,d=this.pos;;){this.pos>=this.input.length&&this.raise(d,"Unterminated regular expression");var f=this.input.charAt(this.pos);if(k.lineBreak.test(f)&&this.raise(d,"Unterminated regular expression"),b)b=!1;else{if("["===f)c=!0;else if("]"===f&&c)c=!1;else if("/"===f&&!c)break;b="\\"===f}++this.pos}var g=this.input.slice(d,this.pos);++this.pos;var i=this.readWord1(),j=g;if(i){var l=/^[gmsiy]*$/;this.options.ecmaVersion>=6&&(l=/^[gmsiyu]*$/),l.test(i)||this.raise(d,"Invalid regular expression flag"),i.indexOf("u")>=0&&!o&&(j=j.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(b,c,e){return c=Number("0x"+c),c>1114111&&a.raise(d+e+3,"Code point out of bounds"),"x"}),j=j.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"))}var m=null;return n||(e(j,void 0,d),m=e(g,i)),this.finishToken(h.types.regexp,{pattern:g,flags:i,value:m})},m.readInt=function(a,b){for(var c=this.pos,d=0,e=0,f=null==b?1/0:b;f>e;++e){var g=this.input.charCodeAt(this.pos),h=void 0;if(h=g>=97?g-97+10:g>=65?g-65+10:g>=48&&57>=g?g-48:1/0,h>=a)break;++this.pos,d=d*a+h}return this.pos===c||null!=b&&this.pos-c!==b?null:d},m.readRadixNumber=function(a){this.pos+=2;var b=this.readInt(a);return null==b&&this.raise(this.start+2,"Expected number in radix "+a),g.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(h.types.num,b)},m.readNumber=function(a){var b=this.pos,c=!1,d=48===this.input.charCodeAt(this.pos);a||null!==this.readInt(10)||this.raise(b,"Invalid number");var e=this.input.charCodeAt(this.pos);46===e&&(++this.pos,this.readInt(10),c=!0,e=this.input.charCodeAt(this.pos)),(69===e||101===e)&&(e=this.input.charCodeAt(++this.pos),(43===e||45===e)&&++this.pos,null===this.readInt(10)&&this.raise(b,"Invalid number"),c=!0),g.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var f=this.input.slice(b,this.pos),i=void 0;return c?i=parseFloat(f):d&&1!==f.length?/[89]/.test(f)||this.strict?this.raise(b,"Invalid number"):i=parseInt(f,8):i=parseInt(f,10),this.finishToken(h.types.num,i)},m.readCodePoint=function(){var a=this.input.charCodeAt(this.pos),b=void 0;if(123===a){this.options.ecmaVersion<6&&this.unexpected();var c=++this.pos;b=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,b>1114111&&this.raise(c,"Code point out of bounds")}else b=this.readHexChar(4);return b},m.readString=function(a){for(var b="",c=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var d=this.input.charCodeAt(this.pos);if(d===a)break;92===d?(b+=this.input.slice(c,this.pos),b+=this.readEscapedChar(!1),c=this.pos):(k.isNewLine(d)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return b+=this.input.slice(c,this.pos++),this.finishToken(h.types.string,b)},m.readTmplToken=function(){for(var a="",b=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var c=this.input.charCodeAt(this.pos);if(96===c||36===c&&123===this.input.charCodeAt(this.pos+1))return this.pos===this.start&&this.type===h.types.template?36===c?(this.pos+=2,this.finishToken(h.types.dollarBraceL)):(++this.pos,this.finishToken(h.types.backQuote)):(a+=this.input.slice(b,this.pos),this.finishToken(h.types.template,a));if(92===c)a+=this.input.slice(b,this.pos),a+=this.readEscapedChar(!0),b=this.pos;else if(k.isNewLine(c)){switch(a+=this.input.slice(b,this.pos),++this.pos,c){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:a+="\n";break;default:a+=String.fromCharCode(c)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),b=this.pos}else++this.pos}},m.readEscapedChar=function(a){var b=this.input.charCodeAt(++this.pos);switch(++this.pos,b){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));
case 117:return f(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(b>=48&&55>=b){var c=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],d=parseInt(c,8);return d>255&&(c=c.slice(0,-1),d=parseInt(c,8)),d>0&&(this.strict||a)&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=c.length-1,String.fromCharCode(d)}return String.fromCharCode(b)}},m.readHexChar=function(a){var b=this.pos,c=this.readInt(16,a);return null===c&&this.raise(b,"Bad character escape sequence"),c},m.readWord1=function(){this.containsEsc=!1;for(var a="",b=!0,c=this.pos,d=this.options.ecmaVersion>=6;this.pos<this.input.length;){var e=this.fullCharCodeAtPos();if(g.isIdentifierChar(e,d))this.pos+=65535>=e?1:2;else{if(92!==e)break;this.containsEsc=!0,a+=this.input.slice(c,this.pos);var h=this.pos;117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var i=this.readCodePoint();(b?g.isIdentifierStart:g.isIdentifierChar)(i,d)||this.raise(h,"Invalid Unicode escape"),a+=f(i),c=this.pos}b=!1}return a+this.input.slice(c,this.pos)},m.readWord=function(){var a=this.readWord1(),b=h.types.name;return(this.options.ecmaVersion>=6||!this.containsEsc)&&this.isKeyword(a)&&(b=h.keywords[a]),this.finishToken(b,a)}},{"./identifier":2,"./locutil":5,"./state":10,"./tokentype":14,"./whitespace":16}],14:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){return new g(a,{beforeExpr:!0,binop:b})}function f(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];b.keyword=a,k[a]=j["_"+a]=new g(a,b)}c.__esModule=!0;var g=function l(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];d(this,l),this.label=a,this.keyword=b.keyword,this.beforeExpr=!!b.beforeExpr,this.startsExpr=!!b.startsExpr,this.isLoop=!!b.isLoop,this.isAssign=!!b.isAssign,this.prefix=!!b.prefix,this.postfix=!!b.postfix,this.binop=b.binop||null,this.updateContext=null};c.TokenType=g;var h={beforeExpr:!0},i={startsExpr:!0},j={num:new g("num",i),regexp:new g("regexp",i),string:new g("string",i),name:new g("name",i),eof:new g("eof"),bracketL:new g("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new g("]"),braceL:new g("{",{beforeExpr:!0,startsExpr:!0}),braceR:new g("}"),parenL:new g("(",{beforeExpr:!0,startsExpr:!0}),parenR:new g(")"),comma:new g(",",h),semi:new g(";",h),colon:new g(":",h),dot:new g("."),question:new g("?",h),arrow:new g("=>",h),template:new g("template"),ellipsis:new g("...",h),backQuote:new g("`",i),dollarBraceL:new g("${",{beforeExpr:!0,startsExpr:!0}),eq:new g("=",{beforeExpr:!0,isAssign:!0}),assign:new g("_=",{beforeExpr:!0,isAssign:!0}),incDec:new g("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:e("||",1),logicalAND:e("&&",2),bitwiseOR:e("|",3),bitwiseXOR:e("^",4),bitwiseAND:e("&",5),equality:e("==/!=",6),relational:e("</>",7),bitShift:e("<</>>",8),plusMin:new g("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:e("%",10),star:e("*",10),slash:e("/",10)};c.types=j;var k={};c.keywords=k,f("break"),f("case",h),f("catch"),f("continue"),f("debugger"),f("default",h),f("do",{isLoop:!0}),f("else",h),f("finally"),f("for",{isLoop:!0}),f("function",i),f("if"),f("return",h),f("switch"),f("throw",h),f("try"),f("var"),f("let"),f("const"),f("while",{isLoop:!0}),f("with"),f("new",{beforeExpr:!0,startsExpr:!0}),f("this",i),f("super",i),f("class"),f("extends",h),f("export"),f("import"),f("yield",{beforeExpr:!0,startsExpr:!0}),f("null",i),f("true",i),f("false",i),f("in",{beforeExpr:!0,binop:7}),f("instanceof",{beforeExpr:!0,binop:7}),f("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),f("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),f("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},{}],15:[function(a,b,c){"use strict";function d(a){return"[object Array]"===Object.prototype.toString.call(a)}function e(a,b){return Object.prototype.hasOwnProperty.call(a,b)}c.__esModule=!0,c.isArray=d,c.has=e},{}],16:[function(a,b,c){"use strict";function d(a){return 10===a||13===a||8232===a||8233==a}c.__esModule=!0,c.isNewLine=d;var e=/\r\n?|\n|\u2028|\u2029/;c.lineBreak=e;var f=new RegExp(e.source,"g");c.lineBreakG=f;var g=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/;c.nonASCIIwhitespace=g},{}]},{},[3])(3)}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.acorn||(b.acorn={})).walk=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,d,e,f){d||(d=c.base),function g(a,c,e){var f=e||a.type,h=b[f];d[f](a,c,g),h&&h(a,c)}(a,e,f)}function f(a,b,d,e){d||(d=c.base),e||(e=[]),function f(a,c,e){var g=e||a.type,h=b[g];a!=c[c.length-1]&&(c=c.slice(),c.push(a)),d[g](a,c,f),h&&h(a,c)}(a,e)}function g(a,b,d,e,f){var g=d?c.make(d,e):e;!function h(a,b,c){g[c||a.type](a,b,h)}(a,b,f)}function h(a){return"string"==typeof a?function(b){return b==a}:a?a:function(){return!0}}function i(a,b,d,e,f,g){e=h(e),f||(f=c.base);try{!function j(a,c,g){var h=g||a.type;if((null==b||a.start<=b)&&(null==d||a.end>=d)&&f[h](a,c,j),(null==b||a.start==b)&&(null==d||a.end==d)&&e(h,a))throw new p(a,c)}(a,g)}catch(i){if(i instanceof p)return i;throw i}}function j(a,b,d,e,f){d=h(d),e||(e=c.base);try{!function i(a,c,f){var g=f||a.type;if(!(a.start>b||a.end<b)&&(e[g](a,c,i),d(g,a)))throw new p(a,c)}(a,f)}catch(g){if(g instanceof p)return g;throw g}}function k(a,b,d,e,f){d=h(d),e||(e=c.base);try{!function i(a,c,f){if(!(a.end<b)){var g=f||a.type;if(a.start>=b&&d(g,a))throw new p(a,c);e[g](a,c,i)}}(a,f)}catch(g){if(g instanceof p)return g;throw g}}function l(a,b,d,e,f){d=h(d),e||(e=c.base);var g=void 0;return function i(a,c,f){if(!(a.start>b)){var h=f||a.type;a.end<=b&&(!g||g.node.end<a.end)&&d(h,a)&&(g=new p(a,c)),e[h](a,c,i)}}(a,f),g}function m(a,b){b||(b=c.base);var d={};for(var e in b)d[e]=b[e];for(var e in a)d[e]=a[e];return d}function n(a,b,c){c(a,b)}function o(a,b,c){}c.__esModule=!0,c.simple=e,c.ancestor=f,c.recursive=g,c.findNodeAt=i,c.findNodeAround=j,c.findNodeAfter=k,c.findNodeBefore=l,c.make=m;var p=function r(a,b){d(this,r),this.node=a,this.state=b},q={};c.base=q,q.Program=q.BlockStatement=function(a,b,c){for(var d=0;d<a.body.length;++d)c(a.body[d],b,"Statement")},q.Statement=n,q.EmptyStatement=o,q.ExpressionStatement=q.ParenthesizedExpression=function(a,b,c){return c(a.expression,b,"Expression")},q.IfStatement=function(a,b,c){c(a.test,b,"Expression"),c(a.consequent,b,"Statement"),a.alternate&&c(a.alternate,b,"Statement")},q.LabeledStatement=function(a,b,c){return c(a.body,b,"Statement")},q.BreakStatement=q.ContinueStatement=o,q.WithStatement=function(a,b,c){c(a.object,b,"Expression"),c(a.body,b,"Statement")},q.SwitchStatement=function(a,b,c){c(a.discriminant,b,"Expression");for(var d=0;d<a.cases.length;++d){var e=a.cases[d];e.test&&c(e.test,b,"Expression");for(var f=0;f<e.consequent.length;++f)c(e.consequent[f],b,"Statement")}},q.ReturnStatement=q.YieldExpression=function(a,b,c){a.argument&&c(a.argument,b,"Expression")},q.ThrowStatement=q.SpreadElement=function(a,b,c){return c(a.argument,b,"Expression")},q.TryStatement=function(a,b,c){c(a.block,b,"Statement"),a.handler&&(c(a.handler.param,b,"Pattern"),c(a.handler.body,b,"ScopeBody")),a.finalizer&&c(a.finalizer,b,"Statement")},q.WhileStatement=q.DoWhileStatement=function(a,b,c){c(a.test,b,"Expression"),c(a.body,b,"Statement")},q.ForStatement=function(a,b,c){a.init&&c(a.init,b,"ForInit"),a.test&&c(a.test,b,"Expression"),a.update&&c(a.update,b,"Expression"),c(a.body,b,"Statement")},q.ForInStatement=q.ForOfStatement=function(a,b,c){c(a.left,b,"ForInit"),c(a.right,b,"Expression"),c(a.body,b,"Statement")},q.ForInit=function(a,b,c){"VariableDeclaration"==a.type?c(a,b):c(a,b,"Expression")},q.DebuggerStatement=o,q.FunctionDeclaration=function(a,b,c){return c(a,b,"Function")},q.VariableDeclaration=function(a,b,c){for(var d=0;d<a.declarations.length;++d)c(a.declarations[d],b)},q.VariableDeclarator=function(a,b,c){c(a.id,b,"Pattern"),a.init&&c(a.init,b,"Expression")},q.Function=function(a,b,c){a.id&&c(a.id,b,"Pattern");for(var d=0;d<a.params.length;d++)c(a.params[d],b,"Pattern");c(a.body,b,a.expression?"ScopeExpression":"ScopeBody")},q.ScopeBody=function(a,b,c){return c(a,b,"Statement")},q.ScopeExpression=function(a,b,c){return c(a,b,"Expression")},q.Pattern=function(a,b,c){"Identifier"==a.type?c(a,b,"VariablePattern"):"MemberExpression"==a.type?c(a,b,"MemberPattern"):c(a,b)},q.VariablePattern=o,q.MemberPattern=n,q.RestElement=function(a,b,c){return c(a.argument,b,"Pattern")},q.ArrayPattern=function(a,b,c){for(var d=0;d<a.elements.length;++d){var e=a.elements[d];e&&c(e,b,"Pattern")}},q.ObjectPattern=function(a,b,c){for(var d=0;d<a.properties.length;++d)c(a.properties[d].value,b,"Pattern")},q.Expression=n,q.ThisExpression=q.Super=q.MetaProperty=o,q.ArrayExpression=function(a,b,c){for(var d=0;d<a.elements.length;++d){var e=a.elements[d];e&&c(e,b,"Expression")}},q.ObjectExpression=function(a,b,c){for(var d=0;d<a.properties.length;++d)c(a.properties[d],b)},q.FunctionExpression=q.ArrowFunctionExpression=q.FunctionDeclaration,q.SequenceExpression=q.TemplateLiteral=function(a,b,c){for(var d=0;d<a.expressions.length;++d)c(a.expressions[d],b,"Expression")},q.UnaryExpression=q.UpdateExpression=function(a,b,c){c(a.argument,b,"Expression")},q.BinaryExpression=q.LogicalExpression=function(a,b,c){c(a.left,b,"Expression"),c(a.right,b,"Expression")},q.AssignmentExpression=q.AssignmentPattern=function(a,b,c){c(a.left,b,"Pattern"),c(a.right,b,"Expression")},q.ConditionalExpression=function(a,b,c){c(a.test,b,"Expression"),c(a.consequent,b,"Expression"),c(a.alternate,b,"Expression")},q.NewExpression=q.CallExpression=function(a,b,c){if(c(a.callee,b,"Expression"),a.arguments)for(var d=0;d<a.arguments.length;++d)c(a.arguments[d],b,"Expression")},q.MemberExpression=function(a,b,c){c(a.object,b,"Expression"),a.computed&&c(a.property,b,"Expression")},q.ExportNamedDeclaration=q.ExportDefaultDeclaration=function(a,b,c){a.declaration&&c(a.declaration,b),a.source&&c(a.source,b,"Expression")},q.ExportAllDeclaration=function(a,b,c){c(a.source,b,"Expression")},q.ImportDeclaration=function(a,b,c){for(var d=0;d<a.specifiers.length;d++)c(a.specifiers[d],b);c(a.source,b,"Expression")},q.ImportSpecifier=q.ImportDefaultSpecifier=q.ImportNamespaceSpecifier=q.Identifier=q.Literal=o,q.TaggedTemplateExpression=function(a,b,c){c(a.tag,b,"Expression"),c(a.quasi,b)},q.ClassDeclaration=q.ClassExpression=function(a,b,c){return c(a,b,"Class")},q.Class=function(a,b,c){a.id&&c(a.id,b,"Pattern"),a.superClass&&c(a.superClass,b,"Expression");for(var d=0;d<a.body.body.length;d++)c(a.body.body[d],b)},q.MethodDefinition=q.Property=function(a,b,c){a.computed&&c(a.key,b,"Expression"),c(a.value,b,"Expression")},q.ComprehensionExpression=function(a,b,c){for(var d=0;d<a.blocks.length;d++)c(a.blocks[d].right,b,"Expression");c(a.body,b,"Expression")}},{}]},{},[1])(1)}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.acorn||(b.acorn={})).loose=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports="undefined"!=typeof acorn?acorn:require("./acorn")},{}],2:[function(a,b,c){"use strict";var d=a("./state"),e=a("./parseutil"),f=a(".."),g=d.LooseParser.prototype;g.checkLVal=function(a,b){if(!a)return a;switch(a.type){case"Identifier":return a;case"MemberExpression":return b?this.dummyIdent():a;case"ParenthesizedExpression":return a.expression=this.checkLVal(a.expression,b),a;case"ObjectPattern":case"ArrayPattern":case"RestElement":case"AssignmentPattern":if(this.options.ecmaVersion>=6)return a;default:return this.dummyIdent()}},g.parseExpression=function(a){var b=this.storeCurrentPos(),c=this.parseMaybeAssign(a);if(this.tok.type===f.tokTypes.comma){var d=this.startNodeAt(b);for(d.expressions=[c];this.eat(f.tokTypes.comma);)d.expressions.push(this.parseMaybeAssign(a));return this.finishNode(d,"SequenceExpression")}return c},g.parseParenExpression=function(){this.pushCx(),this.expect(f.tokTypes.parenL);var a=this.parseExpression();return this.popCx(),this.expect(f.tokTypes.parenR),a},g.parseMaybeAssign=function(a){var b=this.storeCurrentPos(),c=this.parseMaybeConditional(a);if(this.tok.type.isAssign){var d=this.startNodeAt(b);return d.operator=this.tok.value,d.left=this.tok.type===f.tokTypes.eq?this.toAssignable(c):this.checkLVal(c),this.next(),d.right=this.parseMaybeAssign(a),this.finishNode(d,"AssignmentExpression")}return c},g.parseMaybeConditional=function(a){var b=this.storeCurrentPos(),c=this.parseExprOps(a);if(this.eat(f.tokTypes.question)){var d=this.startNodeAt(b);return d.test=c,d.consequent=this.parseMaybeAssign(),d.alternate=this.expect(f.tokTypes.colon)?this.parseMaybeAssign(a):this.dummyIdent(),this.finishNode(d,"ConditionalExpression")}return c},g.parseExprOps=function(a){var b=this.storeCurrentPos(),c=this.curIndent,d=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(a),b,-1,a,c,d)},g.parseExprOp=function(a,b,c,d,e,g){if(this.curLineStart!=g&&this.curIndent<e&&this.tokenStartsLine())return a;var h=this.tok.type.binop;if(null!=h&&(!d||this.tok.type!==f.tokTypes._in)&&h>c){var i=this.startNodeAt(b);if(i.left=a,i.operator=this.tok.value,this.next(),this.curLineStart!=g&&this.curIndent<e&&this.tokenStartsLine())i.right=this.dummyIdent();else{var j=this.storeCurrentPos();i.right=this.parseExprOp(this.parseMaybeUnary(d),j,h,d,e,g)}return this.finishNode(i,/&&|\|\|/.test(i.operator)?"LogicalExpression":"BinaryExpression"),this.parseExprOp(i,b,c,d,e,g)}return a},g.parseMaybeUnary=function(a){if(this.tok.type.prefix){var b=this.startNode(),c=this.tok.type===f.tokTypes.incDec;return b.operator=this.tok.value,b.prefix=!0,this.next(),b.argument=this.parseMaybeUnary(a),c&&(b.argument=this.checkLVal(b.argument)),this.finishNode(b,c?"UpdateExpression":"UnaryExpression")}if(this.tok.type===f.tokTypes.ellipsis){var b=this.startNode();return this.next(),b.argument=this.parseMaybeUnary(a),this.finishNode(b,"SpreadElement")}for(var d=this.storeCurrentPos(),e=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();){var b=this.startNodeAt(d);b.operator=this.tok.value,b.prefix=!1,b.argument=this.checkLVal(e),this.next(),e=this.finishNode(b,"UpdateExpression")}return e},g.parseExprSubscripts=function(){var a=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),a,!1,this.curIndent,this.curLineStart)},g.parseSubscripts=function(a,b,c,d,e){for(;;){if(this.curLineStart!=e&&this.curIndent<=d&&this.tokenStartsLine()){if(this.tok.type!=f.tokTypes.dot||this.curIndent!=d)return a;--d}if(this.eat(f.tokTypes.dot)){var g=this.startNodeAt(b);g.object=a,this.curLineStart!=e&&this.curIndent<=d&&this.tokenStartsLine()?g.property=this.dummyIdent():g.property=this.parsePropertyAccessor()||this.dummyIdent(),g.computed=!1,a=this.finishNode(g,"MemberExpression")}else if(this.tok.type==f.tokTypes.bracketL){this.pushCx(),this.next();var g=this.startNodeAt(b);g.object=a,g.property=this.parseExpression(),g.computed=!0,this.popCx(),this.expect(f.tokTypes.bracketR),a=this.finishNode(g,"MemberExpression")}else if(c||this.tok.type!=f.tokTypes.parenL){if(this.tok.type!=f.tokTypes.backQuote)return a;var g=this.startNodeAt(b);g.tag=a,g.quasi=this.parseTemplate(),a=this.finishNode(g,"TaggedTemplateExpression")}else{var g=this.startNodeAt(b);g.callee=a,g.arguments=this.parseExprList(f.tokTypes.parenR),a=this.finishNode(g,"CallExpression")}}},g.parseExprAtom=function(){var a=void 0;switch(this.tok.type){case f.tokTypes._this:case f.tokTypes._super:var b=this.tok.type===f.tokTypes._this?"ThisExpression":"Super";return a=this.startNode(),this.next(),this.finishNode(a,b);case f.tokTypes.name:var c=this.storeCurrentPos(),d=this.parseIdent();return this.eat(f.tokTypes.arrow)?this.parseArrowExpression(this.startNodeAt(c),[d]):d;case f.tokTypes.regexp:a=this.startNode();var g=this.tok.value;return a.regex={pattern:g.pattern,flags:g.flags},a.value=g.value,a.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(a,"Literal");case f.tokTypes.num:case f.tokTypes.string:return a=this.startNode(),a.value=this.tok.value,a.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(a,"Literal");case f.tokTypes._null:case f.tokTypes._true:case f.tokTypes._false:return a=this.startNode(),a.value=this.tok.type===f.tokTypes._null?null:this.tok.type===f.tokTypes._true,a.raw=this.tok.type.keyword,this.next(),this.finishNode(a,"Literal");case f.tokTypes.parenL:var h=this.storeCurrentPos();this.next();var i=this.parseExpression();if(this.expect(f.tokTypes.parenR),this.eat(f.tokTypes.arrow))return this.parseArrowExpression(this.startNodeAt(h),i.expressions||(e.isDummy(i)?[]:[i]));if(this.options.preserveParens){var j=this.startNodeAt(h);j.expression=i,i=this.finishNode(j,"ParenthesizedExpression")}return i;case f.tokTypes.bracketL:return a=this.startNode(),a.elements=this.parseExprList(f.tokTypes.bracketR,!0),this.finishNode(a,"ArrayExpression");case f.tokTypes.braceL:return this.parseObj();case f.tokTypes._class:return this.parseClass();case f.tokTypes._function:return a=this.startNode(),this.next(),this.parseFunction(a,!1);case f.tokTypes._new:return this.parseNew();case f.tokTypes._yield:return a=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!=f.tokTypes.star&&!this.tok.type.startsExpr?(a.delegate=!1,a.argument=null):(a.delegate=this.eat(f.tokTypes.star),a.argument=this.parseMaybeAssign()),this.finishNode(a,"YieldExpression");case f.tokTypes.backQuote:return this.parseTemplate();default:return this.dummyIdent()}},g.parseNew=function(){var a=this.startNode(),b=this.curIndent,c=this.curLineStart,d=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(f.tokTypes.dot))return a.meta=d,a.property=this.parseIdent(!0),this.finishNode(a,"MetaProperty");var e=this.storeCurrentPos();return a.callee=this.parseSubscripts(this.parseExprAtom(),e,!0,b,c),this.tok.type==f.tokTypes.parenL?a.arguments=this.parseExprList(f.tokTypes.parenR):a.arguments=[],this.finishNode(a,"NewExpression")},g.parseTemplateElement=function(){var a=this.startNode();return a.value={raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value},this.next(),a.tail=this.tok.type===f.tokTypes.backQuote,this.finishNode(a,"TemplateElement")},g.parseTemplate=function(){var a=this.startNode();this.next(),a.expressions=[];var b=this.parseTemplateElement();for(a.quasis=[b];!b.tail;)this.next(),a.expressions.push(this.parseExpression()),this.expect(f.tokTypes.braceR)?b=this.parseTemplateElement():(b=this.startNode(),b.value={cooked:"",raw:""},b.tail=!0),a.quasis.push(b);return this.expect(f.tokTypes.backQuote),this.finishNode(a,"TemplateLiteral")},g.parseObj=function(){var a=this.startNode();a.properties=[],this.pushCx();var b=this.curIndent+1,c=this.curLineStart;for(this.eat(f.tokTypes.braceL),this.curIndent+1<b&&(b=this.curIndent,c=this.curLineStart);!this.closes(f.tokTypes.braceR,b,c);){var d=this.startNode(),g=void 0,h=void 0;if(this.options.ecmaVersion>=6&&(h=this.storeCurrentPos(),d.method=!1,d.shorthand=!1,g=this.eat(f.tokTypes.star)),this.parsePropertyName(d),e.isDummy(d.key))e.isDummy(this.parseMaybeAssign())&&this.next(),this.eat(f.tokTypes.comma);else{if(this.eat(f.tokTypes.colon))d.kind="init",d.value=this.parseMaybeAssign();else if(this.options.ecmaVersion>=6&&(this.tok.type===f.tokTypes.parenL||this.tok.type===f.tokTypes.braceL))d.kind="init",d.method=!0,d.value=this.parseMethod(g);else if(this.options.ecmaVersion>=5&&"Identifier"===d.key.type&&!d.computed&&("get"===d.key.name||"set"===d.key.name)&&this.tok.type!=f.tokTypes.comma&&this.tok.type!=f.tokTypes.braceR)d.kind=d.key.name,this.parsePropertyName(d),d.value=this.parseMethod(!1);else{if(d.kind="init",this.options.ecmaVersion>=6)if(this.eat(f.tokTypes.eq)){var i=this.startNodeAt(h);i.operator="=",i.left=d.key,i.right=this.parseMaybeAssign(),d.value=this.finishNode(i,"AssignmentExpression")}else d.value=d.key;else d.value=this.dummyIdent();d.shorthand=!0}a.properties.push(this.finishNode(d,"Property")),this.eat(f.tokTypes.comma)}}return this.popCx(),this.eat(f.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.finishNode(a,"ObjectExpression")},g.parsePropertyName=function(a){if(this.options.ecmaVersion>=6){if(this.eat(f.tokTypes.bracketL))return a.computed=!0,a.key=this.parseExpression(),void this.expect(f.tokTypes.bracketR);a.computed=!1}var b=this.tok.type===f.tokTypes.num||this.tok.type===f.tokTypes.string?this.parseExprAtom():this.parseIdent();a.key=b||this.dummyIdent()},g.parsePropertyAccessor=function(){return this.tok.type===f.tokTypes.name||this.tok.type.keyword?this.parseIdent():void 0},g.parseIdent=function(){var a=this.tok.type===f.tokTypes.name?this.tok.value:this.tok.type.keyword;if(!a)return this.dummyIdent();var b=this.startNode();return this.next(),b.name=a,this.finishNode(b,"Identifier")},g.initFunction=function(a){a.id=null,a.params=[],this.options.ecmaVersion>=6&&(a.generator=!1,a.expression=!1)},g.toAssignable=function(a,b){if(this.options.ecmaVersion>=6&&a)switch(a.type){case"ObjectExpression":a.type="ObjectPattern";for(var c=a.properties,d=0;d<c.length;d++)this.toAssignable(c[d].value,b);break;case"ArrayExpression":a.type="ArrayPattern",this.toAssignableList(a.elements,b);break;case"SpreadElement":a.type="RestElement",a.argument=this.toAssignable(a.argument,b);break;case"AssignmentExpression":a.type="AssignmentPattern",delete a.operator}return this.checkLVal(a,b)},g.toAssignableList=function(a,b){for(var c=0;c<a.length;c++)a[c]=this.toAssignable(a[c],b);return a},g.parseFunctionParams=function(a){return a=this.parseExprList(f.tokTypes.parenR),this.toAssignableList(a,!0)},g.parseMethod=function(a){var b=this.startNode();return this.initFunction(b),b.params=this.parseFunctionParams(),b.generator=a||!1,b.expression=this.options.ecmaVersion>=6&&this.tok.type!==f.tokTypes.braceL,b.body=b.expression?this.parseMaybeAssign():this.parseBlock(),this.finishNode(b,"FunctionExpression")},g.parseArrowExpression=function(a,b){return this.initFunction(a),a.params=this.toAssignableList(b,!0),a.expression=this.tok.type!==f.tokTypes.braceL,a.body=a.expression?this.parseMaybeAssign():this.parseBlock(),this.finishNode(a,"ArrowFunctionExpression")},g.parseExprList=function(a,b){this.pushCx();var c=this.curIndent,d=this.curLineStart,g=[];for(this.next();!this.closes(a,c+1,d);)if(this.eat(f.tokTypes.comma))g.push(b?null:this.dummyIdent());else{var h=this.parseMaybeAssign();if(e.isDummy(h)){if(this.closes(a,c,d))break;this.next()}else g.push(h);this.eat(f.tokTypes.comma)}return this.popCx(),this.eat(a)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),g}},{"..":1,"./parseutil":4,"./state":5}],3:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){var c=new h.LooseParser(a,b);return c.next(),c.parseTopLevel()}c.__esModule=!0,c.parse_dammit=e;var f=a(".."),g=d(f),h=a("./state");a("./tokenize"),a("./statement"),a("./expression"),c.LooseParser=h.LooseParser,g.defaultOptions.tabSize=4,g.parse_dammit=e,g.LooseParser=h.LooseParser},{"..":1,"./expression":2,"./state":5,"./statement":6,"./tokenize":7}],4:[function(a,b,c){"use strict";function d(a){return"✖"==a.name}c.__esModule=!0,c.isDummy=d},{}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a(".."),f=function(){function a(b,c){if(d(this,a),this.toks=e.tokenizer(b,c),this.options=this.toks.options,this.input=this.toks.input,this.tok=this.last={type:e.tokTypes.eof,start:0,end:0},this.options.locations){var f=this.toks.curPosition();this.tok.loc=new e.SourceLocation(this.toks,f,f)}this.ahead=[],this.context=[],this.curIndent=0,this.curLineStart=0,this.nextLineStart=this.lineEnd(this.curLineStart)+1}return a.prototype.startNode=function(){return new e.Node(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)},a.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start},a.prototype.startNodeAt=function(a){return this.options.locations?new e.Node(this.toks,a[0],a[1]):new e.Node(this.toks,a)},a.prototype.finishNode=function(a,b){return a.type=b,a.end=this.last.end,this.options.locations&&(a.loc.end=this.last.loc.end),this.options.ranges&&(a.range[1]=this.last.end),a},a.prototype.dummyIdent=function(){var a=this.startNode();return a.name="✖",this.finishNode(a,"Identifier")},a.prototype.dummyString=function(){var a=this.startNode();return a.value=a.raw="✖",this.finishNode(a,"Literal")},a.prototype.eat=function(a){return this.tok.type===a?(this.next(),!0):!1},a.prototype.isContextual=function(a){return this.tok.type===e.tokTypes.name&&this.tok.value===a},a.prototype.eatContextual=function(a){return this.tok.value===a&&this.eat(e.tokTypes.name)},a.prototype.canInsertSemicolon=function(){return this.tok.type===e.tokTypes.eof||this.tok.type===e.tokTypes.braceR||e.lineBreak.test(this.input.slice(this.last.end,this.tok.start))},a.prototype.semicolon=function(){return this.eat(e.tokTypes.semi)},a.prototype.expect=function(a){if(this.eat(a))return!0;for(var b=1;2>=b;b++)if(this.lookAhead(b).type==a){for(var c=0;b>c;c++)this.next();return!0}},a.prototype.pushCx=function(){this.context.push(this.curIndent)},a.prototype.popCx=function(){this.curIndent=this.context.pop()},a.prototype.lineEnd=function(a){for(;a<this.input.length&&!e.isNewLine(this.input.charCodeAt(a));)++a;return a},a.prototype.indentationAfter=function(a){for(var b=0;;++a){var c=this.input.charCodeAt(a);if(32===c)++b;else{if(9!==c)return b;b+=this.options.tabSize}}},a.prototype.closes=function(a,b,c,d){return this.tok.type===a||this.tok.type===e.tokTypes.eof?!0:c!=this.curLineStart&&this.curIndent<b&&this.tokenStartsLine()&&(!d||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<b)},a.prototype.tokenStartsLine=function(){for(var a=this.tok.start-1;a>=this.curLineStart;--a){var b=this.input.charCodeAt(a);if(9!==b&&32!==b)return!1}return!0},a}();c.LooseParser=f},{"..":1}],6:[function(a,b,c){"use strict";var d=a("./state"),e=a("./parseutil"),f=a(".."),g=d.LooseParser.prototype;g.parseTopLevel=function(){var a=this.startNodeAt(this.options.locations?[0,f.getLineInfo(this.input,0)]:0);for(a.body=[];this.tok.type!==f.tokTypes.eof;)a.body.push(this.parseStatement());return this.last=this.tok,this.options.ecmaVersion>=6&&(a.sourceType=this.options.sourceType),this.finishNode(a,"Program")},g.parseStatement=function(){var a=this.tok.type,b=this.startNode();switch(a){case f.tokTypes._break:case f.tokTypes._continue:this.next();var c=a===f.tokTypes._break;return this.semicolon()||this.canInsertSemicolon()?b.label=null:(b.label=this.tok.type===f.tokTypes.name?this.parseIdent():null,this.semicolon()),this.finishNode(b,c?"BreakStatement":"ContinueStatement");case f.tokTypes._debugger:return this.next(),this.semicolon(),this.finishNode(b,"DebuggerStatement");case f.tokTypes._do:return this.next(),b.body=this.parseStatement(),b.test=this.eat(f.tokTypes._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(b,"DoWhileStatement");case f.tokTypes._for:if(this.next(),this.pushCx(),this.expect(f.tokTypes.parenL),this.tok.type===f.tokTypes.semi)return this.parseFor(b,null);if(this.tok.type===f.tokTypes._var||this.tok.type===f.tokTypes._let||this.tok.type===f.tokTypes._const){var d=this.parseVar(!0);return 1!==d.declarations.length||this.tok.type!==f.tokTypes._in&&!this.isContextual("of")?this.parseFor(b,d):this.parseForIn(b,d)}var g=this.parseExpression(!0);return this.tok.type===f.tokTypes._in||this.isContextual("of")?this.parseForIn(b,this.toAssignable(g)):this.parseFor(b,g);case f.tokTypes._function:return this.next(),this.parseFunction(b,!0);case f.tokTypes._if:return this.next(),b.test=this.parseParenExpression(),b.consequent=this.parseStatement(),b.alternate=this.eat(f.tokTypes._else)?this.parseStatement():null,this.finishNode(b,"IfStatement");case f.tokTypes._return:return this.next(),this.eat(f.tokTypes.semi)||this.canInsertSemicolon()?b.argument=null:(b.argument=this.parseExpression(),this.semicolon()),this.finishNode(b,"ReturnStatement");case f.tokTypes._switch:var h=this.curIndent,i=this.curLineStart;this.next(),b.discriminant=this.parseParenExpression(),b.cases=[],this.pushCx(),this.expect(f.tokTypes.braceL);for(var j=void 0;!this.closes(f.tokTypes.braceR,h,i,!0);)if(this.tok.type===f.tokTypes._case||this.tok.type===f.tokTypes._default){var k=this.tok.type===f.tokTypes._case;j&&this.finishNode(j,"SwitchCase"),b.cases.push(j=this.startNode()),j.consequent=[],this.next(),k?j.test=this.parseExpression():j.test=null,this.expect(f.tokTypes.colon)}else j||(b.cases.push(j=this.startNode()),j.consequent=[],j.test=null),j.consequent.push(this.parseStatement());return j&&this.finishNode(j,"SwitchCase"),this.popCx(),this.eat(f.tokTypes.braceR),this.finishNode(b,"SwitchStatement");case f.tokTypes._throw:return this.next(),b.argument=this.parseExpression(),this.semicolon(),this.finishNode(b,"ThrowStatement");case f.tokTypes._try:if(this.next(),b.block=this.parseBlock(),b.handler=null,this.tok.type===f.tokTypes._catch){var l=this.startNode();this.next(),this.expect(f.tokTypes.parenL),l.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(f.tokTypes.parenR),l.guard=null,l.body=this.parseBlock(),b.handler=this.finishNode(l,"CatchClause")}return b.finalizer=this.eat(f.tokTypes._finally)?this.parseBlock():null,b.handler||b.finalizer?this.finishNode(b,"TryStatement"):b.block;case f.tokTypes._var:case f.tokTypes._let:case f.tokTypes._const:return this.parseVar();case f.tokTypes._while:return this.next(),b.test=this.parseParenExpression(),b.body=this.parseStatement(),this.finishNode(b,"WhileStatement");case f.tokTypes._with:return this.next(),b.object=this.parseParenExpression(),b.body=this.parseStatement(),this.finishNode(b,"WithStatement");case f.tokTypes.braceL:return this.parseBlock();case f.tokTypes.semi:return this.next(),this.finishNode(b,"EmptyStatement");case f.tokTypes._class:return this.parseClass(!0);case f.tokTypes._import:return this.parseImport();case f.tokTypes._export:return this.parseExport();
default:var m=this.parseExpression();return e.isDummy(m)?(this.next(),this.tok.type===f.tokTypes.eof?this.finishNode(b,"EmptyStatement"):this.parseStatement()):a===f.tokTypes.name&&"Identifier"===m.type&&this.eat(f.tokTypes.colon)?(b.body=this.parseStatement(),b.label=m,this.finishNode(b,"LabeledStatement")):(b.expression=m,this.semicolon(),this.finishNode(b,"ExpressionStatement"))}},g.parseBlock=function(){var a=this.startNode();this.pushCx(),this.expect(f.tokTypes.braceL);var b=this.curIndent,c=this.curLineStart;for(a.body=[];!this.closes(f.tokTypes.braceR,b,c,!0);)a.body.push(this.parseStatement());return this.popCx(),this.eat(f.tokTypes.braceR),this.finishNode(a,"BlockStatement")},g.parseFor=function(a,b){return a.init=b,a.test=a.update=null,this.eat(f.tokTypes.semi)&&this.tok.type!==f.tokTypes.semi&&(a.test=this.parseExpression()),this.eat(f.tokTypes.semi)&&this.tok.type!==f.tokTypes.parenR&&(a.update=this.parseExpression()),this.popCx(),this.expect(f.tokTypes.parenR),a.body=this.parseStatement(),this.finishNode(a,"ForStatement")},g.parseForIn=function(a,b){var c=this.tok.type===f.tokTypes._in?"ForInStatement":"ForOfStatement";return this.next(),a.left=b,a.right=this.parseExpression(),this.popCx(),this.expect(f.tokTypes.parenR),a.body=this.parseStatement(),this.finishNode(a,c)},g.parseVar=function(a){var b=this.startNode();b.kind=this.tok.type.keyword,this.next(),b.declarations=[];do{var c=this.startNode();c.id=this.options.ecmaVersion>=6?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),c.init=this.eat(f.tokTypes.eq)?this.parseMaybeAssign(a):null,b.declarations.push(this.finishNode(c,"VariableDeclarator"))}while(this.eat(f.tokTypes.comma));if(!b.declarations.length){var c=this.startNode();c.id=this.dummyIdent(),b.declarations.push(this.finishNode(c,"VariableDeclarator"))}return a||this.semicolon(),this.finishNode(b,"VariableDeclaration")},g.parseClass=function(a){var b=this.startNode();this.next(),this.tok.type===f.tokTypes.name?b.id=this.parseIdent():a?b.id=this.dummyIdent():b.id=null,b.superClass=this.eat(f.tokTypes._extends)?this.parseExpression():null,b.body=this.startNode(),b.body.body=[],this.pushCx();var c=this.curIndent+1,d=this.curLineStart;for(this.eat(f.tokTypes.braceL),this.curIndent+1<c&&(c=this.curIndent,d=this.curLineStart);!this.closes(f.tokTypes.braceR,c,d);)if(!this.semicolon()){var g=this.startNode(),h=void 0;this.options.ecmaVersion>=6&&(g["static"]=!1,h=this.eat(f.tokTypes.star)),this.parsePropertyName(g),e.isDummy(g.key)?(e.isDummy(this.parseMaybeAssign())&&this.next(),this.eat(f.tokTypes.comma)):("Identifier"!==g.key.type||g.computed||"static"!==g.key.name||this.tok.type==f.tokTypes.parenL||this.tok.type==f.tokTypes.braceL?g["static"]=!1:(g["static"]=!0,h=this.eat(f.tokTypes.star),this.parsePropertyName(g)),this.options.ecmaVersion>=5&&"Identifier"===g.key.type&&!g.computed&&("get"===g.key.name||"set"===g.key.name)&&this.tok.type!==f.tokTypes.parenL&&this.tok.type!==f.tokTypes.braceL?(g.kind=g.key.name,this.parsePropertyName(g),g.value=this.parseMethod(!1)):(g.computed||g["static"]||h||!("Identifier"===g.key.type&&"constructor"===g.key.name||"Literal"===g.key.type&&"constructor"===g.key.value)?g.kind="method":g.kind="constructor",g.value=this.parseMethod(h)),b.body.body.push(this.finishNode(g,"MethodDefinition")))}return this.popCx(),this.eat(f.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.semicolon(),this.finishNode(b.body,"ClassBody"),this.finishNode(b,a?"ClassDeclaration":"ClassExpression")},g.parseFunction=function(a,b){return this.initFunction(a),this.options.ecmaVersion>=6&&(a.generator=this.eat(f.tokTypes.star)),this.tok.type===f.tokTypes.name?a.id=this.parseIdent():b&&(a.id=this.dummyIdent()),a.params=this.parseFunctionParams(),a.body=this.parseBlock(),this.finishNode(a,b?"FunctionDeclaration":"FunctionExpression")},g.parseExport=function(){var a=this.startNode();if(this.next(),this.eat(f.tokTypes.star))return a.source=this.eatContextual("from")?this.parseExprAtom():null,this.finishNode(a,"ExportAllDeclaration");if(this.eat(f.tokTypes._default)){var b=this.parseMaybeAssign();if(b.id)switch(b.type){case"FunctionExpression":b.type="FunctionDeclaration";break;case"ClassExpression":b.type="ClassDeclaration"}return a.declaration=b,this.semicolon(),this.finishNode(a,"ExportDefaultDeclaration")}return this.tok.type.keyword?(a.declaration=this.parseStatement(),a.specifiers=[],a.source=null):(a.declaration=null,a.specifiers=this.parseExportSpecifierList(),a.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon()),this.finishNode(a,"ExportNamedDeclaration")},g.parseImport=function(){var a=this.startNode();if(this.next(),this.tok.type===f.tokTypes.string)a.specifiers=[],a.source=this.parseExprAtom(),a.kind="";else{var b=void 0;this.tok.type===f.tokTypes.name&&"from"!==this.tok.value&&(b=this.startNode(),b.local=this.parseIdent(),this.finishNode(b,"ImportDefaultSpecifier"),this.eat(f.tokTypes.comma)),a.specifiers=this.parseImportSpecifierList(),a.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),b&&a.specifiers.unshift(b)}return this.semicolon(),this.finishNode(a,"ImportDeclaration")},g.parseImportSpecifierList=function(){var a=[];if(this.tok.type===f.tokTypes.star){var b=this.startNode();this.next(),this.eatContextual("as")&&(b.local=this.parseIdent()),a.push(this.finishNode(b,"ImportNamespaceSpecifier"))}else{var c=this.curIndent,d=this.curLineStart,g=this.nextLineStart;for(this.pushCx(),this.eat(f.tokTypes.braceL),this.curLineStart>g&&(g=this.curLineStart);!this.closes(f.tokTypes.braceR,c+(this.curLineStart<=g?1:0),d);){var b=this.startNode();if(this.eat(f.tokTypes.star))this.eatContextual("as")&&(b.local=this.parseIdent()),this.finishNode(b,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;if(b.imported=this.parseIdent(),e.isDummy(b.imported))break;b.local=this.eatContextual("as")?this.parseIdent():b.imported,this.finishNode(b,"ImportSpecifier")}a.push(b),this.eat(f.tokTypes.comma)}this.eat(f.tokTypes.braceR),this.popCx()}return a},g.parseExportSpecifierList=function(){var a=[],b=this.curIndent,c=this.curLineStart,d=this.nextLineStart;for(this.pushCx(),this.eat(f.tokTypes.braceL),this.curLineStart>d&&(d=this.curLineStart);!this.closes(f.tokTypes.braceR,b+(this.curLineStart<=d?1:0),c)&&!this.isContextual("from");){var g=this.startNode();if(g.local=this.parseIdent(),e.isDummy(g.local))break;g.exported=this.eatContextual("as")?this.parseIdent():g.local,this.finishNode(g,"ExportSpecifier"),a.push(g),this.eat(f.tokTypes.comma)}return this.eat(f.tokTypes.braceR),this.popCx(),a}},{"..":1,"./parseutil":4,"./state":5}],7:[function(a,b,c){"use strict";function d(a){return 14>a&&a>8||32===a||160===a||e.isNewLine(a)}var e=a(".."),f=a("./state"),g=f.LooseParser.prototype;g.next=function(){if(this.last=this.tok,this.ahead.length?this.tok=this.ahead.shift():this.tok=this.readToken(),this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}},g.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===e.tokTypes.dot&&"."===this.input.substr(this.toks.end,1)&&this.options.ecmaVersion>=6&&(this.toks.end++,this.toks.type=e.tokTypes.ellipsis),new e.Token(this.toks)}catch(a){if(!(a instanceof SyntaxError))throw a;var b=a.message,c=a.raisedAt,f=!0;if(/unterminated/i.test(b))if(c=this.lineEnd(a.pos+1),/string/.test(b))f={start:a.pos,end:c,type:e.tokTypes.string,value:this.input.slice(a.pos+1,c)};else if(/regular expr/i.test(b)){var g=this.input.slice(a.pos,c);try{g=new RegExp(g)}catch(a){}f={start:a.pos,end:c,type:e.tokTypes.regexp,value:g}}else f=/template/.test(b)?{start:a.pos,end:c,type:e.tokTypes.template,value:this.input.slice(a.pos,c)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(b))for(;c<this.input.length&&!d(this.input.charCodeAt(c));)++c;else if(/character escape|expected hexadecimal/i.test(b))for(;c<this.input.length;){var h=this.input.charCodeAt(c++);if(34===h||39===h||e.isNewLine(h))break}else if(/unexpected character/i.test(b))c++,f=!1;else{if(!/regular expression/i.test(b))throw a;f=!0}if(this.resetTo(c),f===!0&&(f={start:c,end:c,type:e.tokTypes.name,value:"✖"}),f)return this.options.locations&&(f.loc=new e.SourceLocation(this.toks,e.getLineInfo(this.input,f.start),e.getLineInfo(this.input,f.end))),f}},g.resetTo=function(a){this.toks.pos=a;var b=this.input.charAt(a-1);if(this.toks.exprAllowed=!b||/[\[\{\(,;:?\/*=+\-~!|&%^<>]/.test(b)||/[enwfd]/.test(b)&&/\b(keywords|case|else|return|throw|new|in|(instance|type)of|delete|void)$/.test(this.input.slice(a-10,a)),this.options.locations){this.toks.curLine=1,this.toks.lineStart=e.lineBreakG.lastIndex=0;for(var c=void 0;(c=e.lineBreakG.exec(this.input))&&c.index<a;)++this.toks.curLine,this.toks.lineStart=c.index+c[0].length}},g.lookAhead=function(a){for(;a>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[a-1]}},{"..":1,"./state":5}]},{},[3])(3)}),function(Global){function createLivelyLangObject(){return{chain:chain,noConflict:noConflict,installGlobals:installGlobals,uninstallGlobals:uninstallGlobals,globalInterfaceSpec:globalInterfaceSpec,deprecatedLivelyPatches:deprecatedLivelyPatches}}function chain(a){if(!a)return a;if(Array.isArray(a))return createChain(livelyLang.arr,a);if("Date"===a.constructor.name)return createChain(livelyLang.date,a);switch(typeof a){case"string":return createChain(livelyLang.string,a);case"object":return createChain(livelyLang.obj,a);case"function":return createChain(livelyLang.fun,a);case"number":return createChain(livelyLang.num,a)}throw new Error("Chain for object "+a+" ("+a.constructor.name+") no supported")}function createChain(a,b){return Object.keys(a).reduce(function(c,d){return c[d]=function(){var c=Array.prototype.slice.call(arguments),e=a[d].apply(null,[b].concat(c));return chain(e)},c},{value:function(){return b}})}function noConflict(){if(!isNode){var a=livelyLang._prevLivelyGlobal;a?delete Global.lively.lang:delete Global.lively}return livelyLang}function installGlobals(){globalInterfaceSpec.forEach(function(a){if("installMethods"===a.action){var b=livelyLang.Path(a.target);b.isIn(Global)||b.set(Global,{},!0);var c=livelyLang.Path(a.sources[0]);a.methods.forEach(function(a){installProperty(c.concat([a]),b.concat([a]))}),a.alias&&a.alias.forEach(function(a){installProperty(c.concat([a[1]]),b.concat([a[0]]))})}else{if("installObject"!==a.action)throw new Error("Cannot deal with global setup action: "+a.action);var b=livelyLang.Path(a.target),d=livelyLang.Path(a.source).get(livelyLang);b.set(Global,d,!0)}})}function installProperty(a,b){if(!a.isIn(livelyLang)){var c=new Error("property not provided by lively.lang: "+a);throw console.error(c.stack||c),c}var d=a.get(livelyLang);if("function"==typeof d&&"prototype"===b.slice(-2,-1).toString()){var e=d;d=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(this),e.apply(null,a)},d.toString=function(){return e.toString()}}b.set(Global,d,!0)}function uninstallGlobals(){globalInterfaceSpec.forEach(function(a){if("installMethods"===a.action){var b=livelyLang.Path(a.target),c=livelyLang.Path(a.source).get(livelyLang),d=b.get(Global);if(!d)return;a.methods.filter(function(a){return c===d[a]}).forEach(function(a){delete d[a]}),a.alias&&a.alias.filter(function(a){return c===d[a]}).forEach(function(a){delete d[a[0]]})}else{if("installObject"!==a.action)throw new Error("Cannot deal with global setup action: "+a.action);var b=livelyLang.Path(a.target);b.del(Global)}})}function deprecatedLivelyPatches(){livelyLang.installGlobals(),Global.$A=Array.from,Function.evalJS=livelyLang.fun.evalJS=function(src){return eval(src)},livelyLang.Path.type=livelyLang.PropertyPath,livelyLang.Path.prototype.serializeExpr=function(){return"lively.PropertyPath("+livelyLang.obj.inspect(this.parts())+")"},livelyLang.Closure.type="lively.Closure",livelyLang.fun.methodChain=livelyLang.fun.wrapperChain,"undefined"!=typeof JSON&&(JSON.prettyPrint=function(a){return JSON.stringify(a,null,2)}),Global.NativeArrayFunctions=livelyLang.arrNative}var globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:["all","any","batchify","clear","clone","collect","compact","delimWith","detect","doAndContinue","each","equals","filterByKey","findAll","first","flatten","forEachShowingProgress","grep","groupBy","groupByKey","histogram","include","inject","intersect","invoke","last","mapAsync","mapAsyncSeries","mask","max","min","mutableCompact","nestedDelay","partition","pluck","pushAll","pushAllAt","pushAt","pushIfNotIncluded","reMatches","reject","rejectByKey","remove","removeAt","replaceAt","rotate","shuffle","size","sortBy","sortByKey","sum","swap","toArray","toTuples","union","uniq","uniqBy","without","withoutAll","zip"],alias:[["select","filter"],["find","detect"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:["addToObject","argumentNames","asScript","asScriptOf","binds","curry","delay","functionNames","localFunctionNames","getOriginal","getVarMapping","logCalls","logCompletion","logErrors","qualifiedMethodName","setProperty","traceCalls","wrap"]},{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:["addScript","clone","deepCopy","extend","inherit","isArray","isBoolean","isElement","isEmpty","isFunction","isNumber","isObject","isRegExp","isString","isUndefined","merge","mergePropertyInHierarchy","values","valuesInPropertyHierarchy"]},{action:"installMethods",target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:["camelize","capitalize","digitValue","empty","endsWith","hashCode","include","pad","regExpEscape","startsWith","startsWithVowel","succ","times","toArray","toQueryParams","truncate"]},{action:"installMethods",target:"Function.prototype",sources:["class"],methods:["create","addMethods","isSubclassOf","superclasses","categoryNameFor","remove"],alias:[["subclass","create"]]},{action:"installObject",target:"Numbers",source:"num",methods:["average","between","convertLength","humanReadableByteSize","median","normalRandom","parseLength","random","sort"]},{action:"installObject",target:"Properties",source:"properties",methods:["all","allOwnPropertiesOrFunctions","allProperties","any","forEachOwn","hash","nameFor","own","ownValues","values"]},{action:"installObject",target:"Strings",source:"string",methods:["camelCaseString","createDataURI","diff","format","formatFromArray","indent","lineIndexComputer","lines","md5","newUUID","nonEmptyLines","pad","paragraphs","peekLeft","peekRight","print","printNested","printTable","printTree","quote","reMatches","removeSurroundingWhitespaces","stringMatch","tableize","tokens","unescapeCharacterEntities","withDecimalPrecision"]},{action:"installObject",target:"Objects",source:"obj",methods:["asObject","equals","inspect","isMutableType","safeToString","shortPrintStringOf","typeStringOf"]},{action:"installObject",target:"Functions",source:"fun",methods:["all","compose","composeAsync","createQueue","debounce","debounceNamed","either","extractBody","flip","notYetImplemented","once","own","throttle","throttleNamed","timeToRun","timeToRunN","waitFor","workerWithCallbackQueue","wrapperChain"]},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}],isNode="undefined"!=typeof process&&process.versions&&process.versions.node,livelyLang=createLivelyLangObject();if(isNode)module.exports=livelyLang;else if(livelyLang._prevLivelyGlobal=Global.lively,Global.lively||(Global.lively={}),Global.lively.lang)for(var name in livelyLang)Global.lively.lang[name]=livelyLang[name];else Global.lively.lang=livelyLang}("undefined"!=typeof window?window:global),function(a){"use strict";var b="undefined"!=typeof process&&process.versions&&process.versions.node;a.events={makeEmitter:b?function(a){if(a.on&&a.removeListener)return a;var b=require("events");return require("util")._extend(a,b.EventEmitter.prototype),b.EventEmitter.call(a),a}:function(a){return a.on&&a.removeListener?a:(a.listeners={},a.on=function(b,c){c&&(a.listeners[b]||(a.listeners[b]=[]),a.listeners[b].push(c))},a.once=function(b,c){function d(){a.removeListener(b,d),c.apply(this,arguments)}c&&a.on(b,d)},a.removeListener=function(b,c){a.listeners[b]&&(a.listeners[b]=a.listeners[b].filter(function(a){return a!==c}))},a.removeAllListeners=function(b){a.listeners[b]&&(a.listeners[b]=[])},a.emit=function(){var b=Array.prototype.slice.call(arguments),c=b.shift(),d=a.listeners[c];d&&d.length&&d.forEach(function(a){try{a.apply(null,b)}catch(c){console.error("Error in event handler: %s",c.stack||String(c))}})},a)}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(a){"use strict";function b(a){if(a&&e.isArray(a))return"["+a.map(b)+"]";if("string"!=typeof a)return String(a);var c=String(a);return c=c.replace(/\n/g,"\\n\\\n"),c=c.replace(/(")/g,"\\$1"),c='"'+c+'"'}function c(a){if(a.superclass)return[];var b=a.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=b.length||b[0]?b:[]}function d(a,b,c){if(!c||0>=c)return a;for(;c>0;)c--,a=b+a;return a}var e=a.obj={isArray:function(a){return a&&Array.isArray(a)},isElement:function(a){return a&&1==a.nodeType},isFunction:function(a){return a instanceof Function},isBoolean:function(a){return"boolean"==typeof a},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isUndefined:function(a){return"undefined"==typeof a},isRegExp:function(a){return a instanceof RegExp},isObject:function(a){return"object"==typeof a},isPrimitive:function(a){if(!a)return!0;switch(typeof a){case"string":case"number":case"boolean":return!0}return!1},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},equals:function(a,b){function c(a,b){for(var c in a)if("function"!=typeof a[c]&&!e.equals(a[c],b[c]))return!1;return!0}if(!a&&!b)return!0;if(!a||!b)return!1;switch(a.constructor){case String:case Date:case Boolean:case Number:return a==b}return"function"==typeof a.isEqualNode?a.isEqualNode(b):"function"==typeof a.equals?a.equals(b):c(a,b)&&c(b,a)},keys:Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},values:function(a){return a?Object.keys(a).map(function(b){return a[b]}):[]},addScript:function(b,c,d,e){var f=a.fun.fromString(c);return a.fun.asScriptOf(f,b,d,e)},extend:function(a,b){for(var c=null,d=1;d<arguments.length;d++)if("string"!=typeof arguments[d]){var b=arguments[d];for(var e in b){var f=b.__lookupGetter__(e),g=b.__lookupSetter__(e);if(f&&a.__defineGetter__(e,f),g&&a.__defineSetter__(e,g),!f&&!g){var h=b[e];a[e]=h,c&&c.push(e),"function"==typeof h&&(h.name&&0!=h.name.length||h.displayName||(h.displayName=e),"undefined"!=typeof lively&&lively.Module&&lively.Module.current&&(h.sourceModule=lively.Module.current()))}}}else{var i=arguments[d];a.categories||(a.categories={}),a.categories[i]||(a.categories[i]=[]),c=a.categories[i]}return a},clone:function(a){if(e.isPrimitive(a))return a;if(Array.isArray(a))return Array.prototype.slice.call(a);var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},extract:function(a,b,c){for(var d={},e=0;e<b.length;e++)b[e]in a&&(d[b[e]]=c?c(b[e],a[b[e]]):a[b[e]]);return d},inspect:function g(a,e,f){if(e=e||{},f=f||0,e.customPrinter){var h=e._ignoreSignal||(e._ignoreSignal={}),i=e.customPrinter(a,h);if(i!==h)return i}if(!a)return b(a);if("function"==typeof a)return e.printFunctionSource?String(a):"function"+(a.name?" "+a.name:"")+"("+c(a).join(",")+") {/*...*/}";switch(a.constructor){case String:case Boolean:case RegExp:case Number:return b(a)}if("function"==typeof a.serializeExpr)return a.serializeExpr();var j=a&&Array.isArray(a),k=j?"[":"{",l=j?"]":"}";if(e.maxDepth&&f>=e.maxDepth)return k+"/*...*/"+l;var m=[];if(m=j?a.map(function(a){return g(a,e,f+1)}):Object.keys(a).sort(function(b,c){var d="function"==typeof a[b],e="function"==typeof a[c];return d===e?c>b?-1:b>c?1:0:d?1:-1}).map(function(b,c){j&&g(a[b],e,f+1);var d=g(a[b],e,f+1);return e.escapeKeys?Strings.print(b):b+": "+d}),0===m.length)return k+l;var n=m.join(", "),o=(!j||e.newLineInArrays)&&(!e.minLengthForNewLine||n.length>=e.minLengthForNewLine),p=d("",e.indent||"  ",f),q=d("",e.indent||"  ",f+1),r=o&&!j?"\n"+q:"",s=o?"\n"+q:"",t=o&&!j?"\n"+p:"";return o&&(n=m.join(","+s)),k+r+n+t+l},merge:function(a){return arguments.length>1?e.merge(Array.prototype.slice.call(arguments)):Array.isArray(a[0])?Array.prototype.concat.apply([],a):a.reduce(function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},{})},inherit:function(a){return Object.create(a)},valuesInPropertyHierarchy:function(a,b){for(var c=[],d=a;d;)d.hasOwnProperty(b)&&c.unshift(d[b]),d=Object.getPrototypeOf(d);return c},mergePropertyInHierarchy:function(a,b){return this.merge(this.valuesInPropertyHierarchy(a,b))},deepCopy:function(a){if(!a||"object"!=typeof a)return a;var b=Array.isArray(a)?Array(a.length):{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=e.deepCopy(a[c]));return b},typeStringOf:function(a){return null===a?"null":"undefined"==typeof a?"undefined":a.constructor.name},shortPrintStringOf:function(a){function b(a,b,d,e){a.constructor.name===b&&(c+=d,(a.length||Object.keys(a).length)&&(c+="..."),c+=e)}if(!this.isMutableType(a))return this.safeToString(a);if("Object"!==a.constructor.name&&!Array.isArray(a)&&a.constructor.name)return a.constructor.name?a.constructor.name:Object.prototype.toString.call(a).split(" ")[1].split("]")[0];var c="";return b(a,"Object","{","}"),b(a,"Array","[","]"),c},isMutableType:function(a){var b=["null","undefined","Boolean","Number","String"];return-1===b.indexOf(this.typeStringOf(a))},safeToString:function(a){try{return(a?a.toString():String(a)).replace("\n","")}catch(b){return"<error printing object>"}},asObject:function(a){switch(typeof a){case"string":return new String(a);case"boolean":return new Boolean(a);case"number":return new Number(a);default:return a}}},f=(a.properties={all:function(a,b){var c=[];for(var d in a)!a.__lookupGetter__(d)&&"function"==typeof a[d]||(b?!b(d,a):0)||c.push(d);return c},allOwnPropertiesOrFunctions:function(a,b){return Object.getOwnPropertyNames(a).reduce(function(c,d){return(b?b(a,d):!0)&&c.push(d),c},[])},own:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&(a.__lookupGetter__(c)||"function"!==a[c])&&b.push(c);return b},forEachOwn:function(a,b,c){var d=[];for(var e in a)if(a.hasOwnProperty(e)){var f=a[e];"function"!==f&&d.push(b.call(c||this,e,f))}return d},nameFor:function(a,b){for(var c in a)if(a[c]===b)return c;return void 0},values:function(a){var b=[];for(var c in a)b.push(a[c]);return b},ownValues:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},any:function(a,b){for(var c in a)if(b(a,c))return!0;return!1},allProperties:function(a,b){var c=[];for(var d in a)(b?b(a,d):!0)&&c.push(d);return c},hash:function(a){return Object.keys(a).sort().join("").hashCode()}},a.Path=function h(a,b){return a instanceof h?a:this instanceof h?(b&&this.setSplitter(b),this.fromPath(a)):new h(a,b)});e.extend(f,{superclass:Object,type:"Path",categories:{}}),e.extend(f.prototype,{isPathAccessor:!0,splitter:".",fromPath:function(a){return e.isString(a)&&""!==a&&a!==this.splitter?(this._parts=a.split(this.splitter),this._path=a):e.isArray(a)?(this._parts=[].concat(a),this._path=a.join(this.splitter)):(this._parts=[],this._path=""),this},setSplitter:function(a){return a&&(this.splitter=a),this},parts:function(){return this._parts},size:function(){return this._parts.length},slice:function(a,b){return f(this.parts().slice(a,b))},normalizePath:function(){return this._path},isRoot:function(a){return 0===this._parts.length},isIn:function(a){if(this.isRoot())return!0;var b=this.get(a,-1);return b&&b.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(a){return a&&a.isPathAccessor&&this.parts().equals(a.parts())},isParentPathOf:function(a){a=a&&a.isPathAccessor?a:f(a);for(var b=this.parts(),c=a.parts(),d=0;d<b.length;d++)if(b[d]!=c[d])return!1;return!0},relativePathTo:function(a){return a=f(a),this.isParentPathOf(a)?a.slice(this.size(),a.size()):void 0},del:function(a){if(this.isRoot())return!1;for(var b=a,c=0;c<this._parts.length-1;c++){var d=this._parts[c];if(!b.hasOwnProperty(d))return!1;b=b[d]}return delete b[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(a,b,c){if(this.isRoot())return c(null,null);for(var d=a,e=0;e<this._parts.length-1;e++){var f=this._parts[e];if(!d.hasOwnProperty(f)||"object"!=typeof d[f]&&"function"!=typeof d[f]){if(!b)return c(null,f);d=d[f]={}}else d=d[f]}return c(d,this._parts[this._parts.length-1])},set:function(a,b,c){return this.withParentAndKeyDo(a,c,function(a,c){return a?a[c]=b:void 0})},defineProperty:function(a,b,c){return this.withParentAndKeyDo(a,c,function(a,c){return a?Object.defineProperty(a,c,b):void 0})},get:function(a,b){var c=b?this._parts.slice(0,b):this._parts;return c.reduce(function(a,b){return a?a[b]:a},a)},concat:function(a,b){return f(this.parts().concat(f(a,b).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"Path("+Objects.inspect(this.parts())+")"},watch:function(b){if(b&&!this.isRoot()){var c=b.target,d=this.get(c,-1),e=a.arr.last(this.parts()),f="propertyWatcher$"+e,g=d&&d.hasOwnProperty(f),h=b.uninstall,i=(b.haltWhenChanged,b.showStack),j=d.__lookupGetter__(e),k=d.__lookupSetter__(e);if(c&&e&&d){if(h){if(!g)return;delete d[e],d[e]=d[f],delete d[f];var l="Watcher for "+d+"."+e+" uninstalled";return void show(l)}if(g){var l="Watcher for "+d+"."+e+" already installed";return void show(l)}if(j||k){var l=d+'["'+e+'"] is a getter/setter, watching not support';return console.log(l),void("undefined"==typeof show&&show(l))}d[f]=d[e],d.__defineSetter__(e,function(a){var c=d[f];b.onSet&&b.onSet(a,c);var g=d+"."+e+" changed: "+c+" -> "+a;return i&&(g+="\n"+("undefined"!=typeof lively?lively.printStack():console.trace())),b.verbose&&(console.log(g),"undefined"!=typeof show&&show(g)),d[f]=a}),d.__defineGetter__(e,function(){return b.onGet&&b.onGet(d[f]),d[f]});var l="Watcher for "+d+"."+e+" installed";console.log(l),"undefined"!=typeof show&&show(l)}}},debugFunctionWrapper:function(a){var b=a.target,c=this.get(b,-1),d=this.parts().last(),e=a.uninstall,f=(void 0===a.haltWhenChanged?!0:a.haltWhenChanged,a.showStack),g=c&&d&&c[d],h=g&&g.isDebugFunctionWrapper;if(b&&d&&g&&c){if(e){if(!h)return;c[d]=c[d].debugTargetFunction;var i="Uninstalled debugFunctionWrapper for "+c+"."+d;return console.log(i),"undefined"!=typeof show&&show(i),void show(i)}if(h){var i="debugFunctionWrapper for "+c+"."+d+" already installed";return console.log(i),void("undefined"!=typeof show&&show(i))}var j=c[d]=g.wrap(function(b){var e=Array.from(arguments);return f&&show(lively.printStack()),a.verbose&&show(d+" called"),e.shift().apply(c,e)});j.isDebugFunctionWrapper=!0,j.debugTargetFunction=g;var i="debugFunctionWrapper for "+c+"."+d+" installed";console.log(i),"undefined"!=typeof show&&show(i)}}})}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(a){"use strict";var b=(a.arrNative={sort:function(a){a||(a=function(a,b){return b>a?-1:a>b?1:0});for(var b=(this.length,[]),c=0;c<this.length;c++){for(var d=!1,e=0;e<b.length;e++)if(1===a(b[e],this[c])){d=!0,b[e+1]=b[e],b[e]=this[c];break}d||b.push(this[c])}return b},filter:function(a,b){for(var c=[],d=0;d<this.length;d++)if(this.hasOwnProperty(d)){var e=this[d];a.call(b,e,d)&&c.push(e)}return c},forEach:function(a,b){for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)},some:function(a,b){return void 0!==this.detect(a,b)},every:function(a,b){for(var c=!0,d=0,e=this.length;e>d&&(c=c&&!!a.call(b,this[d],d),c);d++);return c},map:function(a,b){var c=[];return this.forEach(function(d,e){c.push(a.call(b,d,e))}),c},reduce:function(a,b,c){var d=0;arguments.hasOwnProperty(1)||(d=1,b=this[0]);for(var e=d;e<this.length;e++)b=a.call(c,b,this[e],e,this);return b},reduceRight:function(a,b,c){var d=this.length-1;arguments.hasOwnProperty(1)||(d--,b=this[this.length-1]);for(var e=d;e>=0;e--)b=a.call(c,b,this[e],e,this);return b}},a.arr={range:function(a,b,c){c=c||1;for(var d=[],e=a;b>=e;e+=c)d.push(e);return d},from:function(a){if(!a)return[];if(Array.isArray(a))return a;if(a.toArray)return a.toArray();for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c},withN:function(a,b){for(var c=new Array(a);a>0;)c[--a]=b;return c},genN:function(a,b){for(var c=new Array(a);a>0;)c[--a]=b(a);return c},filter:function(a,b,c){return a.filter(b,c)},detect:function(a,b,c){for(var d,e=0,f=a.length;f>e;e++)if(d=a[e],b.call(c,d,e))return d;return void 0},filterByKey:function(a,b){return a.filter(function(a){return!!a[b]})},grep:function(a,b,c){return"string"==typeof b&&(b=new RegExp(b,"i")),a.filter(b.test.bind(b))},mask:function(a,b){return a.filter(function(a,c){return!!b[c]})},reject:function(a,b,c){function d(a,d){return!b.call(c,a,d)}return a.filter(d)},rejectByKey:function(a,b){return a.filter(function(a){return!a[b]})},without:function(a,b){return a.filter(function(a){return a!==b})},withoutAll:function(a,b){return a.filter(function(a){return-1===b.indexOf(a)})},uniq:function(a,b){return a.reduce(function(a,c,d){return(0===d||(b?a.last()!=c:-1===a.indexOf(c)))&&a.push(c),a},[])},uniqBy:function(a,c,d){for(var e=b.clone(a),f=0;f<e.length;f++)for(var g=a[f],h=f+1;h<e.length;h++)c.call(d,g,e[h])&&(b.removeAt(e,h),h--);return e},compact:function(a){return a.filter(function(a){return!!a})},mutableCompact:function(a){for(var b=0,c=0,d=a.length;d>b;)a.hasOwnProperty(b)&&(a[c++]=a[b]),b++;for(;c++<d;)a.pop();return a},forEach:function(a,b,c){return a.forEach(b,c)},zip:function(){var a=b.from(arguments),c=a.shift(),d="function"==typeof b.last(a)?a.pop():function(a){return a},e=[c].concat(a).map(b.from);return c.map(function(a,c){return d(b.pluck(e,c),c)})},flatten:function g(a){return a.reduce(function(a,b){return a.concat(Array.isArray(b)?g(b):[b])},[])},flatmap:function(a,b,c){for(var d=[],e=0;e<a.length;e++)d.push.apply(d,b.call(c,a[e],e));return d},interpose:function(a,b){return a.reduce(function(a,c){return a.length>0&&a.push(b),a.push(c),a},[])},delimWith:function(a,c){return b.interpose(a,c)},map:function(a,b,c){return a.map(b,c)},invoke:function(a,b,c,d,e,f,g,h){return a.map(function(a){return a[b](c,d,e,f,g,h)})},pluck:function(a,b){return a.map(function(a){return a[b]})},reduce:function(a,b,c,d){return a.reduce(b,c,d)},reduceRight:function(a,b,c,d){
return a.reduceRight(b,c,d)},isArray:Array.isArray,include:function(a,b){return-1!==a.indexOf(b)},some:function(a,b,c){return a.some(b,c)},every:function(a,b,c){return a.every(b,c)},equals:function(a,b){var c=a.length;if(!b||c!==b.length)return!1;for(var d=0;c>d;d++){if(a[d]&&b[d]&&a[d].equals&&b[d].equals){if(a[d].equals(b[d]))continue;return!1}if(a[d]!=b[d])return!1}return!0},sort:function(a,b){return a.sort(b)},sortBy:function(a,c,d){return b.pluck(a.map(function(a,b){return{value:a,criteria:c.call(d,a,b)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}),"value")},sortByKey:function(a,c){return b.sortBy(a,function(a){return a[c]})},reverse:function(a){return a.reverse()},reversed:function(a){return b.clone(a).reverse()},reMatches:function(a,b,c){return c=c||String,a.map(function(a){return c(a).match(b)})},first:function(a){return a[0]},last:function(a){return a[a.length-1]},intersect:function(a,c){return b.uniq(a).filter(function(a){return c.indexOf(a)>-1})},union:function(a,c){for(var d=b.clone(a),e=0;e<c.length;e++){var f=c[e];-1===d.indexOf(f)&&d.push(f)}return d},pushAt:function(a,b,c){a.splice(c,0,b)},removeAt:function(a,b){a.splice(b,1)},remove:function(a,c){var d=a.indexOf(c);return d>=0&&b.removeAt(a,d),c},pushAll:function(a,b){for(var c=0;c<b.length;c++)a.push(b[c]);return a},pushAllAt:function(a,b,c){a.splice.apply(a,[c,0].concat(b))},pushIfNotIncluded:function(a,c){b.include(a,c)||a.push(c)},replaceAt:function(a,b,c){a.splice(c,1,b)},clear:function(a){return a.length=0,a},doAndContinue:function(a,b,c,d){return c=c||Functions.Null,d=d||("undefined"!=typeof window?window:global),b=b||function(a,b,c){b.call(d,a,c)},a.reduceRight(function(a,c,e){return function(){b.call(d,a,c,e)}},c)()},nestedDelay:function(a,b,c,d,e,f){return d=d||function(){},a.clone().reverse().reduce(function(a,d,g){return function(){b.call(e||("undefined"!=typeof window?window:global),d,g),f&&g%f!==0?a():a.delay(c)}},d)()},forEachShowingProgress:function(){var a,b,c,d,e,f=Array.from(arguments),g=f.shift(),h=g.length,i=!1;if(1===f.length?(a=f[0].progressBar,b=f[0].iterator,c=f[0].labelFunction,d=f[0].whenDone,e=f[0].context):(a=f[0],b=f[1],c=f[2],d=f[3],e=f[4]),e||(e="undefined"!=typeof window?window:global),c||(c=function(a){return a}),!a){i=!0;var j="undefined"!=typeof window?window:global,k=j.lively&&lively.morphic&&lively.morphic.World.current();a=k?k.addProgressBar():{setValue:function(a){},setLabel:function(){},remove:function(){}}}return a.setValue(0),g.reduceRight(function(d,f,g){return function(){try{a.setValue(g/h),c&&a.setLabel(c.call(e,f,g)),b.call(e,f,g)}catch(i){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",g,f,i,i.stack)}d.delay(0)}},function(){a.setValue(1),i&&function(){a.remove()}.delay(0),d&&d.call(e)})(),g},swap:function(a,b,c){0>b&&(b=a.length+b),0>c&&(c=a.length+c);var d=a[b];return a[b]=a[c],a[c]=d,a},rotate:function(a,b){return b=b||1,a.slice(b).concat(a.slice(0,b))},groupBy:function(a,b,d){return c.fromArray(a,b,d)},groupByKey:function(a,c){return b.groupBy(a,function(a){return a[c]})},partition:function(a,b,c){b=b||function(a){return a};var d=[],e=[];return a.forEach(function(a,f){(b.call(c,a,f)?d:e).push(a)}),[d,e]},batchify:function(a,b,c){function d(a,e){if(!e.length)return[a,[]];var f=e[0],g=e.slice(1),h=a.concat([f]);if(b.call(c,h))return d(h,g);var i=d(a,g);return[i[0],[f].concat(i[1])]}function e(a,b){if(!b.length)return a;var c=d([],b);if(!c[0].length)throw new Error("Batchify constrained does not ensure consumption of at least one item per batch!");return e(a.concat([c[0]]),c[1])}return e([],a)},toTuples:function(a,c){return c=c||1,b.range(0,Math.ceil(a.length/c)-1).map(function(b){return a.slice(b*c,b*c+c)},a)},take:function(a,b){return a.slice(0,b)},drop:function(a,b){return a.slice(b)},takeWhile:function(a,b,c){for(var d=0;d<a.length&&b.call(c,a[d],d);d++);return a.slice(0,d)},dropWhile:function(a,b,c){for(var d=0;d<a.length&&b.call(c,a[d],d);d++);return a.slice(d)},shuffle:function(a){var c=b.range(0,a.length-1);return a.reduce(function(a,b,d){var e=c.splice(Math.round(Math.random()*(c.length-1)),1);return a[e]=b,a},Array(a.length))},max:function(a,b,c){b=b||function(a){return a};var d;return a.reduce(function(a,e,f){var g=b.call(c,e,f);return"number"!=typeof g||a>=g?a:(d=e,g)},-(1/0)),d},min:function(a,c,d){return c=c||function(a){return a},b.max(a,function(a,b){return-c.call(d,a,b)})},sum:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},count:function(a,b){return a.reduce(function(a,c){return c===b?a+1:a},0)},size:function(a){return a.length},histogram:function(a,c){if("undefined"==typeof c||"number"==typeof c){var d=c||function(){return Math.ceil(Math.log(a.length)/Math.log(2)+1)}(a),e=Math.ceil(Math.round(a.length/d));return b.range(0,d-1).map(function(b){return a.slice(b*e,(b+1)*e)})}if(c instanceof Array){var f=c;return a.reduce(function(a,b){if(b<f[1])return a[0].push(b),a;for(var c=1;c<f.length;c++)if(b>=f[c]&&(!f[c+1]||b<=f[c+1]))return a[c].push(b),a;throw new Error(Strings.format("Histogram creation: Cannot group data %s into thresholds %o",b,f))},b.range(1,f.length).map(function(){return[]}))}},clone:function(a){return[].concat(a)},toArray:function(a){return b.from(a)},each:function(a,b,c){return a.forEach(b,c)},all:function(a,b,c){return a.every(b,c)},any:function(a,b,c){return a.some(b,c)},collect:function(a,b,c){return a.map(b,c)},findAll:function(a,b,c){return a.filter(b,c)},inject:function(a,b,c,d){return d&&(c=c.bind(d)),a.reduce(c,b)},mapAsyncSeries:function(b,c,d){function e(a,b){if(!g&&(a||b)){g=!0;try{d(a,f)}catch(c){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(c.stack||c))}}}var f=[],g=!1;return b.reduceRight(function(b,d,h){return g?void 0:function(g,i){if(g)return e(g);h>0&&f.push(i);try{c(d,h,a.fun.once(b))}catch(j){e(j)}}},function(a,b){f.push(b),e(a,!0)})()},mapAsync:function(b,c,d,e){function f(){for(;l<c.parallel&&k<b.length;)m[k++]()}function g(a,c){if(!(i.indexOf(a)>-1||(i.push(a),l--,j))){if(!c&&i.length<b.length)return void f();j=!0;try{e&&e(c,h)}catch(d){console.error("Error in mapAsync - main callback invocation error:\n"+(d.stack||d))}}}if("function"==typeof c&&(e=d,d=c,c=null),c=c||{},!b.length)return e&&e(null,[]);c.parallel||(c.parallel=1/0);var h=[],i=[],j=!1,k=0,l=0,m=b.map(function(b,c){return function(){l++;try{d(b,c,a.fun.once(function(a,b){h[c]=a||b,g(c,a)}))}catch(e){g(c,e)}}});return f()}}),c=a.Group=function(){};c.by=a.arr.groupBy,c.fromArray=function(a,b,d){for(var e=new c,f=0,g=a.length;g>f;f++){var h=b.call(d,a[f],f);e[h]||(e[h]=[]),e[h].push(a[f])}return e},c.prototype.toArray=function(){return this.reduceGroups(function(a,b,c){return a.concat([c])},[])},c.prototype.forEach=function(a,b){var c=this;return Object.keys(c).forEach(function(d){c[d].forEach(a.bind(b,d))}),c},c.prototype.forEachGroup=function(a,b){var c=this;return Object.keys(c).forEach(function(d){a.call(b,d,c[d])}),c},c.prototype.map=function(a,b){var d=new c;return this.forEachGroup(function(c,e){d[c]=e.map(a.bind(b,c))}),d},c.prototype.mapGroups=function(a,b){var d=new c;return this.forEachGroup(function(c,e){d[c]=a.call(b,c,e)}),d},c.prototype.keys=function(){return Object.keys(this)},c.prototype.reduceGroups=function(a,b,c){return this.forEachGroup(function(d,e){b=a.call(c,b,d,e)}),b},c.prototype.count=function(){return this.reduceGroups(function(a,b,c){return a[b]=c.length,a},{})};var d=a.grid={get:function(a,b,c){var d=a[b];return d?d[c]:void 0},set:function(a,b,c,d){var e=a[b];return e&&(e[c]=d),d},getRow:function(a,b){return a[b]},setRow:function(a,b,c){return a[b]=c},getCol:function(a,b){return a.reduce(function(a,c){return a.push(c[b]),a},[])},setCol:function(a,b,c){return a.map(function(a,d){return a[b]?a[b]=c[d]:void 0})},create:function(a,c,d){for(var e=new Array(a);a>0;)e[--a]=b.withN(c,d);return e},mapCreate:function(a,b,c,d){for(var e=new Array(a),f=0;a>f;f++){e[f]=new Array(b);for(var g=0;b>g;g++)e[f][g]=c.call(d||this,f,g)}return e},forEach:function(a,b,c){a.forEach(function(a,d){a.forEach(function(a,e){b.call(c||this,a,d,e)})})},map:function(a,b,c){var d=new Array(a.length);return a.forEach(function(a,e){d[e]=new Array(a.length),a.forEach(function(a,f){d[e][f]=b.call(c||this,a,e,f)})}),d},toObjects:function(a){for(var b=a[0],c=new Array(a.length-1),d=1;d<a.length;d++)for(var e=c[d-1]={},f=0;f<b.length;f++)e[b[f]]=a[d][f];return c},tableFromObjects:function(a,b){Array.isArray(a)||(a=[a]);var c=[[]],d=c[0],e=a.reduce(function(a,b){return a.concat([Object.keys(b).reduce(function(a,c){var e=d.indexOf(c);return-1===e&&(e=d.length,d.push(c)),a[e]=b[c],a},[])])},[]);return b=1===arguments.length?null:b,e.forEach(function(a){for(var c=0;c<d.length;c++)a[c]||(a[c]=b)}),c.concat(e)},benchmark:function(){var b,c=[],e=d.create(1e3,200,1),f=0;b=lively.lang.fun.timeToRunN(function(){d.forEach(e,function(a){f+=a})},10),c.push(a.string.format("grid.forEach: %ims",b));var g;b=Functions.timeToRunN(function(){g=d.map(d,function(a,b,c){return b+c+Math.round(100*Math.random())})},10),c.push(a.string.format("grid.map: %ims",b));var h=d.create(1e3,2e3);return b=Functions.timeToRunN(function(){h=new Array(1e3);for(var a=0;1e3>a;a++)h[a]=new Array(2e3);d.forEach(e,function(a,b,c){h[b][c]=b+c+Math.round(100*Math.random())})},10),c.push("grid.map with forEach: "+b+"ms"),c.push("--= 2012-09-22 =--\ngrid.forEach: 14.9ms\ngrid.map: 19.8ms\ngrid.map with forEach: 38.7ms\n"),c.join("\n")}},e=a.interval={isInterval:function(a){return Array.isArray(a)&&a.length>=2&&a[0]<=a[1]},sort:function(a){return a.sort(e.compare)},compare:function(a,b){return a[0]<b[0]?a[1]<b[0]?-3:a[1]===b[0]?-2:-1:a[0]===b[0]?a[1]===b[1]?0:a[1]<b[1]?-1:1:-1*e.compare(b,a)},coalesce:function(a,b,c){var d=this.compare(a,b);switch(d){case-3:case 3:return null;case 0:return c&&c(a,b,a),a;case 2:case 1:var e=a;a=b,b=e;case-2:case-1:var f=[a[0],Math.max(a[1],b[1])];return c&&c(a,b,f),f;default:throw new Error("Interval compare failed")}},coalesceOverlapping:function(a,b){for(var c=[],d=a.length;d>0;){var f=a.shift();d--;for(var g=0;d>g;g++){var h=a[g],i=e.coalesce(f,h,b);i&&(f=i,a.splice(g,1),d--,g--)}c.push(f)}return this.sort(c)},mergeOverlapping:function(a,b,c){for(var d=[];a.length>0;){var f=a.shift(),g=b.map(function(a){var b=e.compare(f,a);return-1===b||0===b||1===b});d.push(c(f,g[0])),d.push(f)}return d},intervalsInRangeDo:function(a,b,c,d,e,f){f=f||("undefined"!=typeof window?window:global),c=this.sort(c);for(var g,h=[];g=c.shift();)if(!(g[1]<a)){g[0]<a&&(g=Array.prototype.slice.call(g),g[0]=a);var i=b<g[0]?b:g[0];if(i>a&&h.push(d.call(f,[a,i],!0)),b<g[1]&&(g=Array.prototype.slice.call(g),g[1]=b),g[0]===g[1]){var j;e&&(j=h.slice(-1)[0])&&e.call(f,j,g,j)}else h.push(d.call(f,g,!1));if(a=g[1],a>=b)break}return b>a&&h.push(d.call(f,[a,b],!0)),h},intervalsInbetween:function(a,b,c){return e.intervalsInRangeDo(a,b,e.coalesceOverlapping(Array.prototype.slice.call(c)),function(a,b){return b?a:null}).filter(function(a){return!!a})},mapToMatchingIndexes:function(a,c){var d,e,f=0;return c.map(function(c){for(;(e=a[f])&&e[0]<c[0];)f++;if(e&&e[0]===c[0]){for(d=f;(e=a[d])&&e[1]<c[1];)d++;if(e&&e[1]===c[1])return b.range(f,d)}return[]})},benchmark:function(){function a(a,b,c){return Strings.format("%s: %sms",a,Functions.timeToRunN(function(){e[a].apply(e,b,1e5)},c))}return["Friday, 20. July 2012:","coalesceOverlapping: 0.0003ms","intervalsInbetween: 0.002ms","mapToMatchingIndexes: 0.02ms","vs.\n"+new Date+":",a("coalesceOverlapping",[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1e5),a("intervalsInbetween",[0,10,[[8,10],[0,2],[3,5]]],1e5),a("mapToMatchingIndexes",[Array.range(0,1e3).collect(function(a){return[a,a+1]}),[[4,8],[500,504],[900,1004]]],1e3)].join("\n")}},f=a.arrayProjection={create:function(a,b,c){var d=c||0;return d+b>a.length&&(d-=d+b-a.length),{array:a,from:d,to:d+b}},toArray:function(a){return a.array.slice(a.from,a.to)},originalToProjectedIndex:function(a,b){return b<a.from||b>=a.to?null:b-a.from},projectedToOriginalIndex:function(a,b){return 0>b||b>a.to-a.from?null:a.from+b},transformToIncludeIndex:function(a,b){if(!(b in a.array))return null;var c=0;return b<a.from&&(c=-a.from+b),b>=a.to&&(c=b-a.to+1),0===c?a:f.create(a.array,a.to-a.from,a.from+c)}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(a){"use strict";var b=a.tree={prewalk:function(a,c,d){c(a),(d(a)||[]).forEach(function(a){b.prewalk(a,c,d)})},postwalk:function(a,c,d){(d(a)||[]).forEach(function(a){b.postwalk(a,c,d)}),c(a)},detect:function(c,d,e){if(d(c))return c;var f;return a.arr.detect(e(c)||[],function(a){return f=b.detect(a,d,e)}),f},filter:function(c,d,e){var f=[];return d(c)&&f.push(c),f.concat(a.arr.flatten((e(c)||[]).map(function(a){return b.filter(a,d,e)})))},map:function(c,d,e){var f=[d(c)];return f.concat(a.arr.flatten((e(c)||[]).map(function(a){return b.map(a,d,e)})))},mapTree:function(a,c,d){var e=(d(a)||[]).map(function(a){return b.mapTree(a,c,d)});return c(a,e)}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(a){"use strict";var b=a.obj,c=a.arr,d=a.graph={clone:function(a){var b={};for(var c in a)b[c]=a[c].slice();return b},without:function(a,b){var c={};for(var d in a)b.indexOf(d)>-1||(c[d]=a[d].filter(function(a){return-1===b.indexOf(a)}));return c},hull:function(a,e,f,g){return c.uniq(c.flatten(b.values(d.subgraphReachableBy(a,e,f,g))))},subgraphReachableBy:function(a,b,c,e){e=e||10,c&&(a=d.without(a,c));for(var f=[b],g=0,h={};f.length&&g++<e;)f=f.reduce(function(b,c){return h[c]?b:b.concat(h[c]=a[c]||[])},[]);return h}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(exports){"use strict";function Closure(){this.initialize.apply(this,arguments)}var fun=exports.fun={get Empty(){return function(){}},get K(){return function(a){return a}},get Null(){return function(){return null}},get False(){return function(){return!1}},get True(){return function(){return!0}},get notYetImplemented(){return function(){throw new Error("Not yet implemented")}},all:function(a){var b=[];for(var c in a)a.__lookupGetter__(c)||"function"!=typeof a[c]||b.push(c);return b},own:function(a){var b=[];for(var c in a)!a.__lookupGetter__(c)&&a.hasOwnProperty(c)&&"function"==typeof a[c]&&b.push(c);return b},argumentNames:function(a){if(a.superclass)return[];var b=a.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/);if(!b||!b[1])return[];var c=b[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=c.length||c[0]?c:[]},qualifiedMethodName:function(a){var b="";return a.declaredClass?b+=a.declaredClass+">>":a.declaredObject&&(b+=a.declaredObject+"."),b+(a.methodName||a.displayName||a.name||"anonymous")},extractBody:function(a){var b=String(a).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim(),c=b.split(/\n|\r/).map(function(a){var b=a.match(/^\s*/);return b&&b[0]}).filter(function(a){return!!a}).reduce(function(a,b){return b.length<a.length?b:a});return b.replace(new RegExp("^"+c,"gm"),"")},timeToRun:function(a){var b=Date.now();return a(),Date.now()-b},timeToRunN:function(a,b){for(var c=Date.now(),d=0;b>d;d++)a();return(Date.now()-c)/b},delay:function(a,b){var c=Array.prototype.slice.call(arguments),d=c.shift(),b=1e3*c.shift();return setTimeout(function(){return d.apply(d,c)},b)},throttle:function(a,b){var c,d,e,f,g,h,i=fun.debounce(b,function(){g=f=!1});return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||b.apply(e,f)};c&&!d&&b.apply(e,f),clearTimeout(d),d=setTimeout(g,a)}},throttleNamed:function(a,b,c){function d(){fun.debounceNamed(a,b,function(){delete e[a]})(),c.apply(this,arguments)}var e=fun._throttledByName||(fun._throttledByName={});return e[a]?e[a]:e[a]=fun.throttle(d,b)},debounceNamed:function(a,b,c,d){function e(){delete f[a],c.apply(this,arguments)}var f=fun._debouncedByName||(fun._debouncedByName={});return f[a]?f[a]:f[a]=fun.debounce(b,e,d)},createQueue:function(a,b){var c=fun._queues||(fun._queues={}),d=c[a]||(c[a]={_workerActive:!1,worker:b,tasks:[],drain:null,push:function(a){d.tasks.push(a),d.activateWorker()},pushAll:function(a){a.forEach(function(a){d.tasks.push(a)}),d.activateWorker()},pushNoActivate:function(a){d.tasks.push(a)},handleError:function(a){a&&console.error("Error in queue: "+a)},activateWorker:function(){function b(a){d.handleError(a),d.activateWorker()}var e=d.tasks,f=d._workerActive;if(0===e.length)f&&(d._workerActive=!1,"function"==typeof d.drain&&d.drain()),delete c[a];else{f||(d._workerActive=!0);try{d.worker(e.shift(),b)}catch(g){b(g)}}}});return d},workerWithCallbackQueue:function(a,b,c){function d(){k&&clearTimeout(k),i=!0,delete f[a]}function e(b){i||(d(),g.callbacks.forEach(function(c){try{c.apply(null,b)}catch(d){console.error("Error when invoking callbacks in queueUntil ["+a+"]:\n"+String(d.stack||d))}}))}var f=fun._queueUntilCallbacks||(fun._queueUntilCallbacks={}),g=f[a],h=!!g;if(h)return g;var i=!1,j=!1;if(c)var k=setTimeout(function(){i||e([new Error("timeout")])},c);return g=f[a]={callbacks:[],cancel:function(){j=!0,d()},whenDone:function(a){return g.callbacks.push(a),g}},setTimeout(function(){if(!j)try{b(function(){e(arguments)})}catch(a){e([a])}},0),g},composeAsync:function(){var a,b=Array.prototype.slice,c=b.call(arguments);return c.reverse().reduce(function(c,d){var e=!1;return function(){function f(){e=!0;var d=b.call(arguments),f=d.shift();f?a&&a(f):c.apply(null,d)}var g=b.call(arguments);if(!a){for(;g.length&&"function"!=typeof g[g.length-1];)g.pop();a="function"==typeof g[g.length-1]?g.pop():function(){}}try{d.apply(this,g.concat([f]))}catch(h){console.error("composeAsync: ",h.stack||h),!e&&a&&a(h)}}},function(){a.apply(null,[null].concat(b.call(arguments)))})},compose:function(){var a=Array.prototype.slice.call(arguments);return a.reverse().reduce(function(a,b){return function(){return a(b.apply(this,arguments))}},function(a){return a})},flip:function(a){return function(){var b=Array.prototype.slice.call(arguments),c=[b[1],b[0]].concat(b.slice(2));return a.apply(null,c)}},waitFor:function(a,b,c){var d=Date.now(),e=50;c||(c=b,b=a,a=void 0),function f(){if(b())return c();if(a){var g=Date.now()-d,h=a-g;if(0>=h)return c(new Error("timeout"));e>h&&(e=h)}setTimeout(f,e)}()},waitForAll:function(a,b,c){function d(a,b,d,g){if(f.length){var h=null,i=f.indexOf(a);i>-1&&f.splice(i,1),d?(f.length=0,h=new Error("in waitForAll at"+("number"==typeof b?" "+b:"")+": \n"+(d.stack||String(d)))):g&&(e[b]=g),f.length||setTimeout(function(){c(h,e)},0)}}c||(c=b,b=a,a=null),a=a||{};var e=b.map(function(){return null});if(!b.length)return void c(null,e);var f=Array.prototype.slice.call(b);b.forEach(function(a,b){try{a(function(){var c=Array.prototype.slice.call(arguments),e=c.shift();d(a,b,e,c)})}catch(c){d(a,b,c,null)}}),a.timeout&&setTimeout(function(){if(f.length){var a=e.map(function(a,b){return null===a&&b}).filter(function(a){return"number"==typeof a}).join(", "),b=new Error("waitForAll timed out, functions at "+a+" not done");d(null,null,b,null)}},a.timeout)},curry:function(a,b,c,d){function e(){return a.apply(this,f.concat(Array.prototype.slice.call(arguments)))}if(arguments.length<=1)return arguments[0];var f=Array.prototype.slice.call(arguments),a=f.shift();return e.isWrapper=!0,e.originalFunction=a,e},wrap:function(a,b){var c=a,d=function(){var a=Array.prototype.slice.call(arguments),d=b.isWrapper?a:[c.bind(this)].concat(a);return b.apply(this,d)};return d.isWrapper=!0,d.originalFunction=c,d},getOriginal:function(a){for(;a.originalFunction;)a=a.originalFunction;return a},wrapperChain:function(a){var b=[];do b.push(a),a=a.originalFunction;while(a);return b},replaceMethodForOneCall:function(a,b,c){c.originalFunction=a[b];var d=a.hasOwnProperty(b);return a[b]=function(){return d?a[b]=c.originalFunction:delete a[b],c.apply(this,arguments)},a},once:function(a){if(!a)return void 0;if("function"!=typeof a)throw new Error("fun.once() expecting a function");var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments))}},either:function(){var a=Array.prototype.slice.call(arguments),b=!1;return a.map(function(a){return function(){return b?void 0:(b=!0,a.apply(this,arguments))}})},eitherNamed:function(a,b){var c=Array.prototype.slice.call(arguments),d=fun._eitherNameRegistry||(fun._eitherNameRegistry={}),a=c.shift(),e=d[a]||(d[a]={wasCalled:!1,callsLeft:0});return e.callsLeft++,function(){return e.callsLeft--,e.callsLeft<=0&&delete d[a],e.wasCalled?void 0:(e.wasCalled=!0,b.apply(this,arguments))}},evalJS:function(src){return eval(src)},fromString:function(a){return fun.evalJS("("+a.toString()+");")},asScript:function(a,b){return Closure.fromFunction(a,b).recreateFunc()},asScriptOf:function(a,b,c,d){var e=c||a.name;if(!e)throw Error("Function that wants to be a script needs a name: "+this);var f=Object.getPrototypeOf(b),g={"this":b};if(d&&(g=exports.obj.merge([g,d])),f&&f[e]){var h=function(){try{return Object.getPrototypeOf(b)[e].apply(b,arguments)}catch(a){return void 0!==typeof $world?$world.logError(a,"Error in $super call"):alert("Error in $super call: "+a+"\n"+a.stack),null}};g.$super=Closure.fromFunction(h,{obj:b,name:e}).recreateFunc()}return fun.addToObject(fun.asScript(a,g),b,e)},addToObject:function(a,b,c){a.displayName=c;var d=b.attributeConnections?b.attributeConnections.filter(function(a){return"update"===a.getSourceAttrName()}):[];return d&&d.forEach(function(a){a.disconnect()}),b[c]=a,a.declaredObject=exports.obj.safeToString(b),"undefined"!=typeof lively&&exports.obj&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(b,c,{declaredObject:exports.obj.safeToString(b)}),d&&d.forEach(function(a){a.connect()}),a},binds:function(a,b){return Closure.fromFunction(a,b||{}).recreateFunc()},setLocalVarValue:function(a,b,c){a.hasLivelyClosure&&(a.livelyClosure.funcProperties[b]=c)},getVarMapping:function(a){return a.hasLivelyClosure?a.livelyClosure.varMapping:a.isWrapper?a.originalFunction.varMapping:a.varMapping?a.varMapping:{}},setProperty:function(a,b,c){a[b]=c,a.hasLivelyClosure&&(a.livelyClosure.funcProperties[b]=c)},functionNames:function(a){for(var b=[],c=a.prototype;c;)b=Object.keys(c).reduce(function(a,b){return"function"==typeof c[b]&&-1===a.indexOf(b)&&a.push(b),a},b),c=Object.getPrototypeOf(c);return b},localFunctionNames:function(a){return Object.keys(a.prototype).filter(function(b){return"function"==typeof a.prototype[b]})},logErrors:function(a,b){var c=function(c){var d=Array.prototype.slice.call(arguments);d.shift();try{return c.apply(a,d)}catch(e){if("undefined"!=typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(e),e;throw b?console.warn("ERROR: %s.%s(%s): err: %s %s",a,b,d,e,e.stack||""):console.warn("ERROR: %s %s",e,e.stack||""),"undefined"!=typeof logStack&&logStack(),"undefined"!=typeof printObject&&console.warn("details: "+printObject(e)),e}};c.methodName="$logErrorsAdvice";var d=fun.wrap(a,c);return d.originalFunction=a,d.methodName="$logErrorsWrapper",d},logCompletion:function(a,b){var c=function(c){var d=Array.prototype.slice.call(arguments);d.shift();try{var e=c.apply(a,d)}catch(f){throw console.warn("failed to load "+b+": "+f),"undefined"!=typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),f}return console.log("completed "+b),e};c.methodName="$logCompletionAdvice::"+b;var d=fun.wrap(a,c);return d.methodName="$logCompletionWrapper::"+b,d.originalFunction=a,d},logCalls:function(a,b){var c=a,d=function(d){var f=Array.prototype.slice.call(arguments);return f.shift(),e=d.apply(a,f),b?console.warn("%s(%s) -> %s",fun.qualifiedMethodName(c),f,e):console.log("%s(%s) -> %s",fun.qualifiedMethodName(c),f,e),e};d.methodName="$logCallsAdvice::"+fun.qualifiedMethodName(a);var e=fun.wrap(a,d);return e.originalFunction=a,e.methodName="$logCallsWrapper::"+fun.qualifiedMethodName(a),e},traceCalls:function(a,b){var c=function(c){var d=Array.prototype.slice.call(arguments);d.shift(),b.push(d);var e=c.apply(a,d);return b.pop(),e};return fun.wrap(a,c)},webkitStack:function(){try{throw new Error}catch(a){return String(a.stack).split(/\n/).slice(2).map(function(a){return a.replace(/^\s*at\s*([^\s]+).*/,"$1")}).join("\n")}}};exports.Closure=Closure,exports.obj.extend(Closure,{superclass:Object,type:"Closure",categories:{}}),Closure.prototype.isLivelyClosure=!0,Closure.prototype.doNotSerialize=["originalFunc"],Closure.prototype.initialize=function(a,b,c,d){this.originalFunc=a,this.varMapping=b||{},this.source=c,this.setFuncProperties(a||d)},Closure.prototype.setFuncSource=function(a){this.source=a},Closure.prototype.getFuncSource=function(){return this.source||String(this.originalFunc)},Closure.prototype.hasFuncSource=function(){return this.source&&!0},Closure.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()},Closure.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={}),this.funcProperties},Closure.prototype.setFuncProperties=function(a){var b=this.getFuncProperties();for(var c in a)a.hasOwnProperty(c)&&"_cachedAst"!=c&&(b[c]=a[c])},Closure.prototype.lookup=function(a){return this.varMapping[a]},Closure.prototype.parameterNames=function(a){var b=/function\s*\(([^\)]*)\)/,c=b.exec(a);if(!c||!c[1])return[];var d=c[1];if(0==d.length)return[];var e=d.split(",").map(function(a){return exports.string.removeSurroundingWhitespaces(a)},this);return e},Closure.prototype.firstParameter=function(a){return this.parameterNames(a)[0]||null},Closure.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)},Closure.prototype.recreateFuncFromSource=function(a,b){var c=[],d=!1,e="$super"===this.firstParameter(a);for(var f in this.varMapping)this.varMapping.hasOwnProperty(f)&&("this"!=f?c.push(f+'=this.varMapping["'+f+'"]'):d=!0);var g=c.length>0?"var "+c.join(",")+";\n":"";if(e&&(g+="(function superWrapperForClosure() { return "),g+="("+a+")",e&&(g+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })"),"undefined"!=typeof lively&&lively.Config&&lively.Config.loadRewrittenCode){module("lively.ast.Rewriting").load(!0);var h="[runtime]";b&&b.sourceModule&&(h=new URL(b.sourceModule.findUri()).relativePathFrom(URL.root));var i=lively.ast.acorn.parse(g),j=lively.ast.Rewriting.rewrite(i,lively.ast.Rewriting.getCurrentASTRegistry(),h),k=j.body[0].block.body.last();k.type="ReturnStatement",k.argument=k.expression,delete k.expression,g="(function() { "+escodegen.generate(j)+"}).bind(this)();"}try{var l=fun.evalJS.call(this,g)||this.couldNotCreateFunc(g);return this.addFuncProperties(l),this.originalFunc=l,"undefined"!=typeof lively&&lively.Config&&lively.Config.loadRewrittenCode&&(l._cachedAst.source=a,l._cachedAst.start++,l._cachedAst.end--),l}catch(m){var n="Cannot create function "+m+" src: "+g;throw console.error(n),new Error(n)}},Closure.prototype.addFuncProperties=function(a){var b=this.getFuncProperties();for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);this.addClosureInformation(a)},Closure.prototype.couldNotCreateFunc=function(a){var b="Could not recreate closure from source: \n"+a;return console.error(b),function(){throw new Error(b)}},Closure.prototype.asFunction=function(){return this.recreateFunc()},Closure.prototype.addClosureInformation=function(a){return a.hasLivelyClosure=!0,a.livelyClosure=this,a},Closure.fromFunction=function(a,b){return new Closure(a,b||{})},Closure.fromSource=function(a,b){return new Closure(null,b||{},a)}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(a){var b=a.string={format:function(){return b.formatFromArray(Array.prototype.slice.call(arguments))},formatFromArray:function(b){function c(a,b){return""+a}function d(a,b){return a.toString()}function e(a,b,c){return c>-1?a.toFixed(c):a.toString()}function f(b,c){return a.obj.inspect(b)}function g(a){for(var b=[],c=j.exec(a);c;c=j.exec(a)){var d=c[8]||c[5],e=d in i?i[d]:f,g=c[3]?parseInt(c[3]):"."==c[4]?-1:0;b.push(a.substr(0,"%"==c[0][0]?c.index:c.index+1)),b.push({appender:e,precision:g}),a=a.substr(c.index+c[0].length)}return a&&b.push(a.toString()),b}var h=b.shift();h||console.log("Error in Strings>>formatFromArray, first arg is undefined");for(var i={s:c,d:d,i:d,f:e,o:f},j=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/,k=g(h),l="",m=0,n=0;n<k.length;++n){var o=k[n];if(o&&"object"==typeof o){var p=b[m++];l+=(o.appender||c)(p,l,o.precision)}else l+=c(o,l)}return l},indent:function(a,b,c){if(!c||0>=c)return a;for(;c>0;)c--,a=b+a;return a},removeSurroundingWhitespaces:function(a){function b(a){for(;a.length>0&&/\s|\n|\r/.test(a[a.length-1]);)a=a.substring(0,a.length-1);return a}function c(a){return a.replace(/^[\n\s]*(.*)/,"$1")}return c(b(a))},quote:function(a){return'"'+a.replace(/"/g,'\\"')+'"'},print:function c(a){if(a&&Array.isArray(a))return"["+a.map(c)+"]";if("string"!=typeof a)return String(a);var b=String(a);return b=b.replace(/\n/g,"\\n\\\n"),b=b.replace(/(")/g,"\\$1"),b='"'+b+'"'},printNested:function(a,c){c=c||0;var d="";return a.forEach(function(a){d+=a instanceof Array?b.printNested(a,c+1):b.indent(a+"\n","  ",c)}),d},pad:function(a,b,c){return c?" ".times(b)+a:a+" ".times(b)},printTable:function(a,c){function d(a){return g?!1:h?!0:c&&Object.isArray(c.align)&&"right"===c.align[a]}var e=[],f=c&&c.separator||" ",g=!c||!c.align||"left"===c.align,h=c&&"right"===c.align;return a.forEach(function(a){a.forEach(function(a,b){void 0===e[b]&&(e[b]=0),e[b]=Math.max(e[b],String(a).length)})}),a.collect(function(a){return a.collect(function(a,c){var f=String(a);return b.pad(f,e[c]-f.length,d(c))}).join(f)}).join("\n")},printTree:function(a,c,d,e){function f(a,h,i){g[h]=b.times(e,a)+c(i,a);var j=d(i,a),k=h+1;if(!j||!j.length)return k;var l=k,m=j.length-1;return j.forEach(function(b,c){k=f(a+1,k,b);for(var d=m===c,h=g[l].split(""),i=a*e.length+1,j=a*e.length+e.length,c=i;j>c;c++)h[c]="-";d&&(h[a*e.length]="\\"),g[l]=h.join(""),d||g.slice(l,k).forEach(function(b,c){var d=b.split("");d[a*e.length]="|",g[l+c]=d.join("")}),l=k}),k}var g=[];return e=e||"  ",f(0,0,a),g.join("\n")},toArray:function(a){return a.split("")},lines:function(a){return a.split(/\n\r?/)},paragraphs:function(a,b){function c(a){return/^\s*$/.test(a)}var d=b?b.sep:"\n\n";return b&&b.keepEmptyLines?a.split("\n").concat("").reduce(function(a,b){var d=a[0],e=a[1];return c(e)===c(b)?e+="\n"+b:(e.length&&d.push(e),e=b),[d,e]},[[],""])[0]:a.split(new RegExp(d+"+"))},nonEmptyLines:function(a){return b.lines(a).compact()},tokens:function(a,b){return a.split(b||/\s+/).filter(function(a){return!/^\s*$/.test(a)})},tableize:function(a,c){c=c||{};for(var d=c.cellSplitter||/\s+/,e=/^\s*$/,f=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0,g=b.lines(a),h=[],i=0;i<g.length;i++){var j=b.tokens(g[i],d);f&&(j=j.map(function(a){if(a.match(e))return a;var b=Number(a);if(!isNaN(b))return b;var c=new Date(a);return isNaN(+c)?a.trim():c})),j.length>0&&h.push(j)}return h},unescapeCharacterEntities:function(a){if("undefined"==typeof document)throw new Error("Cannot unescapeCharacterEntities");var b=document.createElement("div");return b.innerHTML=a,b.textContent},toQueryParams:function(a,b){var c=a.trim().match(/([^?#]*)(#.*)?$/);if(!c)return{};var d=c[1].split(b||"&").inject({},function(a,b){if((b=b.split("="))[0]){var c=decodeURIComponent(b.shift()),d=b.length>1?b.join("="):b[0];void 0!=d&&(d=decodeURIComponent(d)),c in a?(Array.isArray(a[c])||(a[c]=[a[c]]),a[c].push(d)):a[c]=d;
}return a});return d},joinPath:function(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){return"string"==typeof b?a.replace(/\/*$/,"")+"/"+b.replace(/^\/*/,""):a})},newUUID:function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)}).toUpperCase();return a},createDataURI:function(a,b){return b=b||"text/plain","data:"+b+";base64,"+btoa(a)},hashCode:function(a){var b=0,c=a.length;if(0==c)return b;for(var d=0;c>d;d++){var e=a.charCodeAt(d);b=(b<<5)-b+e,b&=b}return b},md5:function(a){function b(a,b,c,d,e,f){return b=l(l(b,a),l(d,f)),l(b<<e|b>>>32-e,c)}function c(a,c,d,e,f,g,h){return b(c&d|~c&e,a,c,f,g,h)}function d(a,c,d,e,f,g,h){return b(c&e|d&~e,a,c,f,g,h)}function e(a,c,d,e,f,g,h){return b(c^d^e,a,c,f,g,h)}function f(a,c,d,e,f,g,h){return b(d^(c|~e),a,c,f,g,h)}function g(a,b){var g=a[0],h=a[1],i=a[2],j=a[3];g=c(g,h,i,j,b[0],7,-680876936),j=c(j,g,h,i,b[1],12,-389564586),i=c(i,j,g,h,b[2],17,606105819),h=c(h,i,j,g,b[3],22,-1044525330),g=c(g,h,i,j,b[4],7,-176418897),j=c(j,g,h,i,b[5],12,1200080426),i=c(i,j,g,h,b[6],17,-1473231341),h=c(h,i,j,g,b[7],22,-45705983),g=c(g,h,i,j,b[8],7,1770035416),j=c(j,g,h,i,b[9],12,-1958414417),i=c(i,j,g,h,b[10],17,-42063),h=c(h,i,j,g,b[11],22,-1990404162),g=c(g,h,i,j,b[12],7,1804603682),j=c(j,g,h,i,b[13],12,-40341101),i=c(i,j,g,h,b[14],17,-1502002290),h=c(h,i,j,g,b[15],22,1236535329),g=d(g,h,i,j,b[1],5,-165796510),j=d(j,g,h,i,b[6],9,-1069501632),i=d(i,j,g,h,b[11],14,643717713),h=d(h,i,j,g,b[0],20,-373897302),g=d(g,h,i,j,b[5],5,-701558691),j=d(j,g,h,i,b[10],9,38016083),i=d(i,j,g,h,b[15],14,-660478335),h=d(h,i,j,g,b[4],20,-405537848),g=d(g,h,i,j,b[9],5,568446438),j=d(j,g,h,i,b[14],9,-1019803690),i=d(i,j,g,h,b[3],14,-187363961),h=d(h,i,j,g,b[8],20,1163531501),g=d(g,h,i,j,b[13],5,-1444681467),j=d(j,g,h,i,b[2],9,-51403784),i=d(i,j,g,h,b[7],14,1735328473),h=d(h,i,j,g,b[12],20,-1926607734),g=e(g,h,i,j,b[5],4,-378558),j=e(j,g,h,i,b[8],11,-2022574463),i=e(i,j,g,h,b[11],16,1839030562),h=e(h,i,j,g,b[14],23,-35309556),g=e(g,h,i,j,b[1],4,-1530992060),j=e(j,g,h,i,b[4],11,1272893353),i=e(i,j,g,h,b[7],16,-155497632),h=e(h,i,j,g,b[10],23,-1094730640),g=e(g,h,i,j,b[13],4,681279174),j=e(j,g,h,i,b[0],11,-358537222),i=e(i,j,g,h,b[3],16,-722521979),h=e(h,i,j,g,b[6],23,76029189),g=e(g,h,i,j,b[9],4,-640364487),j=e(j,g,h,i,b[12],11,-421815835),i=e(i,j,g,h,b[15],16,530742520),h=e(h,i,j,g,b[2],23,-995338651),g=f(g,h,i,j,b[0],6,-198630844),j=f(j,g,h,i,b[7],10,1126891415),i=f(i,j,g,h,b[14],15,-1416354905),h=f(h,i,j,g,b[5],21,-57434055),g=f(g,h,i,j,b[12],6,1700485571),j=f(j,g,h,i,b[3],10,-1894986606),i=f(i,j,g,h,b[10],15,-1051523),h=f(h,i,j,g,b[1],21,-2054922799),g=f(g,h,i,j,b[8],6,1873313359),j=f(j,g,h,i,b[15],10,-30611744),i=f(i,j,g,h,b[6],15,-1560198380),h=f(h,i,j,g,b[13],21,1309151649),g=f(g,h,i,j,b[4],6,-145523070),j=f(j,g,h,i,b[11],10,-1120210379),i=f(i,j,g,h,b[2],15,718787259),h=f(h,i,j,g,b[9],21,-343485551),a[0]=l(g,a[0]),a[1]=l(h,a[1]),a[2]=l(i,a[2]),a[3]=l(j,a[3])}function h(a){var b,c=a.length,d=[1732584193,-271733879,-1732584194,271733878];for(b=64;c>=b;b+=64)g(d,i(a.substring(b-64,b)));a=a.substring(b-64);var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=a.length;for(b=0;f>b;b++)e[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(e[b>>2]|=128<<(b%4<<3),b>55)for(g(d,e),b=16;b--;)e[b]=0;return e[14]=8*c,g(d,e),d}function i(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c}function j(a){for(var b="",c=0;4>c;c++)b+=m[a>>8*c+4&15]+m[a>>8*c&15];return b}function k(a){for(var b=a.length,c=0;b>c;c++)a[c]=j(a[c]);return a.join("")}var l=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},m="0123456789abcdef".split("");return k(h(a))},reMatches:function(a,b){var c=[];return a.replace(b,function(a,b){c.push({match:a,start:b,end:b+a.length})}),c},stringMatch:function(c,d,e){function f(a,b,c,d,e){return d=d||0,e=e||0,[a.slice(0,b),a.slice(b+d,c-e),a.slice(c)]}function g(a,c){if(c.constructor!==RegExp){var d=a.indexOf(c);if(0===d)return{match:c,rest:a.slice(c.length)};for(var e=0;e<c.length;e++)if(c[e]!=a[e])return{match:null,pos:e};return{match:null}}var f=b.reMatches(a,c);return f&&f.length&&0===f[0].start?{match:f[0].match,rest:a.slice(f[0].end)}:{match:null}}function h(a,b){for(var c=0,d=0;d<b.length;d++){var e=b[d],f=g(a,e);if(!f.match)return{matched:!1,pos:c+(f.pos||0),pattern:e};c+=f.match.length,a=f.rest}return a.length?{matched:!1,pos:c}:{matched:!0}}function i(c){var d=b.reMatches(c,/__\//g),e=b.reMatches(c,/\/__/g);if(d.length!==e.length)throw new Error("pattern invalid: "+c+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+JSON.stringify(e));var g=0;return d.reduce(function(b,c,d){var h=e[d],i=b.pop(),j=f(i,c.start-g,h.end-g,3,3);j[0].length&&(b.push(j[0]),g+=j[0].length);try{j[1].length&&(b.push(new RegExp(j[1])),g+=j[1].length+3+3)}catch(k){throw new Error("Cannot create pattern re from: "+a.obj.inspect(j))}return j[2].length&&b.push(j[2]),b},[c])}function j(a,b){var c=i(b),d=h(a,c);return d.matched?d:(d.error=a.slice(0,d.pos)+"<--UNMATCHED-->"+a.slice(d.pos),d)}return e=e||{},e.normalizeWhiteSpace&&(c=c.replace(/\s+/g," ")),e.ignoreIndent&&(c=c.replace(/^\s+/gm,""),d=d.replace(/^\s+/gm,"")),c==d?{matched:!0}:j(c,d)},peekRight:function(a,c,d){if(a=a.slice(c),"string"==typeof d){var e=a.indexOf(d);return-1===e?null:e+c}if(d.constructor===RegExp){var f=b.reMatches(a,d);return f[0]?f[0].start:null}return null},peekLeft:function(c,d,e){if(c=c.slice(0,d),"string"==typeof e){var f=c.lastIndexOf(e);return-1===f?null:f}if(e.constructor===RegExp){var g=b.reMatches(c,e);return a.arr.last(g)?a.arr.last(g).start:null}return null},lineIndexComputer:function(a){var c=b.lines(a).reduce(function(a,b){var c=a.slice(-1)[0]||-1;return a.concat([c+1,c+1+b.length])},[]);return function(a){for(var b=0;b<c.length;b+=2)if(a>=c[b]&&a<=c[b+1])return b/2;return-1}},lineNumberToIndexesComputer:function(a){var c=b.lines(a).reduce(function(a,b){var c=a.indexCount,d=a.indexCount+b.length+1;return a.lineRanges.push([c,d]),a.indexCount=d,a},{lineRanges:[],indexCount:0}).lineRanges;return function(a){return c[a]}},diff:function(a,b){return"undefined"==typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(a,b))},empty:function(a){return""==a},include:function(a,b){return a.indexOf(b)>-1},startsWith:function(a,b){return 0===a.indexOf(b)},startsWithVowel:function(a){var b=a[0];return"A"===b||"E"===b||"I"===b||"O"===b||"U"===b||"a"===b||"e"===b||"i"===b||"o"===b||"u"===b||!1},endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.lastIndexOf(b)===c},withDecimalPrecision:function(a,b){var c=parseFloat(a);return isNaN(c)?a:c.toFixed(b)},capitalize:function(a){return a.length?a.charAt(0).toUpperCase()+a.slice(1):a},camelCaseString:function(a){return a.split(" ").invoke("capitalize").join("")},camelize:function(a){var b=a.split("-"),c=b.length;if(1==c)return b[0];for(var d="-"==a.charAt(0)?b[0].charAt(0).toUpperCase()+b[0].substring(1):b[0],e=1;c>e;e++)d+=b[e].charAt(0).toUpperCase()+b[e].substring(1);return d},truncate:function(a,b,c){return b=b||30,c=void 0===c?"...":c,a.length>b?a.slice(0,b-c.length)+c:String(a)},regExpEscape:function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},succ:function(a){return a.slice(0,a.length-1)+String.fromCharCode(a.charCodeAt(a.length-1)+1)},digitValue:function(a){return a.charCodeAt(0)-"0".charCodeAt(0)},times:function(a,b){return 1>b?"":new Array(b+1).join(a)},applyChange:function(a,b){return"insert"===b.action?a.slice(0,b.start)+b.lines.join("\n")+a.slice(b.start):"remove"===b.action?a.slice(0,b.start)+a.slice(b.end):a},applyChanges:function(a,c){return c.reduce(function(c,d){return b.applyChange(a,d)},a)}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(a){"use strict";a.num={random:function(a,b){return a=a||0,b=b||100,Math.round(Math.random()*(b-a)+a)},normalRandom:function(a,b){var c,d=!1;return function(a,b){if(d)return d=!1,c*b+a;var e,f,g;do e=2*Math.random()-1,f=2*Math.random()-1,g=e*e+f*f;while(g>=1||0==g);var h=Math.sqrt(-2*Math.log(g)/g);return c=f*h,d=!0,a+b*e*h}}(),randomSmallerInteger:function(a){return Math.floor(Math.random()*a)},humanReadableByteSize:function(a){function b(a){return Math.round(100*a)/100}return 1e3>a?String(b(a))+"B":(a/=1024,1e3>a?String(b(a))+"KB":(a/=1024,String(b(a))+"MB"))},average:function(a){return a.reduce(function(a,b){return a+b},0)/a.length},median:function(a){var b=a.sort(function(a,b){return b-a}),c=a.length;return c%2===0?.5*(b[c/2-1]+b[c/2]):b[(c-1)/2]},between:function(a,b,c,d){d=d||0;var e,f;return c>b?(e=b,f=c):(f=b,e=c),f-a+d>=0&&0>=e-a-d},sort:function(a){return a.sort(function(a,b){return a-b})},parseLength:function(b,c){c=c||"px";var d=b.match(/([0-9\.]+)\s*(.*)/);if(!d||!d[1])return void 0;var e=parseFloat(d[1]),f=d[2];return a.num.convertLength(e,f,c)},convertLength:function(){function a(b,c){return"cm"===c?b:"mm"===c?.1*b:"in"===c?2.54*b:"px"===c?b*a(1/96,"in"):"pt"===c?b*a(1/72,"in"):"pc"===c?b*a(12,"pt"):void 0}return function b(c,d,e){return d===e?c:"cm"===e?a(c,d):"cm"===d?c/a(1,e):b(b(c,d,"cm"),"cm",e)}}(),roundTo:function(a,b){return b=1/b,Math.round(a*b)/b},detent:function(b,c,d,e){var f=a.num.roundTo(b,d);if(Math.abs(b-f)<c/2)return f;if(e)return b;var g=f>b?f-c/2:f+c/2;return f+(b-g)*d/(d-c)},toDegrees:function(a){return 180*a/Math.PI%360},toRadians:function(a){return a/180*Math.PI}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(a){"use strict";var b=function(){var a=function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,e=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};return function(f,g,h){var i=a;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(f)||/\d/.test(f)||(g=f,f=void 0),f=f?new Date(f):new Date,isNaN(f))throw SyntaxError("invalid date");g=String(i.masks[g]||g||i.masks["default"]),"UTC:"==g.slice(0,4)&&(g=g.slice(4),h=!0);var j=h?"getUTC":"get",k=f[j+"Date"](),l=f[j+"Day"](),m=f[j+"Month"](),n=f[j+"FullYear"](),o=f[j+"Hours"](),p=f[j+"Minutes"](),q=f[j+"Seconds"](),r=f[j+"Milliseconds"](),s=h?0:f.getTimezoneOffset(),t={d:k,dd:e(k),ddd:i.i18n.dayNames[l],dddd:i.i18n.dayNames[l+7],m:m+1,mm:e(m+1),mmm:i.i18n.monthNames[m],mmmm:i.i18n.monthNames[m+12],yy:String(n).slice(2),yyyy:n,h:o%12||12,hh:e(o%12||12),H:o,HH:e(o),M:p,MM:e(p),s:q,ss:e(q),l:e(r,3),L:e(r>99?Math.round(r/10):r),t:12>o?"a":"p",tt:12>o?"am":"pm",T:12>o?"A":"P",TT:12>o?"AM":"PM",Z:h?"UTC":(String(f).match(c)||[""]).pop().replace(d,""),o:(s>0?"-":"+")+e(100*Math.floor(Math.abs(s)/60)+Math.abs(s)%60,4),S:["th","st","nd","rd"][k%10>3?0:(k%100-k%10!=10)*k%10]};return g.replace(b,function(a){return a in t?t[a]:a.slice(1,a.length-1)})}}();return a.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},a}();a.date={format:function(a,c,d){return b}(),equals:function(a,b){return b&&b instanceof Date&&b.getTime()===a.getTime()},relativeTo:function(a,b){if(!(b instanceof Date))return"";if(a>b)return"";if(b===a)return"now";var c="min",d="sec",e="hour",f="day",g=b-a,h=Math.round(g/1e3),i=h%60,j=Math.floor(h/60)%60,k=Math.floor(h/60/60)%24,l=Math.floor(h/60/60/24),m=[];return l>0&&(m.push(l),l>1&&(f+="s"),m.push(f)),k>0&&2>l&&(m.push(k),k>1&&(e+="s"),m.push(e)),j>0&&3>k&&0===l&&(m.push(j),j>1&&(c+="s"),m.push(c)),i>0&&3>j&&0===k&&0===l&&(m.push(i),i>1&&(d+="s"),m.push(d)),m.join(" ")}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(exports){"use strict";var isNode="undefined"!=typeof process&&process.versions&&process.versions.node,Global="undefined"!=typeof window?window:global,classHelper=exports.classHelper={anonymousCounter:0,defaultCategoryName:"default category",initializerTemplate:"undefined"!=typeof lively&&lively.Config&&lively.Config.loadRewrittenCode?function(){classHelper.initializer.apply(this,arguments)}.toStringRewritten().replace(/__0/g,"Global").replace(/__1/g,"__1"):function(){classHelper.initializer.apply(this,arguments)}.toString(),newInitializer:function(name){var src=classHelper.initializerTemplate.replace(/function\s*(CLASS)?\(\)/,"function "+name+"()");if("undefined"!=typeof lively&&lively.Config&&lively.Config.loadRewrittenCode){var idx=src.match(".*storeFrameInfo([^)]*, ([0-9]+))")[2];src='__createClosure("core/lively/Base.js", '+idx+", Global, "+src+");"}else src+=" "+name;var initializer=eval(src);return initializer.displayName=name,initializer},initializer:function(){var a=arguments[0];a&&a.isInstanceRestorer||this.initialize.apply(this,arguments)},isValidIdentifier:function(){var a=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;return function(b){return a.test(b)}}(),isClass:function(a){return a===Object||a===Array||a===Function||a===String||a===Boolean||a===Date||a===RegExp||a===Number?!0:a instanceof Function&&void 0!==a.superclass},className:function(a){return a===Object?"Object":a===Array?"Array":a===Function?"Function":a===String?"String":a===Boolean?"Boolean":a===Date?"Date":a===RegExp?"RegExp":a===Number?"Number":a.type},forName:function(a){var b=classHelper.namespaceFor(a),c=classHelper.unqualifiedNameFor(a);return b[c]},deleteObjectNamed:function(a){var b=classHelper.namespaceFor(a),c=classHelper.unqualifiedNameFor(a);delete b[c]},unqualifiedNameFor:function(a){var b=a.lastIndexOf("."),c=a.substring(b+1);if(!classHelper.isValidIdentifier(c))throw new Error("not a name "+c);return c},namespaceFor:function(a){var b=a?a.lastIndexOf("."):-1;if(0>b)return Global;var c=a.slice(0,b);if("undefined"!=typeof lively&&lively.module)return lively.module(c);var d=exports.Path(c),e=d.get(Global);return e||d.set(Global,{},!0)},withAllClassNames:function(a,b){for(var c in a)try{classHelper.isClass(a[c])&&b(c)}catch(d){}b("Object"),b("Global")},getConstructor:function(a){var b=a.constructor;return b&&b.getOriginal?b.getOriginal():b},getPrototype:function(a){return this.getConstructor(a).prototype},applyPrototypeMethod:function(a,b,c){var d=this.getPrototype(b);if(!d)throw new Error("method "+a+" not found");return d.apply(this,c)},getSuperConstructor:function(a){return this.getConstructor(a).superclass},getSuperPrototype:function(a){var b=this.getSuperConstructor(a);return b&&b.prototype},addPins:function(a,b){function c(a){return a.replace(/[\+|\-]?(.*)/,"$1")}function d(a){return!exports.string.startsWith(a,"-")}function e(a){return!exports.string.startsWith(a,"+")}if(Global.Relay)return void classHelper.addMixin(a,Relay.newDelegationMixin(b).prototype);if(!Object.isArray(b))throw new Error("Cannot deal with non-Array spec in addPins");var f={};b.forEach(function(a){var b=c(a);d(a)&&(f["set"+b]=function(a){return this["_"+b]=a}),e(a)&&(f["get"+b]=function(){return this["_"+b]})}),classHelper.addMixin(a,f)},addMixin:function(a,b){var c={};for(var d in b){var e=b[d];switch(d){case"constructor":case"initialize":case"deserialize":case"copyFrom":case"toString":case"definition":case"description":break;default:void 0===a.prototype[d]&&(c[d]=e)}}a.addMethods(c)}};exports["class"]={create:function(){var a,b=exports.arr.from(arguments),c=b.shift(),d=Global,e=null;c&&"string"!=typeof c?a=b.shift():(a=c,c=Object),a?(d=classHelper.namespaceFor(a),e=classHelper.unqualifiedNameFor(a)):(e="anonymous_"+classHelper.anonymousCounter++,a=e);var f;if(a&&d[e]&&d[e].superclass===c)f=d[e];else{f=classHelper.newInitializer(e),f.superclass=c;var g=function(){};g.prototype=c.prototype,f.prototype=new g,f.prototype.constructor=f,f.type=a,f.displayName=a,a&&(d[e]=f),"undefined"!=typeof lively&&lively.Module&&lively.Module.current&&(f.sourceModule=lively.Module.current()),f.toString=function(){var a=exports.arr.detect(Object.keys(f.categories||{}),function(a){return f.categories[a].indexOf("initialize")>-1})||"default category";return exports.string.format('lively.lang.class.create(%s, "%s",\n"%s", {\n  initialize: %s\n}/*...*/)',f.superclass.type||f.superclass.name,f.type,a,f.prototype.initialize)}}return exports["class"].addMethods.apply(Global,[f].concat(b)),f.prototype.initialize||(f.prototype.initialize=function(){}),f},addMethods:function(){for(var a=arguments[0],b=arguments,c=classHelper.defaultCategoryName,d=[],e=1;e<b.length;e++)"string"==typeof b[e]?c=b[e]:Global.RealTrait&&b[e]instanceof RealTrait?d.push(b[e]):exports["class"].addCategorizedMethods(a,c,b[e]instanceof Function?b[e]():b[e]);for(e=0;e<d.length;e++)d[e].applyTo(a);return a},addCategorizedMethods:function(a,b,c){a.categories||(a.categories={}),a.categories[b]||(a.categories[b]=[]);var d=a.categories[b];if(!c)throw dbgOn(new Error("no source in addCategorizedMethods!"));var e=a.superclass&&a.superclass.prototype,f=a.type||"Anonymous";for(var g in c)if("constructor"!==g){var h=c.__lookupGetter__(g);h&&a.prototype.__defineGetter__(g,h);var i=c.__lookupSetter__(g);if(i&&a.prototype.__defineSetter__(g,i),!h&&!i){d.push(g);var j=c[g],k=e&&"function"==typeof j&&"$super"==exports.fun.argumentNames(j)[0];if(k&&!function(){var b=j,c=function(a){var b=function(){var b=e[a];if(!b)throw new Error(exports.string.format("Trying to call super of%s>>%s but super method non existing in %s",f,a,e.constructor.type));return b.apply(this,arguments)};return b.varMapping={ancestor:e,m:a},b.isSuperCall=!0,b}(g);c.methodName="$super:"+(a.superclass?a.superclass.type+">>":"")+g,j=exports.obj.extend(exports.fun.wrap(c,b),{valueOf:function(){return b},toString:function(){return b.toString()},originalFunction:b,methodName:c.methodName,isSuperWrapper:!0}),b.varMapping={$super:c}}(),a.prototype[g]=j,"formals"===g)classHelper.addPins(a,j);else if("function"==typeof j)for(j.displayName=f+"$"+g,"undefined"!=typeof lively&&lively.Module&&lively.Module.current&&(j.sourceModule=lively.Module.current());j;j=j.originalFunction)j.declaredClass=a.prototype.constructor.type,j.methodName=g}}return a},addProperties:function(a,b,c){classHelper.addMixin(a,c.prototype.create(b).prototype)},isSubclassOf:function(a,b){return exports["class"].superclasses(a).indexOf(b)>-1},superclasses:function(a){return a.superclass?a.superclass===Object?[Object]:exports["class"].superclasses(a.superclass).concat([a.superclass]):[]},categoryNameFor:function(a,b){for(var c in a.categories)if(a.categories[c].indexOf(b)>-1)return c;return null},remove:function(a){var b=classHelper.namespaceFor(a.type),c=classHelper.unqualifiedNameFor(a.type);delete b[c]}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(a){"use strict";var b=a.arr;if(!b)throw new Error("messenger.js needs collection.js!");var c=a.fun;if(!c)throw new Error("messenger.js needs function.js!");var d=a.string;if(!d)throw new Error("messenger.js needs string.js!");var e=a.events;if(!e)throw new Error("messenger.js needs events.js!");var f=a.obj;if(!f)throw new Error("messenger.js needs object.js!");var g="offline",h="online",i="connecting";a.messenger={OFFLINE:g,ONLINE:h,CONNECTING:i,create:function(a){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}];c.forEach(function(b){if(!a[b.name]){var c="message implementation needs function "+b.name+"("+b.args.join(",")+")";throw new Error(c)}});var i=a.sendHeartbeat&&(a.heartbeatInterval||1e3),j=a.hasOwnProperty("ignoreUnknownMessages")?a.ignoreUnknownMessages:!1,k={_outgoing:[],_inflight:[],_id:a.id||d.newUUID(),_ignoreUnknownMessages:j,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:i,
_status:g,_runWhenOnlineCallbacks:function(){var a=b.clone(k._whenOnlineCallbacks);k._whenOnlineCallbacks=[],a.forEach(function(a){try{a.call(null,null,k)}catch(b){console.error("error in _runWhenOnlineCallbacks: %s",b)}})},_ensureStatusWatcher:function(){k._statusWatcherProc||(k._statusWatcherProc=setInterval(function(){k.isOnline()&&k._whenOnlineCallbacks.length&&k._runWhenOnlineCallbacks();var a=k._status;k._status=k.isOnline()?h:g,k._status!==h&&k._statusWatcherProc&&k.reconnect(),k._status!==a&&k.onStatusChange&&k.onStatusChange()},20))},_addMissingData:function(a){if(!a.target)throw new Error("Message needs target!");if(!a.action)throw new Error("Message needs action!");return a.data||(a.data=null),a.messageId||(a.messageId=d.newUUID()),a.sender=k.id(),a.messageIndex=k._messageCounter++,a},_queueSend:function(a,b){if(b&&"function"!=typeof b)throw new Error("Expecing a when send callback, got: "+b);k._outgoing.push([a,b])},_deliverMessageQueue:function(){function c(c){if(-1!==k._inflight.indexOf(c)){var d=c[0],f=c[1];f&&(k._messageResponseCallbacks[d.messageId]=f),a.send.call(k,d,function(a){b.remove(k._inflight,c),a&&e(a,c),k._deliverMessageQueue()})}}function d(c){"number"==typeof a.sendTimeout&&setTimeout(function(){-1!==k._inflight.indexOf(c)&&(b.remove(k._inflight,c),e(new Error("Timeout sending message"),c),k._deliverMessageQueue())},a.sendTimeout)}function e(a,b){var c=b[0],d=b[1];delete k._messageResponseCallbacks[c.messageId],console.error(a),d&&d(a)}if(a.allowConcurrentSends||!k._inflight.length){var f=k._outgoing.shift();f&&(k._inflight.push(f),k.isOnline()?c(f):k.whenOnline(function(){c(f)}),d(f),a.allowConcurrentSends&&k._outgoing.length&&k._deliverMessageQueue())}},_startHeartbeatProcess:function(){k._startHeartbeatProcessProc||(k._startHeartbeatProcessProc=setTimeout(function(){a.sendHeartbeat.call(k,function(a,b){k._startHeartbeatProcessProc=null,k._startHeartbeatProcess()})},k._heartbeatInterval))},id:function(){return k._id},isOnline:function(){return a.isOnline.call(k)},heartbeatEnabled:function(){return"number"==typeof k._heartbeatInterval},listen:function(b){return k._listenInProgress?void 0:(k._listenInProgress=!0,k._ensureStatusWatcher(),a.listen.call(k,function(a){k._listenInProgress=null,b&&b(a),k.heartbeatEnabled()&&k._startHeartbeatProcess()}))},reconnect:function(){return k._status!==h?(k.listen(),k):void 0},send:function(a,b){return k._addMissingData(a),k._queueSend(a,b),k._deliverMessageQueue(),a},sendTo:function(a,b,c,d){var e={target:a,action:b,data:c};return k.send(e,d)},onMessage:function(a){if(k.emit("message",a),a.inResponseTo){var b=k._messageResponseCallbacks[a.inResponseTo];b&&!a.expectMoreResponses&&delete k._messageResponseCallbacks[a.inResponseTo],b&&b(null,a)}else{var c=k._services[a.action];if(c)try{c.call(null,a,k)}catch(d){console.error("Error invoking service: "+d),k.answer(a,{error:String(d)})}else if(!k._ignoreUnknownMessages){var e=new Error("messageNotUnderstood: "+a.action);k.answer(a,{error:String(e)})}}},answer:function(a,b,c,d){"function"==typeof c&&(d=c,c=!1);var e={target:a.sender,action:a.action+"Result",inResponseTo:a.messageId,data:b};return c&&(e.expectMoreResponses=!0),k.send(e,d)},close:function(b){return clearInterval(k._statusWatcherProc),k._statusWatcherProc=null,a.close.call(k,function(a){k._status=g,b&&b(a)}),k},whenOnline:function(a){return k._whenOnlineCallbacks.push(a),k.isOnline()&&k._runWhenOnlineCallbacks(),k},outgoingMessages:function(){return b.pluck(k._inflight.concat(k._outgoing),0)},addServices:function(a){return f.extend(k._services,a),k}};return a.services&&k.addServices(a.services),e.makeEmitter(k),k}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{}),function(exports){"use strict";var isNodejs="undefined"!=typeof module&&module.require,WorkerSetup={loadDependenciesBrowser:function(a){importScripts.apply(this,a.scriptsToLoad||[])},loadDependenciesNodejs:function(a){var b=global.lively||(global.lively={});b.lang=require(require("path").join(a.libLocation,"index"))},initBrowserGlobals:function(a){remoteWorker.send=function(a){postMessage(a)},Global=this,Global.window=Global,Global.console=Global.console||function(){var a={};return["log","error","warn"].forEach(function(b){a[b]=function(){for(var a=arguments[0],c=1;c<arguments.length;c++)a=a.replace("%s",arguments[c]);remoteWorker.send({type:b,message:["[",b.toUpperCase(),"] ",a].join("")})}}),a}()},initOnMessageHandler:function(a){function b(a){if(a=a.data.data?a.data:a,remoteWorker.messenger)remoteWorker.messenger.onMessage(a);else if("close"==a.action)return remoteWorker.send({type:"closed",workerReady:!1}),void remoteWorker.close()}remoteWorker.on?remoteWorker.on("message",b):remoteWorker.onmessage=b},initWorkerInterface:function initWorkerInterface(options){remoteWorker.callStringifiedFunction=function(stringifiedFunc,args,thenDo){var func;try{func=eval("("+stringifiedFunc+")")}catch(e){return void thenDo(new Error("Cannot create function from string: "+e.stack||e))}var usesCallback=func.length===args.length+1,whenDone=lively.lang.fun.once(function(a,b){remoteWorker.isBusy=!1,thenDo(a,b)});remoteWorker.isBusy=!0,usesCallback&&args.push(whenDone);try{var result=func.apply(remoteWorker,args.concat([whenDone]))}catch(e){return void whenDone(e,null)}usesCallback||whenDone(null,result)},remoteWorker.httpRequest=function(a){function b(){4===c.readyState&&a.done&&a.done(c)}if(!a.url)return void console.log("Error, httpRequest needs url");var c=new XMLHttpRequest,d=a.method||"GET";c.onreadystatechange=b,c.open(d,a.url),c.send()},remoteWorker.terminateIfNotBusyIn=function(a){setTimeout(function(){return remoteWorker.isBusy?void remoteWorker.terminateIfNotBusyIn(a):(remoteWorker.send({type:"closed",workerReady:!1}),void remoteWorker.close())},a)}},initWorkerMessenger:function initWorkerMessenger(options){if(!options.useMessenger)return null;if(!lively.lang.messenger)throw new Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw new Error("worker.create requires events.js to be loaded!");return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(msg,messenger){var result;try{result=eval(msg.data.expr)}catch(e){result=e.stack||e}messenger.answer(msg,{result:String(result)})},run:function(a,b){var c=a.data.func,d=a.data.args;return c?void remoteWorker.callStringifiedFunction(c,d,function(c,d){b.answer(a,{error:c?String(c):null,result:d})}):void b.answer(a,{error:"no funcString"})},close:function(a,b){b.answer(a,{status:"OK"}),remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close()}},isOnline:function(){return!0},send:function(a,b){remoteWorker.send(a),b()},listen:function(a){a()},close:function(a){remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close()}})}},BrowserWorker={create:function(a){function b(a,b){exports.events.makeEmitter(b),a.scriptsToLoad||(a.scriptsToLoad=["base.js","events.js","object.js","collection.js","function.js","string.js","number.js","date.js","messenger.js","worker.js"].map(function(b){return a.libLocation+b}));var c=Object.keys(a).reduce(function(b,c){return"function"!=typeof a[c]&&(b[c]=a[c]),b},{});b.onmessage=function(a){void 0!==a.data.workerReady?(b.ready=!!a.data.workerReady,b.ready?b.emit("ready"):b.emit("close")):b.emit("message",a.data)},b.errors=[],b.onerror=function(a){console.error(a),b.errors.push(a),b.emit("error",a)},b.postMessage({action:"setup",options:c})}function c(){var a=self;a.onmessage=function(a){if("setup"!==a.data.action)throw new Error("expected setup to be first message but got "+JSON.stringify(a.data));var b=a.data.options||{};initBrowserGlobals(b),loadDependenciesBrowser(b),initOnMessageHandler(b),initWorkerInterface(b),initWorkerMessenger(b),postMessage({workerReady:!0})},__FUNCTIONDECLARATIONS__}function d(a){var b;try{b=new Blob([a],{type:"text/javascript"})}catch(c){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,b=new BlobBuilder,b.append(a),b=b.getBlob()}var d="undefined"!=typeof webkitURL?webkitURL:URL;return d.createObjectURL(b)}if(a=a||{},!a.libLocation&&!a.scriptsToLoad){var e=document.querySelector('script[src$="worker.js"]');if(!e)throw new Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');a.libLocation=e.src.replace(/worker.js$/,"")}var f=String(c).replace("__FUNCTIONDECLARATIONS__",[WorkerSetup.initBrowserGlobals,WorkerSetup.loadDependenciesBrowser,WorkerSetup.initOnMessageHandler,WorkerSetup.initWorkerInterface,WorkerSetup.initWorkerMessenger].join("\n")),g="("+f+")();",h=new Worker(d(g));return b(a,h),h}},NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(a){a=a||{};var b,c=exports.events.makeEmitter({ready:!1,errors:[],postMessage:function(a){return b?c.ready?void b.send(a):void c.emit("error",new Error("nodejs worker process not ready or already closed")):void c.emit("error",new Error("nodejs worker process not yet created"))}});return NodejsWorker.startWorker(a,function(a,d){return a?(c.ready=!1,void c.emit("error",a)):(b=d,b.on("message",function(a){NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",a),c.emit("message",a)}),b.on("close",function(){console.log("[WORKER PARENT] worker closed"),c.emit("close")}),b.on("error",function(a){console.log("[WORKER PARENT] error ",a),c.errors.push(a),c.emit("error",a)}),c.ready=!0,void c.emit("ready"))}),c},workerSetupFunction:function(){var a=process,b=!0;b&&console.log("[WORKER] Starting init"),a.on("message",function(c){if("setup"!==c.action)throw new Error("expected setup to be first message but got "+JSON.stringify(c.data));a.removeAllListeners("message");var d=c.data.options||{};b&&console.log("[WORKER] running setup with options",d),loadDependenciesNodejs(d),initOnMessageHandler(d),initWorkerInterface(d),initWorkerMessenger(d),a.send({workerReady:!0})}),__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(a,b,c){var d=require("path"),e=require("os"),f=require("fs"),g=d.join(e.tmpDir(),"lively-nodejs-workers/"),h=d.join(g,"nodejs-worker-init.js");NodejsWorker.initCodeFileCreated?f.exists(h,function(d){d?c(null,h):NodejsWorker.createWorkerCodeFile(a,h,b,c)}):NodejsWorker.createWorkerCodeFile(a,h,b,c)},createWorkerCodeFile:function(a,b,c,d){var e=require("path"),f=require("fs"),g=require("child_process").exec;g("mkdir -p "+e.dirname(b),function(a,e,g){return a?void d(new Error(["[WORKER PARENT] Could not create worker temp dir:",e,g].join("\n"))):void f.writeFile(b,c,function(a){NodejsWorker.debug&&console.log("worker code file %s created",b),NodejsWorker.initCodeFileCreated=!0,d(a,b)})})},startWorker:function(a,b){var c=require("util"),d=require("child_process").fork,e=String(NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[WorkerSetup.loadDependenciesNodejs,WorkerSetup.initOnMessageHandler,WorkerSetup.initWorkerInterface,WorkerSetup.initWorkerMessenger].join("\n")),f=c.format("(%s)();\n",e);NodejsWorker.ensureInitCodeFile(a,f,function(c,e){if(c)return b(c);var f=d(e,{});NodejsWorker.debug&&console.log("worker forked"),f.on("message",function(a){"pong"===a.action?console.log("[WORKER pong] ",a):"log"===a.action&&console.log("[Message from WORKER] ",a.data)}),f.once("message",function(a){NodejsWorker.debug&&console.log("worker setup done"),b(null,f,a)}),f.on("close",function(){NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")}),f.send({action:"setup",data:{options:a}}),global.WORKER=f})}},worker=exports.worker={fork:function(a,b,c){c||(c=b,b=a,a=null),a=a||{};var d=a.args||[],e=worker.create(a);return e.run.apply(e,[b].concat(d).concat(c)),e},create:function(a){if(a=a||{},a.useMessenger=!0,!exports.messenger)throw new Error("worker.create requires messenger.js to be loaded!");if(!exports.events)throw new Error("worker.create requires events.js to be loaded!");if(!exports.obj)throw new Error("worker.create requires object.js to be loaded!");var b=a.workerId||exports.string.newUUID(),c=exports.messenger.create({sendTimeout:5e3,send:function(a,b){c.worker.postMessage(a),b()},listen:function(b){var d=c.worker=isNodejs?NodejsWorker.create(a):BrowserWorker.create(a);d.on("message",function(a){c.onMessage(a)}),d.on("ready",function(){NodejsWorker.debug&&console.log("WORKER READY!!!")}),d.on("close",function(){NodejsWorker.debug&&console.log("WORKER CLOSED...!!!")}),d.once("ready",b)},close:function(a){return c.worker.ready?c.sendTo(b,"close",{},function(b,d){if(b=b||d.data.error,b&&console.error("Error in worker messenger close: "+b.stack||b),b)a(b);else{var e=!1;c.worker.once("close",function(){e=!0}),exports.fun.waitFor(1e3,function(){return!!e},a)}}):a(null)},isOnline:function(){return c.worker&&c.worker.ready}});return exports.obj.extend(c,{eval:function(a,d){c.sendTo(b,"remoteEval",{expr:a},function(a,b){d(a,b?b.data.result:null)})},run:function(){var a=Array.prototype.slice.call(arguments),d=a.shift(),e=a.pop();if("function"!=typeof d)throw new Error("run: no function that should run in worker passed");if("function"!=typeof e)throw new Error("run: no callback passed");return c.sendTo(b,"run",{func:String(d),args:a},function(a,b){e(a||b.data.error,b?b.data.result:null)})}}),c.listen(),c}}}("undefined"!=typeof module&&module.require&&"undefined"!=typeof process?require("./base"):"undefined"!=typeof lively&&lively.lang?lively.lang:{});var isCommonJS="undefined"!=typeof module&&module.require,Global="undefined"!=typeof window?window:global,lang="undefined"!=typeof lively?lively.lang:isCommonJS&&module.require("lively.lang"),escodegen=isCommonJS?require("escodegen"):escodegen,acorn=!isCommonJS&&Global.acorn;!acorn&&isCommonJS&&(acorn=require("acorn"),acorn.walk=require("acorn/dist/walk"),acorn.parse_dammit=require("acorn/dist/acorn_loose").parse_dammit,Global.acorn=acorn);var env={isCommonJS:isCommonJS,Global:Global,lively:isCommonJS?Global.lively||{}:Global.lively||(Global.lively={}),"lively.lang":lang,"lively.ast":Global.lively&&Global.lively.ast||{},escodegen:escodegen,acorn:acorn};env.lively.ast=env["lively.ast"],isCommonJS?lang.obj.extend(module.exports,env):env.lively["lively.lang_env"]=env,function(a){var b="undefined"!=typeof module&&module.require?module.require("./env"):lively["lively.lang_env"];a(b.acorn,b.lively,b["lively.lang"],b["lively.ast"]),b.isCommonJS&&(require("./lib/acorn-extension"),require("./lib/mozilla-ast-visitors"),require("./lib/mozilla-ast-visitor-interface"),require("./lib/query"),require("./lib/transform"),require("./lib/comments"),require("./lib/code-categorizer"),module.exports=b["lively.ast"])}(function(a,b,c,d){d.acorn?d.acorn=c.obj.extend(d.acorn,a):d.acorn=a,d.parse=function(b,e){function f(a){a=h(g(a)),j.allComments=a.comments}function g(a){return i.forEach(function(b){var e=c.arr.detect(d.nodesAt(b.start,j).reverse(),function(a){return"BlockStatement"===a.type||"Program"===a.type});e||(e=j),e.comments||(e.comments=[]),e.comments.push(b),a.nodesWithComments.push(e)}),a}function h(a){return a.nodesWithComments.forEach(function(d){c.arr.clone(d.comments).reduce(function(e,f){if(f.isBlock)return e.lastComment=null,e;if(!e.lastComment)return e.lastComment=f,e;var g=e.lastComment,h=c.arr.detect(d.body,function(a){return a.start>=g.end&&a.end<=f.start});if(h)return e.lastComment=f,e;var i=b.slice(g.end,f.start);return/[\n\r][\n\r]+/.test(i)?(e.lastComment=f,e):(g.text+="\n"+f.text,g.end=f.end,c.arr.remove(d.comments,f),c.arr.remove(a.comments,f),e)},{lastComment:null})}),a}if(e=e||{},e.ecmaVersion=e.ecmaVersion||6,e.sourceType=e.sourceType||"module",e.plugins=e.plugins||{},e.plugins.hasOwnProperty("jsx")&&(e.plugins.jsx=e.plugins.jsx),e.withComments){delete e.withComments;var i=[];e.onComment=function(a,b,c,d,e,f){i.push({isBlock:a,text:b,node:null,start:c,end:d,line:e,column:f})}}var j=e.addSource?a.walk.addSource(b,e):a.parse(b,e);return e.addAstIndex&&!j.hasOwnProperty("astIndex")&&a.walk.addAstIndex(j),j&&i&&f({ast:j,comments:i,nodesWithComments:[]}),j},d.parseFunction=function(b,c){c=c||{},c.ecmaVersion=6,c.sourceType=c.sourceType||"module",c.plugins=c.plugins||{},c.plugins.hasOwnProperty("jsx")&&(c.plugins.jsx=c.plugins.jsx);var d="("+b+")",e=a.parse(d);return a.walk.addSource(e,d),e.body[0].expression},d.parseLikeOMeta=function(b,c){function d(b){return a.walk.toLKObjects(f.parse(b))}var e,f=this;switch(c){case"expr":case"stmt":case"functionDef":e=d(b),e.isSequence&&1==e.children.length&&(e=e.children[0],e.setParent(void 0));break;case"memberFragment":b="({"+b+"})",e=d(b),e=e.children[0].properties[0],e.setParent(void 0);break;case"categoryFragment":case"traitFragment":b="["+b+"]",e=d(b),e=e.children[0],e.setParent(void 0);break;default:e=d(b)}return e.source=b,e},d.fuzzyParse=function(b,c){c=c||{},c.ecmaVersion=c.ecmaVersion||6,c.sourceType=c.sourceType||"module",c.plugins=c.plugins||{},c.plugins.hasOwnProperty("jsx")&&(c.plugins.jsx=c.plugins.jsx);var e,f,g;"LabeledStatement"===c.type&&(f="$={"+b+"}");try{e=d.parse(f||b,c),f?e=null:c.addSource&&a.walk.addSource(e,b)}catch(h){g=h}if(g&&void 0!==g.raisedAt){f&&(g.pos-=3,g.raisedAt-=3,g.loc.column-=3);var i="";i+=b.slice(g.raisedAt-20,g.raisedAt),i+="<-error->",i+=b.slice(g.raisedAt,g.raisedAt+20),c.verbose&&show("parse error: "+i),g.parseErrorSource=i}else g&&c.verbose&&show(""+g+g.stack);return e||(e=a.parse_dammit(b,c),c.addSource&&a.walk.addSource(e,b),e.isFuzzy=!0,e.parseError=g),e},d.nodesAt=function(b,c){return c="string"==typeof c?this.parse(c):c,a.walk.findNodesIncluding(c,b)}}),function(a){var b="undefined"!=typeof module&&module.require?module.require("../env"):lively["lively.lang_env"];a(b.acorn,b.escodegen,b.lively,b["lively.lang"],b["lively.ast"])}(function(a,b,c,d,e){e.acorn?e.acorn=d.obj.extend(e.acorn,a):e.acorn=a,a.walk.forEachNode=function(b,c,e,f){f=f||{};var g=f.traversal||"preorder",h=d.obj.clone(f.visitors?f.visitors:a.walk.visitors.withMemberExpression),i="preorder"===g?function(a,b,d,f,g){return c(d,e,f,b),a(d,f+1,g)}:function(a,b,d,f,g){var h=a(d,f+1,g);return c(d,e,f,b),h};return Object.keys(h).forEach(function(a){var b=h[a];h[a]=function(c,d,e){return i(b,a,c,d,e)}}),a.walk.recursive(b,0,null,h),b},a.walk.matchNodes=function(b,c,d,e){function f(a,b,d,e){c[a.type]&&c[a.type](a,b,d,e)}return a.walk.forEachNode(b,f,d,e)},a.walk.findNodesIncluding=function(b,c,e,f){var g=[];return f=f||d.obj.clone(a.walk.visitors.withMemberExpression),Object.keys(f).forEach(function(a){var b=f[a];f[a]=function(a,c,e){return d.arr.pushIfNotIncluded(g,a),b(a,c,e)}}),f.Property=function(a,b,c){d.arr.pushIfNotIncluded(g,a),c(a.key,b,"Expression"),c(a.value,b,"Expression")},f.LabeledStatement=function(a,b,c){a.label&&c(a.label,b,"Expression"),c(a.body,b,"Statement")},a.walk.findNodeAround(b,c,e,f),g},a.walk.addSource=function(b,c,d,e){var f=f||{};return f.ecmaVersion=f.ecmaVersion||6,f.sourceType=f.sourceType||"module",f.plugins=f.plugins||{},f.plugins.hasOwnProperty("jsx")&&(f.plugins.jsx=f.plugins.jsx),c="string"==typeof b?b:c,b="string"==typeof b?a.parse(b,f):b,d=!!d,a.walk.forEachNode(b,function(a){(!a.source||e)&&(a.source=d?c:c.slice(a.start,a.end))})},a.walk.inspect=function(b,c){var e=e||{};return e.ecmaVersion=e.ecmaVersion||6,e.sourceType=e.sourceType||"module",e.plugins=e.plugins||{},e.plugins.hasOwnProperty("jsx")&&(e.plugins.jsx=e.plugins.jsx),c="string"==typeof b?b:null,b="string"==typeof b?a.parse(b):b,c&&a.walk.addSource(b,c),d.obj.inspect(b)},a.walk.withParentInfo=function(b,c,e){function f(a){var b={id:d.string.newUUID(),parentScope:a,containingScopes:[]};return a&&a.containingScopes.push(b),b}e=e||{};var g,h=a.walk.make({Function:function(a,b,c){b&&b.scope&&(b.scope=f(b.scope)),c(a.body,b,"ScopeBody")},VariableDeclarator:function(a,b,c){a.init&&c(a.init,b,"Expression")},VariableDeclaration:function(a,b,c){for(var d=0;d<a.declarations.length;++d){var e=a.declarations[d];e&&c(e,b,"VariableDeclarator")}},ObjectExpression:function(a,b,c){for(var d=0;d<a.properties.length;++d){var e=a.properties[d];c(e.key,b,"Expression"),c(e.value,b,"Expression")}},MemberExpression:function(a,b,c){c(a.object,b,"Expression"),c(a.property,b,"Expression")}}),i=[];a.walk.forEachNode(b,function(a){d.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(b){if(!a.__lookupGetter__(b)){var c=a[b];a.__defineGetter__(b,function(){return g=b,c}),i.push([a,b,a[b]])}})},null,{visitors:h});var j=[];return Object.keys(h).forEach(function(a){var b=h[a];h[a]=function(d,f,h){return a===d.type||e.visitAllNodes?(j.push(c.call(null,d,{scope:f.scope,depth:f.depth,parent:f.parent,type:a,propertyInParent:g})),b(d,{scope:f.scope,parent:d,depth:f.depth+1},h)):b(d,f,h)}}),a.walk.recursive(b,{scope:f(),parent:null,propertyInParent:"",depth:0},null,h),i.forEach(function(a){delete a[0][a[1]],a[0][a[1]]=a[2]}),j},a.walk.toLKObjects=function(a){function b(a,b){return a=a||-1,b=b||-1,new c.ast.Variable([a,b],"undefined")}function d(a){return e[a.type](a,d)}if(!a.type)throw new Error("Given AST is not an Acorn AST.");var e={Program:function(a,b){return new c.ast.Sequence([a.start,a.end],a.body.map(b))},FunctionDeclaration:function(a,b){var d=a.params.map(function(a){return new c.ast.Variable([a.start,a.end],a.name)}),e=new c.ast.Function([a.id.end,a.end],b(a.body),d);return new c.ast.VarDeclaration([a.start,a.end],a.id.name,e)},BlockStatement:function(a,b){var d=a.body.map(b);return new c.ast.Sequence([a.start+1,a.end],d)},ExpressionStatement:function(a,b){return b(a.expression)},CallExpression:function(a,b){if("MemberExpression"==a.callee.type&&"NewExpression"!=a.type){var d,e=a.callee.object;return d=a.callee.computed?b(a.callee.property):new c.ast.String([a.callee.property.start,a.callee.property.end],a.callee.property.name),new c.ast.Send([a.start,a.end],d,b(e),a.arguments.map(b))}return new c.ast.Call([a.start,a.end],b(a.callee),a.arguments.map(b))},MemberExpression:function(a,b){var d;return d=a.computed?b(a.property):new c.ast.String([a.property.start,a.property.end],a.property.name),new c.ast.GetSlot([a.start,a.end],d,b(a.object))},NewExpression:function(a,b){return new c.ast.New([a.start,a.end],this.CallExpression(a,b))},VariableDeclaration:function(a,b){var d=a.declarations[0]?a.declarations[0].start-1:a.start;return new c.ast.Sequence([d,a.end],a.declarations.map(b))},VariableDeclarator:function(a,d){var e=a.init?d(a.init):b(a.start-1,a.start-1);return new c.ast.VarDeclaration([a.start-1,a.end],a.id.name,e)},FunctionExpression:function(a,b){var d=a.params.map(function(a){return new c.ast.Variable([a.start,a.end],a.name)});return new c.ast.Function([a.start,a.end],b(a.body),d)},IfStatement:function(a,d){return new c.ast.If([a.start,a.end],d(a.test),d(a.consequent),a.alternate?d(a.alternate):b(a.consequent.end,a.consequent.end))},ConditionalExpression:function(a,b){return new c.ast.Cond([a.start,a.end],b(a.test),b(a.consequent),b(a.alternate))},SwitchStatement:function(a,b){return new c.ast.Switch([a.start,a.end],b(a.discriminant),a.cases.map(b))},SwitchCase:function(a,b){var d=a.consequent.length>0?a.consequent[0].start:a.end,e=a.consequent.length>0?a.consequent[a.consequent.length-1].end:a.end,f=new c.ast.Sequence([d,e],a.consequent.map(b));return null!=a.test?new c.ast.Case([a.start,a.end],b(a.test),f):new c.ast.Default([a.start,a.end],f)},BreakStatement:function(a,b){var d;return d=null==a.label?new c.ast.Label([a.end,a.end],""):new c.ast.Label([a.label.start,a.label.end],a.label.name),new c.ast.Break([a.start,a.end],d)},ContinueStatement:function(a,b){var d;return d=null==a.label?new c.ast.Label([a.end,a.end],""):new c.ast.Label([a.label.start,a.label.end],a.label.name),new c.ast.Continue([a.start,a.end],d)},TryStatement:function(a,d){var e,f;a.handler?(f=d(a.handler.body),e=d(a.handler.param)):(f=b(a.block.end+1,a.block.end+1),e=b(a.block.end+1,a.block.end+1));var g=a.finalizer?d(a.finalizer):b(a.end,a.end);return new c.ast.TryCatchFinally([a.start,a.end],d(a.block),e,f,g)},ThrowStatement:function(a,b){return new c.ast.Throw([a.start,a.end],b(a.argument))},ForStatement:function(a,d){var e=a.init?d(a.init):b(4,4),f=a.test?d(a.test):b(e.pos[1]+1,e.pos[1]+1),g=a.update?d(a.update):b(f.pos[1]+1,f.pos[1]+1);return new c.ast.For([a.start,a.end],e,f,d(a.body),g)},ForInStatement:function(a,b){var d=b("VariableDeclaration"==a.left.type?a.left.declarations[0]:a.left);return new c.ast.ForIn([a.start,a.end],d,b(a.right),b(a.body))},WhileStatement:function(a,b){return new c.ast.While([a.start,a.end],b(a.test),b(a.body))},DoWhileStatement:function(a,b){return new c.ast.DoWhile([a.start,a.end],b(a.body),b(a.test))},WithStatement:function(a,b){return new c.ast.With([a.start,a.end],b(a.object),b(a.body))},UnaryExpression:function(a,b){return new c.ast.UnaryOp([a.start,a.end],a.operator,b(a.argument))},BinaryExpression:function(a,b){return new c.ast.BinaryOp([a.start,a.end],a.operator,b(a.left),b(a.right))},AssignmentExpression:function(a,b){return"="==a.operator?new c.ast.Set([a.start,a.end],b(a.left),b(a.right)):new c.ast.ModifyingSet([a.start,a.end],b(a.left),a.operator.substr(0,a.operator.length-1),b(a.right))},UpdateExpression:function(a,b){return a.prefix?new c.ast.PreOp([a.start,a.end],a.operator,b(a.argument)):new c.ast.PostOp([a.start,a.end],a.operator,b(a.argument))},ReturnStatement:function(a,d){return new c.ast.Return([a.start,a.end],a.argument?d(a.argument):b(a.end,a.end))},Identifier:function(a,b){return new c.ast.Variable([a.start,a.end],a.name)},Literal:function(a,b){if(Object.isNumber(a.value))return new c.ast.Number([a.start,a.end],a.value);if(Object.isBoolean(a.value))return new c.ast.Variable([a.start,a.end],a.value.toString());if("string"==typeof a.value)return new c.ast.String([a.start,a.end],a.value);if(Object.isRegExp(a.value)){var d=a.raw.substr(a.raw.lastIndexOf("/")+1);return new c.ast.Regex([a.start,a.end],a.value.source,d)}if(null===a.value)return new c.ast.Variable([a.start,a.end],"null");throw new Error("Case of Literal not handled!")},ObjectExpression:function(a,b){var d=a.properties.map(function(a){var d="Identifier"==a.key.type?a.key.name:a.key.value;if("init"==a.kind)return new c.ast.ObjProperty([a.key.start,a.value.end],d,b(a.value));if("get"==a.kind)return new c.ast.ObjPropertyGet([a.key.start,a.value.end],d,b(a.value.body));if("set"==a.kind)return new c.ast.ObjPropertySet([a.key.start,a.value.end],d,b(a.value.body),b(a.value.params[0]));throw new Error("Case of ObjectExpression not handled!")});return new c.ast.ObjectLiteral([a.start,a.end],d)},ArrayExpression:function(a,b){return new c.ast.ArrayLiteral([a.start,a.end],a.elements.map(b))},SequenceExpression:function(a,b){return new c.ast.Sequence([a.start,a.end],a.expressions.map(b))},EmptyStatement:function(a,c){return b(a.start,a.end)},ThisExpression:function(a,b){return new c.ast.This([a.start,a.end])},DebuggerStatement:function(a,b){return new c.ast.Debugger([a.start,a.end])},LabeledStatement:function(a,b){return new c.ast.LabelDeclaration([a.start,a.end],a.label.name,b(a.body))}};return e.LogicalExpression=e.BinaryExpression,d(a)},a.walk.copy=function(a,b){function c(a){return null===a?null:e[a.type](a,c)}var e=d.obj.extend({Program:function(a,b){return{start:a.start,end:a.end,type:"Program",body:a.body.map(b),source:a.source,astIndex:a.astIndex}},FunctionDeclaration:function(a,b){return{start:a.start,end:a.end,type:"FunctionDeclaration",id:b(a.id),params:a.params.map(b),body:b(a.body),source:a.source,astIndex:a.astIndex}},BlockStatement:function(a,b){return{start:a.start,end:a.end,type:"BlockStatement",body:a.body.map(b),source:a.source,astIndex:a.astIndex}},ExpressionStatement:function(a,b){return{start:a.start,end:a.end,type:"ExpressionStatement",expression:b(a.expression),source:a.source,astIndex:a.astIndex}},CallExpression:function(a,b){return{start:a.start,end:a.end,type:"CallExpression",callee:b(a.callee),arguments:a.arguments.map(b),source:a.source,astIndex:a.astIndex}},MemberExpression:function(a,b){return{start:a.start,end:a.end,type:"MemberExpression",object:b(a.object),property:b(a.property),computed:a.computed,source:a.source,astIndex:a.astIndex}},NewExpression:function(a,b){return{start:a.start,end:a.end,type:"NewExpression",callee:b(a.callee),arguments:a.arguments.map(b),source:a.source,astIndex:a.astIndex}},VariableDeclaration:function(a,b){return{start:a.start,end:a.end,type:"VariableDeclaration",declarations:a.declarations.map(b),kind:a.kind,source:a.source,astIndex:a.astIndex}},VariableDeclarator:function(a,b){return{start:a.start,end:a.end,type:"VariableDeclarator",id:b(a.id),init:b(a.init),source:a.source,astIndex:a.astIndex}},FunctionExpression:function(a,b){return{start:a.start,end:a.end,type:"FunctionExpression",id:b(a.id),params:a.params.map(b),body:b(a.body),source:a.source,astIndex:a.astIndex}},IfStatement:function(a,b){return{start:a.start,end:a.end,type:"IfStatement",test:b(a.test),consequent:b(a.consequent),alternate:b(a.alternate),source:a.source,astIndex:a.astIndex}},ConditionalExpression:function(a,b){return{start:a.start,end:a.end,type:"ConditionalExpression",test:b(a.test),consequent:b(a.consequent),alternate:b(a.alternate),source:a.source,astIndex:a.astIndex}},SwitchStatement:function(a,b){return{start:a.start,end:a.end,type:"SwitchStatement",discriminant:b(a.discriminant),cases:a.cases.map(b),source:a.source,astIndex:a.astIndex}},SwitchCase:function(a,b){return{start:a.start,end:a.end,type:"SwitchCase",test:b(a.test),consequent:a.consequent.map(b),source:a.source,astIndex:a.astIndex}},BreakStatement:function(a,b){return{start:a.start,end:a.end,type:"BreakStatement",label:a.label,source:a.source,astIndex:a.astIndex}},ContinueStatement:function(a,b){return{start:a.start,end:a.end,type:"ContinueStatement",label:a.label,source:a.source,astIndex:a.astIndex}},TryStatement:function(a,b){return{start:a.start,end:a.end,type:"TryStatement",block:b(a.block),handler:b(a.handler),finalizer:b(a.finalizer),guardedHandlers:a.guardedHandlers.map(b),source:a.source,astIndex:a.astIndex}},CatchClause:function(a,b){return{start:a.start,end:a.end,type:"CatchClause",param:b(a.param),guard:b(a.guard),body:b(a.body),source:a.source,astIndex:a.astIndex}},ThrowStatement:function(a,b){return{start:a.start,end:a.end,type:"ThrowStatement",argument:b(a.argument),source:a.source,astIndex:a.astIndex}},ForStatement:function(a,b){return{start:a.start,end:a.end,type:"ForStatement",init:b(a.init),test:b(a.test),update:b(a.update),body:b(a.body),source:a.source,astIndex:a.astIndex}},ForInStatement:function(a,b){return{start:a.start,end:a.end,type:"ForInStatement",left:b(a.left),right:b(a.right),body:b(a.body),source:a.source,astIndex:a.astIndex}},WhileStatement:function(a,b){return{start:a.start,end:a.end,type:"WhileStatement",test:b(a.test),body:b(a.body),source:a.source,astIndex:a.astIndex}},DoWhileStatement:function(a,b){return{start:a.start,end:a.end,type:"DoWhileStatement",test:b(a.test),body:b(a.body),source:a.source,astIndex:a.astIndex}},WithStatement:function(a,b){return{start:a.start,end:a.end,type:"WithStatement",object:b(a.object),body:b(a.body),source:a.source,astIndex:a.astIndex}},UnaryExpression:function(a,b){return{start:a.start,end:a.end,type:"UnaryExpression",argument:b(a.argument),operator:a.operator,prefix:a.prefix,source:a.source,astIndex:a.astIndex}},BinaryExpression:function(a,b){return{start:a.start,end:a.end,type:"BinaryExpression",left:b(a.left),operator:a.operator,right:b(a.right),source:a.source,astIndex:a.astIndex}},LogicalExpression:function(a,b){return{start:a.start,end:a.end,type:"LogicalExpression",left:b(a.left),operator:a.operator,right:b(a.right),source:a.source,astIndex:a.astIndex}},AssignmentExpression:function(a,b){return{start:a.start,end:a.end,type:"AssignmentExpression",left:b(a.left),operator:a.operator,right:b(a.right),source:a.source,astIndex:a.astIndex}},UpdateExpression:function(a,b){return{start:a.start,end:a.end,type:"UpdateExpression",argument:b(a.argument),operator:a.operator,
prefix:a.prefix,source:a.source,astIndex:a.astIndex}},ReturnStatement:function(a,b){return{start:a.start,end:a.end,type:"ReturnStatement",argument:b(a.argument),source:a.source,astIndex:a.astIndex}},Identifier:function(a,b){return{start:a.start,end:a.end,type:"Identifier",name:a.name,source:a.source,astIndex:a.astIndex}},Literal:function(a,b){return{start:a.start,end:a.end,type:"Literal",value:a.value,raw:a.raw,source:a.source,astIndex:a.astIndex}},ObjectExpression:function(a,b){return{start:a.start,end:a.end,type:"ObjectExpression",properties:a.properties.map(function(a){return{key:b(a.key),value:b(a.value),kind:a.kind}}),source:a.source,astIndex:a.astIndex}},ArrayExpression:function(a,b){return{start:a.start,end:a.end,type:"ArrayExpression",elements:a.elements.map(b),source:a.source,astIndex:a.astIndex}},SequenceExpression:function(a,b){return{start:a.start,end:a.end,type:"SequenceExpression",expressions:a.expressions.map(b),source:a.source,astIndex:a.astIndex}},EmptyStatement:function(a,b){return{start:a.start,end:a.end,type:"EmptyStatement",source:a.source,astIndex:a.astIndex}},ThisExpression:function(a,b){return{start:a.start,end:a.end,type:"ThisExpression",source:a.source,astIndex:a.astIndex}},DebuggerStatement:function(a,b){return{start:a.start,end:a.end,type:"DebuggerStatement",source:a.source,astIndex:a.astIndex}},LabeledStatement:function(a,b){return{start:a.start,end:a.end,type:"LabeledStatement",label:a.label,body:b(a.body),source:a.source,astIndex:a.astIndex}}},b||{});return c(a)},a.walk.findSiblings=function(b,c,e){if(!c)return[];var f=a.walk.findNodesIncluding(b,c.start),g=f.indexOf(c),h=f.slice(0,g),i=d.arr.detect(h.reverse(),function(a){return Array.isArray(a.body)}),j=i.body;if(!e)return d.arr.without(j,c);var k=j.indexOf(c);return"before"===e?j.slice(0,k):j.slice(k+1)},a.walk.visitors={stopAtFunctions:a.walk.make({Function:function(){}}),withMemberExpression:a.walk.make({MemberExpression:function(a,b,c){c(a.object,b,"Expression"),c(a.property,b,"Expression")}})},function(){a.walk.findNodeByAstIndex=function(b,c,d){d=null==d?!0:!!d,!b.astIndex&&d&&a.walk.addAstIndex(b);var e=null;return a.withMozillaAstDo(b,null,function(a,b,d){if(!e){var f=b.astIndex;if(!(c>f))return b.astIndex===c?void(e=b):void a()}}),e},a.walk.findStatementOfNode=function(b,c,e){e||(e=c,c=b,b=null),b||(b={}),c.astIndex||a.walk.addAstIndex(c);var f,g=!1,h=["EmptyStatement","BlockStatement","ExpressionStatement","IfStatement","LabeledStatement","BreakStatement","ContinueStatement","WithStatement","SwitchStatement","ReturnStatement","ThrowStatement","TryStatement","WhileStatement","DoWhileStatement","ForStatement","ForInStatement","DebuggerStatement","FunctionDeclaration","VariableDeclaration","ClassDeclaration"];return a.withMozillaAstDo(c,{},function(a,i,j,k,l){if(!(g||i.astIndex<e.astIndex)){if(i===e||i.astIndex===e.astIndex)if(g=!0,b.asPath)f=l;else{var m=d.Path(l);do f=m.get(c),m=m.slice(0,m.size()-1);while(-1==h.indexOf(f.type)&&m.size()>0)}!g&&a()}}),f},a.walk.addAstIndex=function(b){return a.withMozillaAstDo(b,{index:0},function(a,b,c){a(),b.astIndex=c.index++}),b}}()}),function(a){var b="undefined"!=typeof module&&module.require?module.require("../env"):lively["lively.lang_env"];a(b.acorn,b.lively,b["lively.lang"],b["lively.ast"])}(function(a,b,c,d){d.MozillaAST={},d.MozillaAST.BaseVisitor=c["class"].create(Object,"lively.ast.MozillaAST.BaseVisitor","visiting",{accept:function(a,b,c,d){return d=d||[],this["visit"+a.type](a,b,c,d)},visitProgram:function(a,b,c,d){var e;return a.body.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["body",f]))},this),e},visitFunction:function(a,b,c,d){var e;return a.id&&(e=this.accept(a.id,b,c,d.concat(["id"]))),a.params.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["params",f]))},this),a.defaults&&a.defaults.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["defaults",f]))},this),a.rest&&(e=this.accept(a.rest,b,c,d.concat(["rest"]))),e=this.accept(a.body,b,c,d.concat(["body"])),a.generator,a.expression,e},visitStatement:function(a,b,c,d){var e;return e},visitEmptyStatement:function(a,b,c,d){var e;return e},visitBlockStatement:function(a,b,c,d){var e;return a.body.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["body",f]))},this),e},visitExpressionStatement:function(a,b,c,d){var e;return e=this.accept(a.expression,b,c,d.concat(["expression"]))},visitIfStatement:function(a,b,c,d){var e;return e=this.accept(a.test,b,c,d.concat(["test"])),e=this.accept(a.consequent,b,c,d.concat(["consequent"])),a.alternate&&(e=this.accept(a.alternate,b,c,d.concat(["alternate"]))),e},visitLabeledStatement:function(a,b,c,d){var e;return e=this.accept(a.label,b,c,d.concat(["label"])),e=this.accept(a.body,b,c,d.concat(["body"]))},visitBreakStatement:function(a,b,c,d){var e;return a.label&&(e=this.accept(a.label,b,c,d.concat(["label"]))),e},visitContinueStatement:function(a,b,c,d){var e;return a.label&&(e=this.accept(a.label,b,c,d.concat(["label"]))),e},visitWithStatement:function(a,b,c,d){var e;return e=this.accept(a.object,b,c,d.concat(["object"])),e=this.accept(a.body,b,c,d.concat(["body"]))},visitSwitchStatement:function(a,b,c,d){var e;return e=this.accept(a.discriminant,b,c,d.concat(["discriminant"])),a.cases.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["cases",f]))},this),a.lexical,e},visitReturnStatement:function(a,b,c,d){var e;return a.argument&&(e=this.accept(a.argument,b,c,d.concat(["argument"]))),e},visitThrowStatement:function(a,b,c,d){var e;return e=this.accept(a.argument,b,c,d.concat(["argument"]))},visitTryStatement:function(a,b,c,d){var e;return e=this.accept(a.block,b,c,d.concat(["block"])),a.handler&&(e=this.accept(a.handler,b,c,d.concat(["handler"]))),a.guardedHandlers&&a.guardedHandlers.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["guardedHandlers",f]))},this),a.finalizer&&(e=this.accept(a.finalizer,b,c,d.concat(["finalizer"]))),e},visitWhileStatement:function(a,b,c,d){var e;return e=this.accept(a.test,b,c,d.concat(["test"])),e=this.accept(a.body,b,c,d.concat(["body"]))},visitDoWhileStatement:function(a,b,c,d){var e;return e=this.accept(a.body,b,c,d.concat(["body"])),e=this.accept(a.test,b,c,d.concat(["test"]))},visitForStatement:function(a,b,c,d){var e;return a.init&&(e=this.accept(a.init,b,c,d.concat(["init"]))),a.test&&(e=this.accept(a.test,b,c,d.concat(["test"]))),a.update&&(e=this.accept(a.update,b,c,d.concat(["update"]))),e=this.accept(a.body,b,c,d.concat(["body"]))},visitForInStatement:function(a,b,c,d){var e;return e=this.accept(a.left,b,c,d.concat(["left"])),e=this.accept(a.right,b,c,d.concat(["right"])),e=this.accept(a.body,b,c,d.concat(["body"])),a.each,e},visitForOfStatement:function(a,b,c,d){var e;return e=this.accept(a.left,b,c,d.concat(["left"])),e=this.accept(a.right,b,c,d.concat(["right"])),e=this.accept(a.body,b,c,d.concat(["body"]))},visitLetStatement:function(a,b,c,d){var e;return a.head.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["head",f]))},this),e=this.accept(a.body,b,c,d.concat(["body"]))},visitDebuggerStatement:function(a,b,c,d){var e;return e},visitDeclaration:function(a,b,c,d){var e;return e},visitFunctionDeclaration:function(a,b,c,d){var e;return e=this.accept(a.id,b,c,d.concat(["id"])),a.params.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["params",f]))},this),a.defaults&&a.defaults.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["defaults",f]))},this),a.rest&&(e=this.accept(a.rest,b,c,d.concat(["rest"]))),e=this.accept(a.body,b,c,d.concat(["body"])),a.generator,a.expression,e},visitVariableDeclaration:function(a,b,c,d){var e;return a.declarations.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["declarations",f]))},this),e},visitVariableDeclarator:function(a,b,c,d){var e;return e=this.accept(a.id,b,c,d.concat(["id"])),a.init&&(e=this.accept(a.init,b,c,d.concat(["init"]))),e},visitExpression:function(a,b,c,d){var e;return e},visitThisExpression:function(a,b,c,d){var e;return e},visitArrayExpression:function(a,b,c,d){var e;return a.elements.forEach(function(a,f){a&&(e=this.accept(a,b,c,d.concat(["elements",f])))},this),e},visitObjectExpression:function(a,b,c,d){var e;return a.properties.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["properties",f]))},this),e},visitProperty:function(a,b,c,d){var e;return e=this.accept(a.key,b,c,d.concat(["key"])),e=this.accept(a.value,b,c,d.concat(["value"]))},visitFunctionExpression:function(a,b,c,d){var e;return a.id&&(e=this.accept(a.id,b,c,d.concat(["id"]))),a.params.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["params",f]))},this),a.defaults&&a.defaults.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["defaults",f]))},this),a.rest&&(e=this.accept(a.rest,b,c,d.concat(["rest"]))),e=this.accept(a.body,b,c,d.concat(["body"])),a.generator,a.expression,e},visitArrowExpression:function(a,b,c,d){var e;return a.params.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["params",f]))},this),a.defaults&&a.defaults.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["defaults",f]))},this),a.rest&&(e=this.accept(a.rest,b,c,d.concat(["rest"]))),e=this.accept(a.body,b,c,d.concat(["body"])),a.generator,a.expression,e},visitArrowFunctionExpression:function(a,b,c,d){var e;return a.params.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["params",f]))},this),a.defaults&&a.defaults.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["defaults",f]))},this),a.rest&&(e=this.accept(a.rest,b,c,d.concat(["rest"]))),e=this.accept(a.body,b,c,d.concat(["body"])),a.generator,a.expression,e},visitSequenceExpression:function(a,b,c,d){var e;return a.expressions.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["expressions",f]))},this),e},visitUnaryExpression:function(a,b,c,d){var e;return a.prefix,e=this.accept(a.argument,b,c,d.concat(["argument"]))},visitBinaryExpression:function(a,b,c,d){var e;return e=this.accept(a.left,b,c,d.concat(["left"])),e=this.accept(a.right,b,c,d.concat(["right"]))},visitAssignmentExpression:function(a,b,c,d){var e;return e=this.accept(a.left,b,c,d.concat(["left"])),e=this.accept(a.right,b,c,d.concat(["right"]))},visitUpdateExpression:function(a,b,c,d){var e;return e=this.accept(a.argument,b,c,d.concat(["argument"])),a.prefix,e},visitLogicalExpression:function(a,b,c,d){var e;return e=this.accept(a.left,b,c,d.concat(["left"])),e=this.accept(a.right,b,c,d.concat(["right"]))},visitConditionalExpression:function(a,b,c,d){var e;return e=this.accept(a.test,b,c,d.concat(["test"])),e=this.accept(a.alternate,b,c,d.concat(["alternate"])),e=this.accept(a.consequent,b,c,d.concat(["consequent"]))},visitNewExpression:function(a,b,c,d){var e;return e=this.accept(a.callee,b,c,d.concat(["callee"])),a.arguments.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["arguments",f]))},this),e},visitCallExpression:function(a,b,c,d){var e;return e=this.accept(a.callee,b,c,d.concat(["callee"])),a.arguments.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["arguments",f]))},this),e},visitMemberExpression:function(a,b,c,d){var e;return e=this.accept(a.object,b,c,d.concat(["object"])),e=this.accept(a.property,b,c,d.concat(["property"])),a.computed,e},visitYieldExpression:function(a,b,c,d){var e;return a.argument&&(e=this.accept(a.argument,b,c,d.concat(["argument"]))),e},visitComprehensionExpression:function(a,b,c,d){var e;return e=this.accept(a.body,b,c,d.concat(["body"])),a.blocks.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["blocks",f]))},this),a.filter&&(e=this.accept(a.filter,b,c,d.concat(["filter"]))),e},visitGeneratorExpression:function(a,b,c,d){var e;return e=this.accept(a.body,b,c,d.concat(["body"])),a.blocks.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["blocks",f]))},this),a.filter&&(e=this.accept(a.filter,b,c,d.concat(["filter"]))),e},visitLetExpression:function(a,b,c,d){var e;return a.head.forEach(function(a,f){a&&(e=this.accept(a,b,c,d.concat(["head",f])))},this),e=this.accept(a.body,b,c,d.concat(["body"]))},visitPattern:function(a,b,c,d){var e;return e},visitObjectPattern:function(a,b,c,d){var e;return a.properties.forEach(function(a,f){e=this.accept(a.key,b,c,d.concat(["properties",f,"key"])),e=this.accept(a.value,b,c,d.concat(["properties",f,"value"]))},this),e},visitArrayPattern:function(a,b,c,d){var e;return a.elements.forEach(function(a,f){a&&(e=this.accept(a,b,c,d.concat(["elements",f])))},this),e},visitRestElement:function(a,b,c,d){var e;return e=this.accept(a.argument,b,c,d.concat(["argument"]))},visitSwitchCase:function(a,b,c,d){var e;return a.test&&(e=this.accept(a.test,b,c,d.concat(["test"]))),a.consequent.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["consequent",f]))},this),e},visitCatchClause:function(a,b,c,d){var e;return e=this.accept(a.param,b,c,d.concat(["param"])),a.guard&&(e=this.accept(a.guard,b,c,d.concat(["guard"]))),e=this.accept(a.body,b,c,d.concat(["body"]))},visitComprehensionBlock:function(a,b,c,d){var e;return e=this.accept(a.left,b,c,d.concat(["left"])),e=this.accept(a.right,b,c,d.concat(["right"])),a.each,e},visitComprehensionIf:function(a,b,c,d){var e;return e=this.accept(a.test,b,c,d.concat(["test"]))},visitIdentifier:function(a,b,c,d){var e;return e},visitLiteral:function(a,b,c,d){var e;return a.value,e},visitClassDeclaration:function(a,b,c,d){var e;return e=this.accept(a.id,b,c,d.concat(["id"])),a.superClass&&(e=this.accept(a.superClass,b,c,d.concat(["superClass"]))),e=this.accept(a.body,b,c,d.concat(["body"]))},visitClassBody:function(a,b,c,d){var e;return a.body.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["body",f]))},this),e},visitMethodDefinition:function(a,b,c,d){var e;return a["static"],a.computed,e=this.accept(a.key,b,c,d.concat(["key"])),e=this.accept(a.value,b,c,d.concat(["value"]))},visitJSXIdentifier:function(a,b,c,d){var e;return e},visitJSXMemberExpression:function(a,b,c,d){var e;return e=this.accept(a.object,b,c,d.concat(["object"])),e=this.accept(a.property,b,c,d.concat(["property"]))},visitJSXNamespacedName:function(a,b,c,d){var e;return e=this.accept(a.namespace,b,c,d.concat(["namespace"])),e=this.accept(a.name,b,c,d.concat(["name"]))},visitJSXEmptyExpression:function(a,b,c,d){var e;return e},visitJSXBoundaryElement:function(a,b,c,d){var e;return e=this.accept(a.name,b,c,d.concat(["name"]))},visitJSXOpeningElement:function(a,b,c,d){var e;return a.attributes.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["attributes",f]))},this),a.selfClosing,e},visitJSXClosingElement:function(a,b,c,d){var e;return e},visitJSXAttribute:function(a,b,c,d){var e;return e=this.accept(a.name,b,c,d.concat(["name"])),a.value&&(e=this.accept(a.value,b,c,d.concat(["value"]))),e},visitSpreadElement:function(a,b,c,d){var e;return e=this.accept(a.argument,b,c,d.concat(["argument"]))},visitJSXSpreadAttribute:function(a,b,c,d){var e;return e},visitJSXElement:function(a,b,c,d){var e;return e=this.accept(a.openingElement,b,c,d.concat(["openingElement"])),a.children.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["children",f]))},this),a.closingElement&&(e=this.accept(a.closingElement,b,c,d.concat(["closingElement"]))),e},visitTemplateLiteral:function(a,b,c,d){var e;return a.quasis.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["quasis",f]))},this),a.expressions.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["expressions",f]))},this),e},visitTaggedTemplateExpression:function(a,b,c,d){var e;return e=this.accept(a.tag,b,c,d.concat(["tag"])),e=this.accept(a.quasi,b,c,d.concat(["quasi"]))},visitTemplateElement:function(a,b,c,d){}}),d.MozillaAST.PrinterVisitor=c["class"].create(d.MozillaAST.BaseVisitor,"lively.ast.PrinterVisitor",{accept:function(a,b,c,d,e){var f=e.map(function(a){return"string"==typeof a?"."+a:"["+a+"]"}).join(""),g=[];a(b,c,g,e),d.push({node:b,path:f,index:c.index++,children:g})}}),d.MozillaAST.ComparisonVisitor=c["class"].create(d.MozillaAST.BaseVisitor,"lively.ast.ComparisonVisitor","comparison",{recordNotEqual:function(a,b,c,d){c.comparisons.errors.push({node1:a,node2:b,path:c.completePath,msg:d})},compareType:function(a,b,c){return this.compareField("type",a,b,c)},compareField:function(a,c,d,e){if(d=b.PropertyPath(e.completePath.join(".")).get(d),c&&d&&c[a]===d[a])return!0;if(c&&"*"===c[a]||d&&"*"===d[a])return!0;var f,g=e.completePath.join(".")+"."+a;return f=c?d?g+" is not equal: "+c[a]+" vs. "+d[a]:"node2 not defined but node1 ("+g+") is: "+c[a]:"node1 on "+g+" not defined",this.recordNotEqual(c,d,e,f),!1}},"visiting",{accept:function(a,c,d,e){var f=b.PropertyPath(e.join(".")).get(c);if("*"!==a&&"*"!==f){var g={completePath:e,comparisons:d.comparisons};this.compareType(a,c,g)&&this["visit"+a.type](a,c,g,e)}},visitFunction:function(a,b,c,d,e){b.generator&&this.compareField("generator",b,c,d),b.expression&&this.compareField("expression",b,c,d),a(b,c,d,e)},visitSwitchStatement:function(a,b,c,d,e){b.lexical&&this.compareField("lexical",b,c,d),a(b,c,d,e)},visitForInStatement:function(a,b,c,d,e){b.each&&this.compareField("each",b,c,d),a(b,c,d,e)},visitFunctionDeclaration:function(a,b,c,d,e){b.generator&&this.compareField("generator",b,c,d),b.expression&&this.compareField("expression",b,c,d),a(b,c,d,e)},visitVariableDeclaration:function(a,b,c,d,e){this.compareField("kind",b,c,d),a(b,c,d,e)},visitUnaryExpression:function(a,b,c,d,e){this.compareField("operator",b,c,d),b.prefix&&this.compareField("prefix",b,c,d),a(b,c,d,e)},visitBinaryExpression:function(a,b,c,d,e){this.compareField("operator",b,c,d),a(b,c,d,e)},visitAssignmentExpression:function(a,b,c,d,e){this.compareField("operator",b,c,d),a(b,c,d,e)},visitUpdateExpression:function(a,b,c,d,e){this.compareField("operator",b,c,d),b.prefix&&this.compareField("prefix",b,c,d),a(b,c,d,e)},visitLogicalExpression:function(a,b,c,d,e){this.compareField("operator",b,c,d),a(b,c,d,e)},visitMemberExpression:function(a,b,c,d,e){b.computed&&this.compareField("computed",b,c,d),a(b,c,d,e)},visitComprehensionBlock:function(a,b,c,d,e){b.each&&this.compareField("each",b,c,d),a(b,c,d,e)},visitIdentifier:function(a,b,c,d,e){this.compareField("name",b,c,d),a(b,c,d,e)},visitLiteral:function(a,b,c,d,e){this.compareField("value",b,c,d),a(b,c,d,e)},visitClassDeclaration:function(a,b,c,d,e){this.compareField("id",b,c,d),b.superClass&&this.compareField("superClass",b,c,d),this.compareField("body",b,c,d),a(b,c,d,e)},visitClassBody:function(a,b,c,d,e){this.compareField("body",b,c,d),a(b,c,d,e)},visitMethodDefinition:function(a,b,c,d,e){this.compareField("static",b,c,d),this.compareField("computed",b,c,d),this.compareField("kind",b,c,d),this.compareField("key",b,c,d),this.compareField("value",b,c,d),a(b,c,d,e)}}),d.MozillaAST.ScopeVisitor=c["class"].create(d.MozillaAST.BaseVisitor,"lively.ast.ScopeVisitor","scope specific",{newScope:function(a,b){var c={node:a,varDecls:[],varDeclPaths:[],funcDecls:[],classDecls:[],methodDecls:[],refs:[],params:[],catches:[],subScopes:[]};return b&&b.subScopes.push(c),c}},"visiting",{accept:function(a,b,c,d){if(d=d||[],!this["visit"+a.type])throw new Error("No AST visit handler for type "+a.type);return this["visit"+a.type](a,b,c,d)},visitVariableDeclaration:function(a,b,c,d,e){return d.varDecls.push(b),d.varDeclPaths.push(e),a(b,c,d,e)},visitVariableDeclarator:function(a,b,c,d){var e;return a.init&&(e=this.accept(a.init,b,c,d.concat(["init"]))),e},visitFunction:function(a,b,c,d){var e=this.newScope(a,c);return e.params=Array.prototype.slice.call(a.params),e},visitFunctionDeclaration:function(a,b,c,d,e){d.funcDecls.push(b);var f,g=this.visitFunction(b,c,d,e);return b.defaults&&b.defaults.forEach(function(a,b){f=this.accept(a,c,g,e.concat(["defaults",b]))},this),b.rest&&(f=this.accept(b.rest,c,g,e.concat(["rest"]))),f=this.accept(b.body,c,g,e.concat(["body"]))},visitFunctionExpression:function(a,b,c,d,e){var f,g=this.visitFunction(b,c,d,e);return b.defaults&&b.defaults.forEach(function(a,b){f=this.accept(a,c,g,e.concat(["defaults",b]))},this),b.rest&&(f=this.accept(b.rest,c,g,e.concat(["rest"]))),f=this.accept(b.body,c,g,e.concat(["body"]))},visitArrowFunctionExpression:function(a,b,c,d,e){var f,g=this.visitFunction(b,c,d,e);return b.defaults&&b.defaults.forEach(function(a,b){f=this.accept(a,c,g,e.concat(["defaults",b]))},this),b.rest&&(f=this.accept(b.rest,c,g,e.concat(["rest"]))),f=this.accept(b.body,c,g,e.concat(["body"])),b.generator,b.expression,f},visitIdentifier:function(a,b,c,d,e){return d.refs.push(b),a(b,c,d,e)},visitMemberExpression:function(a,b,c,d){var e;return e=this.accept(a.object,b,c,d.concat(["object"])),a.computed&&(e=this.accept(a.property,b,c,d.concat(["property"]))),e},visitProperty:function(a,b,c,d){var e;return e=this.accept(a.value,b,c,d.concat(["value"]))},visitTryStatement:function(a,b,c,d){var e;return e=this.accept(a.block,b,c,d.concat(["block"])),a.handler&&(e=this.accept(a.handler,b,c,d.concat(["handler"])),c.catches.push(a.handler.param)),a.guardedHandlers&&a.guardedHandlers.forEach(function(a,f){e=this.accept(a,b,c,d.concat(["guardedHandlers",f]))},this),a.finalizer&&(e=this.accept(a.finalizer,b,c,d.concat(["finalizer"]))),e},visitLabeledStatement:function(a,b,c,d){var e;return e=this.accept(a.body,b,c,d.concat(["body"]))},visitClassDeclaration:function(a,b,c,d){c.classDecls.push(a);var e;return a.superClass&&this.accept(a.superClass,b,c,d.concat(["superClass"])),e=this.accept(a.body,b,c,d.concat(["body"]))},visitMethodDefinition:function(a,b,c,d){var e;return e=this.accept(a.value,b,c,d.concat(["value"]))},visitBreakStatement:function(a,b,c,d){return null},visitContinueStatement:function(a,b,c,d){return null}})}),function(a){var b="undefined"!=typeof module&&module.require?module.require("../env"):lively["lively.lang_env"];a(b.acorn,b.escodegen,b.lively,b["lively.lang"],b["lively.ast"])}(function(a,b,c,d,e){var f={withMozillaAstDo:function(a,b,c){var d=new e.MozillaAST.BaseVisitor,f=d.accept;return d.accept=function(a,b,e,g){var h=function(){f.call(d,a,b,e,g)};return c(h,a,e,b,g)},d.accept(a,0,b,[])},printAst:function(d,f){function g(a){var b=a.path+":"+a.node.type,c=[];if(l&&c.push(a.index),k&&c.push(a.node.start+"-"+a.node.end),j){var d=a.node.source||h.slice(a.node.start,a.node.end),e=Strings.print(d.truncate(60).replace(/\n/g,"").replace(/\s+/g," "));c.push(e)}return c.length&&(b+="("+c.join(",")+")"),b}f=f||{};var h,i,j=f.printSource||!1,k=f.printPositions||!1,l=f.printIndex||!1,m=[];return"string"==typeof d?(h=d,i=c.ast.acorn.parse(d)):(i=d,h=f.source||i.source),j&&!i.source&&(h||(h=b.generate(i),i=e.acorn.parse(h)),a.walk.addSource(i,h)),(new e.MozillaAST.PrinterVisitor).accept(i,{index:0},m,[]),Strings.printTree(m[0],g,function(a){return a.children},"  ")},compareAst:function(a,b){if(!a||!b)throw new Error("node"+(a?"1":"2")+" not defined");var c={completePath:[],comparisons:{errors:[]}};return(new e.ComparisonVisitor).accept(a,b,c,[]),c.comparisons.errors.length?c.comparisons.errors.pluck("msg"):null},pathToNode:function(b,c,d){d=d||{},b.astIndex||a.walk.addAstIndex(b);var f=new e.MozillaAST.BaseVisitor,g=null;return(f.accept=function(a,b,d,e){if(!g){var f=b.concat(e);if(a.astIndex===c){var h=f.map(function(a){return"string"==typeof a?"."+a:"["+a+"]"}).join("");g={pathString:h,path:f,node:a}}return this["visit"+a.type](a,f,d,e)}}).call(f,b,[],{},[]),g},rematchAstWithSource:function(a,b,c,f){c=!!c;var g=e.parse(b,c?{locations:!0}:void 0),h=new e.MozillaAST.BaseVisitor;f&&(g=d.Path(f).get(g)),h.accept=function(b,d,e,f){f=f||[];var g=f.reduce(function(a,b){return a[b]},a);return g.start=b.start,g.end=b.end,c&&(g.loc=b.loc),this["visit"+b.type](b,d,e,f)},h.accept(g)},stringify:function(a,c){return b.generate(a,c)}};d.obj.extend(e,f),d.obj.extend(a,f)}),function(a){var b="undefined"!=typeof module&&module.require?module.require("../env"):lively["lively.lang_env"];a(b.acorn,b.lively,b["lively.lang"],b["lively.ast"])}(function(a,b,c,d){var e=c.arr,f=c.chain,g={declIds:function(a){return e.flatmap(a,function(a){return a?"Identifier"===a.type?[a]:"RestElement"===a.type?[a.argument]:"ObjectPattern"===a.type?g.declIds(e.pluck(a.properties,"value")):"ArrayPattern"===a.type?g.declIds(a.elements):[]:[]})},varDeclIds:function(a){return g.declIds(f(a.varDecls).pluck("declarations").flatten().pluck("id").value())},objPropertiesAsList:function h(a,b,c){return e.flatmap(a.properties,function(a){var d=a.key.name,f=[],g={key:b.concat([d]),value:a.value};switch(a.value.type){case"ArrayExpression":case"ArrayPattern":c||f.push(g),f=f.concat(e.flatmap(a.value.elements,function(a,e){return h(a,b.concat([d,e]),c)}));break;case"ObjectExpression":case"ObjectPattern":c||f.push(g),f=f.concat(h(a.value,b.concat([d]),c));break;default:f.push(g)}return f})}};d.query={helpers:g,knownGlobals:["true","false","null","undefined","arguments","Object","Function","String","Array","Date","Boolean","Number","RegExp","Error","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","Math","NaN","Infinity","Intl","JSON","parseFloat","parseInt","isNaN","isFinite","eval","alert","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","window","document","console","Node","HTMLCanvasElement","Image","Class","Global","Functions","Objects","Strings","module","lively","pt","rect","rgb","$super","$morph","$world","show"],scopes:function(a){var b=new d.MozillaAST.ScopeVisitor,c=b.newScope(a,null);return b.accept(a,0,c,[]),c},nodesAtIndex:function(b,c){return a.withMozillaAstDo(b,[],function(a,b,d){return b.start<=c&&c<=b.end&&(d.push(b),a()),d})},scopesAtIndex:function(a,b){return c.tree.filter(d.query.scopes(a),function(a){var c=a.node,d=c.start,e=c.end;return"FunctionDeclaration"===c.type&&(d=c.params.length?c.params[0].start:c.body.start,e=c.body.end),b>=d&&e>=b},function(a){return a.subScopes})},scopeAtIndex:function(a,b){return e.last(d.query.scopesAtIndex(a,b))},scopesAtPos:function(b,c){return a.nodesAt(b,c).filter(function(a){return"Program"===a.type||"FunctionDeclaration"===a.type||"FunctionExpression"===a.type})},nodesInScopeOf:function(b){return a.withMozillaAstDo(b,{root:b,result:[]},function(a,b,c){return c.result.push(b),b===c.root||"Program"!==b.type&&"FunctionDeclaration"!==b.type&&"FunctionExpression"!==b.type?(a(),c):c}).result},_declaredVarNames:function(a,b){return(a.node.id&&a.node.id.name?[a.node.id&&a.node.id.name]:[]).concat(f(a.funcDecls).pluck("id").pluck("name").compact().value()).concat(e.pluck(g.declIds(a.params),"name")).concat(e.pluck(a.catches,"name")).concat(e.pluck(g.varDeclIds(a),"name")).concat(f(a.classDecls).pluck("id").pluck("name").value()).concat(b?d.query._findJsLintGlobalDeclarations("Program"===a.node.type?a.node:a.node.body):[])},_findJsLintGlobalDeclarations:function(a){return a&&a.comments?e.flatten(a.comments.filter(function(a){return a.text.trim().match(/^global/)}).map(function(a){return e.invoke(a.text.replace(/^\s*global\s*/,"").split(","),"trim")})):[]},topLevelDeclsAndRefs:function(a,b){function c(a){var b=g._declaredVarNames(a,i);return a.subScopes.map(c).reduce(function(a,b){return a.concat(b)},a.refs).filter(function(a){return-1===b.indexOf(a.name)})}b=b||{},b.withComments=!0,"string"==typeof a&&(a=d.parse(a,b));var g=d.query,h=d.query.scopes(a),i=!!b.jslintGlobalComment,j=g._declaredVarNames(h,i),k=h.refs.concat(e.flatten(h.subScopes.map(c))),l=f(k).pluck("name").withoutAll(j).value();return{scope:h,varDecls:h.varDecls,funcDecls:h.funcDecls,declaredNames:j,undeclaredNames:l,refs:k}},findGlobalVarRefs:function(a,b){var c=d.query,e=c.topLevelDeclsAndRefs(a,b),f=e.declaredNames.concat(c.knownGlobals);return e.refs.filter(function(a){return-1===f.indexOf(a.name)})},findNodesIncludingLines:function(b,f,g,h){if(!f&&!b)throw new Error("Need at least ast or code");return f=f?f:a.stringify(b),b=b&&b.loc?b:d.parse(f,{locations:!0}),a.withMozillaAstDo(b,[],function(a,b,d){return g.every(function(a){return c.num.between(a,b.loc.start.line,b.loc.end.line)})&&(e.pushIfNotIncluded(d,b),a()),d})},findReferencesAndDeclsInScope:function(a,b){function d(a){return a.params.concat(e.pluck(a.funcDecls,"id")).concat(g.varDeclIds(a))}return e.flatten(c.tree.map(a,function(a){return a.refs.concat(d(a)).filter(function(a){return a.name===b})},function(a){return a.subScopes.filter(function(a){return d(a).every(function(a){return a.name!==b})})}))},findDeclarationClosestToIndex:function(a,b,c){function f(a){return a.params.concat(e.pluck(a.funcDecls,"id")).concat(g.varDeclIds(a))}var h=null;return e.detect(d.query.scopesAtIndex(a,c).reverse(),function(a){var c=f(a),d=e.pluck(c,"name").indexOf(b);return-1===d?!1:(h=c[d],!0)}),h}}}),function(a){var b="undefined"!=typeof module&&module.require?module.require("../env"):lively["lively.lang_env"];a(b.acorn,b.lively,b["lively.lang"],b["lively.ast"])}(function(a,b,c,d){var e=c.chain,f=c.arr,g=c.string;d.transform={helper:{_node2string:function(a){return a.source||d.stringify(a)},_findIndentAt:function(a,b){var c=g.peekLeft(a,b,/\s+$/),d="number"==typeof c?a.slice(c,b):"";return"\n"===d[0]&&(d=d.slice(1)),d},_applyChanges:function(a,b){return a.reduce(function(a,b){if("del"===b.type)return a.slice(0,b.pos)+a.slice(b.pos+b.length);if("add"===b.type)return a.slice(0,b.pos)+b.string+a.slice(b.pos);throw new Error("Uexpected change "+Objects.inspect(b))},b)},_compareNodesForReplacement:function(a,b){if(a.start===b.start&&a.end===b.end)return 0;if(a.end<=b.start)return-1;if(a.start>=b.end)return 1;if(a.start<=b.start&&a.end>=b.end)return 1;if(b.start<=a.start&&b.end>=a.end)return-1;throw new Error("Comparing nodes")},memberExpression:function(a){function b(a){return"string"==typeof a?{name:a,type:"Identifier"}:{raw:String(a),type:"Literal",value:a}}var c=a.slice(1).reduce(function(a,c){return{computed:"string"!=typeof c,object:a,property:b(c),type:"MemberExpression"}},b(a[0]));return c},replaceNode:function(a,b,c){var e="object"==typeof c?c:{changes:[],source:c},f=!1,g=e.changes.reduce(function(a,b){if(a.end<b.pos)return a;var c=b.pos<a.start;if(f=f||b.pos>=a.start&&b.pos<=a.end,"add"===b.type)return{start:c?a.start+b.string.length:a.start,end:a.end+b.string.length};if("del"===b.type)return{start:c?a.start-b.length:a.start,end:a.end-b.length};throw new Error("Cannot deal with change "+Objects.inspect(b))},{start:a.start,end:a.end}),h=d.transform.helper,i=e.source,j=b(a,i.slice(g.start,g.end),f),k=Array.isArray(j)?j.map(h._node2string).join("\n"+h._findIndentAt(i,g.start)):k=h._node2string(j),l=[{type:"del",pos:g.start,length:g.end-g.start},{type:"add",pos:g.start,string:k}];return{changes:e.changes.concat(l),source:this._applyChanges(l,i)}},replaceNodes:function(a,b){return a.sort(function(a,b){return d.transform.helper._compareNodesForReplacement(a.target,b.target)}).reduce(function(a,b){return d.transform.helper.replaceNode(b.target,b.replacementFunc,a)},"object"==typeof b?b:{changes:[],source:b})}},replace:function(a,b,c,e){var f="object"==typeof a?a:null,g="string"==typeof a?a:f.source||d.stringify(f),h=d.transform.helper.replaceNode(b,c,g);return h},replaceTopLevelVarDeclAndUsageForCapturing:function(a,b,g){function h(a){return-1===o.indexOf(a.name)&&(!n||n.indexOf(a.name)>-1)}function i(a){return h(a.id)}function j(a,c){return{type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",right:c||{type:"Identifier",name:"undefined"},left:{type:"MemberExpression",computed:!1,object:b,property:a}}}}function k(a){return{declarations:[a],kind:"var",type:"VariableDeclaration"}}function l(a,b){return{type:"MemberExpression",computed:!1,object:b,property:a}}var m=g&&g.ignoreUndeclaredExcept||null,n=g&&g.include||null,o=g&&g.exclude||[],p=g&&g.recordDefRanges,q="object"==typeof a?a:d.parse(a),r="string"==typeof a?a:q.source||d.stringify(q),s=d.query.topLevelDeclsAndRefs(q);m&&(o=f.withoutAll(s.undeclaredNames,m).concat(o));var t=s.scope;f.pushAll(o,f.pluck(t.catches,"name"));var u=t.varDecls.filter(function(a,b){var d=c.Path(t.varDeclPaths[b]),e=d.slice(0,-1).get(q);return"ForStatement"===e.type||"ForInStatement"===e.type});f.pushAll(o,e(u).pluck("declarations").flatten().pluck("id").pluck("name").value());var v=d.transform.helper.replaceNodes(s.refs.filter(h).map(function(a){return{target:a,replacementFunc:function(a){
return l(a,b)}}}),r);if(v=d.transform.helper.replaceNodes(f.withoutAll(s.varDecls,u).map(function(a){return{target:a,replacementFunc:function(a,c,e){if(e){var f=d.query.scopes(d.parse(c,{addSource:!0}));a=f.varDecls[0]}return a.declarations.map(function(a){var c={operator:"||",type:"LogicalExpression",left:{computed:!0,object:b,property:{type:"Literal",value:a.id.name},type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};return i(a)?j(a.id,a.init||c):k(a)})}}}),v),s.funcDecls.length){var w=s.funcDecls.filter(i).map(function(a){var b={type:"Identifier",name:a.id.name};return d.stringify(j(b,b))}).join("\n"),x={type:"add",pos:0,string:w};v={source:w+"\n"+v.source,changes:v.changes.concat([x])}}return p&&(v.defRanges=e(t.varDecls).pluck("declarations").flatten().value().concat(t.funcDecls).reduce(function(a,b){return a[b.id.name]||(a[b.id.name]=[]),a[b.id.name].push({type:b.type,start:b.start,end:b.end}),a},{})),v.ast=q,v},oneDeclaratorPerVarDecl:function(a){var b="object"==typeof a?a:d.parse(a),c="string"==typeof a?a:b.source||d.stringify(b),e=d.query.scopes(b),g=function i(a){return f.flatten(a.varDecls.concat(a.subScopes.map(i)))}(e),h=g.map(function(a){return{target:a,replacementFunc:function(a,b,c){return c&&(a=d.parse(b).body[0]),a.declarations.map(function(a){return{type:"VariableDeclaration",kind:"var",declarations:[a]}})}}});return d.transform.helper.replaceNodes(h,c)},oneDeclaratorForVarsInDestructoring:function(a){var b="object"==typeof a?a:d.parse(a),c="string"==typeof a?a:b.source||d.stringify(b),e=d.query.scopes(b),g=function i(a){return f.flatten(a.varDecls.concat(a.subScopes.map(i)))}(e),h=g.map(function(a){return{target:a,replacementFunc:function(a,b,c){return c&&(a=d.parse(b).body[0]),f.flatmap(a.declarations,function(a){var b={type:"Identifier",name:"__temp"},c={type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:a.init}]},e=f.pluck(d.query.helpers.objPropertiesAsList(a.id,[],!1),"key").map(function(a){return{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",kind:"var",id:{type:"Identifier",name:f.last(a)},init:d.transform.helper.memberExpression([b.name].concat(a))}]}});return[c].concat(e)})}}});return d.transform.helper.replaceNodes(h,c)},returnLastStatement:function(a,b){b=b||{};var c=d.parse,e=c(a,{ecmaVersion:6}),f=e.body.pop(),g="return "+a.slice(f.start,f.end);if(!b.asAST)return a.slice(0,f.start)+g;var h=c(g,{allowReturnOutsideFunction:!0,ecmaVersion:6}).body.slice(-1)[0];return e.body.push(h),e.end+="return ".length,e},wrapInFunction:function(a,b){b=b||{};var c=d.transform.returnLastStatement(a,b);return b.asAST?{type:"Program",body:[{type:"ExpressionStatement",expression:{body:{body:c.body,type:"BlockStatement"},params:[],type:"FunctionExpression"}}]}:"function() {\n"+c+"\n}"}}}),function(a){var b="undefined"!=typeof module&&module.require?module.require("../env"):lively["lively.lang_env"];a(b.acorn,b.lively,b["lively.lang"],b["lively.ast"])}(function(a,b,c,d){var e=c.arr,f=c.chain,g=c.obj,h=c.Path,i=c.string;d.comments={getCommentPrecedingNode:function(b,c){var e=a.walk.findStatementOfNode({asPath:!0},b,c),g=e.slice(0,-2),i=h(g).get(b);return i.comments&&i.comments.length?f(d.comments.extractComments(b)).reversed().detect(function(a){return a.followingNode===c}).value():null},extractComments:function(c,f){function j(a){var c=[];return b.ast.acorn.withMozillaAstDo(a,c,function(a,b,c,d,f){b.comments&&e.pushAll(c,b.comments.map(function(a){return{path:f,comment:a,node:b}})),a()}),c}function k(a){return e.detect(a.node.body,function(b){return b.start>a.comment.end})}function l(a){return{type:"unknown",comment:a.comment.text}}function m(a){var b=h(a.path.slice(0,-1)).get(y);return b&&"FunctionDeclaration"===b.type}function n(a){var b=h(a.path.slice(0,-1)).get(y),c=b.id?b.id.name:"<error: no name for function>";return{name:c,args:e.pluck(b.params,"name")}}function o(a){return e.equals(a.path.slice(-2),["value","body"])}function p(a){return e.equals(a.path.slice(-2),["right","body"])}function q(a){for(var b=h(a.path.slice(0,-2)).get(y),c=b.key?b.key.name:"<error: no name for method>",d=a.path.slice(),f="<error: no object found for method>";d.length&&"init"!==e.last(d);)d.pop();if(d.length&&(f=h(d.slice(0,-1).concat(["id","name"])).get(y)),i.startsWith(f,"<error")){for(d=a.path.slice();d.length&&"right"!==e.last(d);)d.pop();if(d.length){var g=h(d.slice(0,-1).concat(["left"])).get(y);f=z.slice(g.start,g.end)}}if(i.startsWith(f,"<error")){d=a.path.slice();var j=h(d.slice(0,-6)).get(y),k=j&&"CallExpression"===j.type,l=k&&j.arguments[0];l&&(f=z.slice(l.start,l.end))}return{name:c,args:e.pluck(b.value.params,"name"),objectName:f}}function r(b){var c=h(b.path.slice(0,-1)).get(y);if("FunctionExpression"!==c.type&&"FunctionDeclaration"!==c.type)return{};var d=a.walk.findStatementOfNode(y,c);if("ExpressionStatement"!==d.type||"AssignmentExpression"!==d.expression.type)return{};var f=z.slice(d.expression.left.object.start,d.expression.left.object.end),g=z.slice(d.expression.left.property.start,d.expression.left.property.end);return{name:g,objectName:f,args:e.pluck(c.params,"name")}}function s(a){var b=a.path.slice(-5);return e.removeAt(b,1),e.equals(b,["properties","value","callee","body"])}function t(a){var b,c,d;d=a.path.slice(0,-3);var f=h(d).get(y);f&&"Property"===f.type&&(c=e.pluck(f.value.callee.params,"name"),b=f.key?f.key.name:"<error: no name for method>"),b||(d=a.path.slice(0,-2),f=h(d).get(y),f&&"Property"===f.type&&(c=e.pluck(f.value.params,"name"),b=f.key?f.key.name:"<error: no name for method>")),b||(b="<error: no name for method>",c=[],d=a.path);for(var g=e.clone(d),j="<error: no object found for method>";g.length&&"init"!==e.last(g);)g.pop();if(g.length&&(j=h(g.slice(0,-1).concat(["id","name"])).get(y)),i.startsWith(j,"<error")){for(var g=e.clone(d);g.length&&"right"!==e.last(g);)g.pop();if(g.length){var k=h(g.slice(0,-1).concat(["left"])).get(y);j=z.slice(k.start,k.end)}}if(i.startsWith(j,"<error")){var g=e.clone(d),l=h(g.slice(0,-4)).get(y),m=l&&"CallExpression"===l.type,n=m&&l.arguments[0];n&&(j=z.slice(n.start,n.end))}return{name:b,args:c,objectName:j}}function u(a){return v(a)&&("ObjectExpression"===a.declarations[0].init.type||x(a.declarations[0].init))}function v(a){return a&&"VariableDeclaration"===a.type&&1===a.declarations.length}function w(a){return{name:a.declarations[0].id.name}}function x(a){return"AssignmentExpression"!==a.type?!1:"ObjectExpression"===a.right.type?!0:"AssignmentExpression"===a.right.type?x(a.right):!1}var y="string"==typeof c?d.parse(c,{withComments:!0}):c,z=f?f:"string"==typeof c?c:d.stringify(c),A=e.sortBy(j(y),function(a){return a.comment.start});return A.map(function(a,b){if(o(a))return g.merge([a,a.comment,{type:"method",comment:a.comment.text},q(a)]);if(s(a))return g.merge([a,a.comment,{type:"method",comment:a.comment.text},t(a)]);if(m(a))return g.merge([a,a.comment,{type:"function",comment:a.comment.text},n(a)]);if(p(a))return g.merge([a,a.comment,{type:"method",comment:a.comment.text},r(a)]);var c=k(a);if(!c)return g.merge([a,a.comment,{followingNode:c},l(a)]);var d=A[b+1];return d&&d.comment.start<=c.start?g.merge([a,a.comment,{followingNode:c},l(a)]):u(c)?g.merge([a,a.comment,{followingNode:c},{type:"object",comment:a.comment.text},w(c)]):v(c)?g.merge([a,a.comment,{followingNode:c},{type:"var",comment:a.comment.text},w(c)]):g.merge([a,a.comment,{followingNode:c},l(a)])})}}}),function(a){var b="undefined"!=typeof module&&module.require?module.require("../env"):lively["lively.lang_env"];a(b.acorn,b.lively,b["lively.lang"],b["lively.ast"])}(function(a,b,c,d){function e(a){return a.properties.map(function(a){return{name:a.key.name||a.key.value,type:"FunctionExpression"===a.value.type?"method":"property",node:a}})}function f(a){if("subclass"!==t("expression.callee.property.name").get(a))return null;var b={type:"lively-class-definition",name:t("expression.arguments.0.value").get(a),node:a},c=r.flatmap(a.expression.arguments,function(a){return"ObjectExpression"!==a.type?[]:e(a).map(function(a){return a.type="lively-class-instance-"+a.type,a.parent=b,a})});return[b].concat(c)}function g(a){if("extend"!==t("expression.callee.property.name").get(a)||"ObjectExpression"!==t("expression.arguments.0.type").get(a))return null;var b=t("expression.arguments.0.name").get(a);if(!b)return null;var c={name:b,node:a,type:"lively-extend-definition"},d=(e(t("expression.arguments.1").get(a))||[]).map(function(a){return a.parent=c,a});return[c].concat(d)}function h(a){return"VariableDeclaration"!==a.type?null:r.flatmap(p(a),function(a){return r.flatmap(a.ids,function(b){var c={name:b.name,node:a.node,type:"var-decl"};if(!c.node.init)return[c];for(var d=c.node.init;"AssignmentExpression"===d.type;)d=d.right;if("ObjectExpression"===d.type)return[c].concat(e(d).map(function(a){return a.type="object-"+a.type,a.parent=c,a}));var f=j(d);return f?[c].concat(f.map(function(a){return a.parent=c,a})):[c]})})}function i(a){return"FunctionStatement"!==a.type&&"FunctionDeclaration"!==a.type?null:[{name:a.id.name,node:a,type:"function-decl"}]}function j(a){if("ExpressionStatement"===a.type&&(a=a.expression),"CallExpression"!==a.type)return null;var b=a.arguments.detect(function(a){return"ObjectExpression"===a.type});return b?e(b):null}function k(a,b){if(!m(a))return null;var c=q(t("expression.arguments.0").get(a),b),d={node:a,name:t("expression.callee.object.callee.object.arguments.0.value").get(a)};return c.forEach(function(a){return a.parent=d}),c}function l(a,b){if(!n(a))return null;var c,d=t("expression.arguments.0").get(a);c=d&&"FunctionExpression"===d.type&&u.lines(d.source||"").length>5?q(d,b):q(t("expression.callee").get(a),b);var e={node:a,name:t("expression.callee.id.name").get(a)};return c.forEach(function(a){return a.parent||(a.parent=e)}),c}function m(a){return"module"===t("expression.callee.object.callee.object.callee.name").get(a)&&"toRun"===t("expression.callee.property.name").get(a)}function n(a){return"CallExpression"===t("expression.type").get(a)&&"FunctionExpression"===t("expression.callee.type").get(a)}function o(a){return r.flatmap(a,function(a){return a?"Identifier"===a.type?[a]:"RestElement"===a.type?[a.argument]:"ObjectPattern"===a.type?o(r.pluck(a.properties,"value")):"ArrayPattern"===a.type?o(a.elements):[]:[]})}function p(a){return a.declarations.map(function(a){return!a.source&&a.init&&(a.source=a.id.name+" = "+a.init.source),{node:a,ids:o([a.id])}})}function q(a,b){b=b||s.merge({hideOneLiners:!1},b),"string"==typeof a&&(a=d.parse(a,{addSource:!0}));var c="Program"===a.type?a.body:a.body.body,e=r.flatmap(c,function(a){return k(a,b)||l(a,b)||h(a)||i(a)||f(a)||g(a)||j(a)});return b.hideOneLiners&&a.source&&(e=e.reduce(function(a,b){return b.parent&&a.indexOf(b.parent)>-1?a.push(b):(b.node.source||"").indexOf("\n")>-1&&a.push(b),a},[])),b.hideOneLiners&&a.loc&&(e=e.filter(function(a){return!a.node.loc||a.node.loc.start.line!==a.node.loc.end.line})),e}var r=c.arr,s=(c.chain,c.obj),t=c.Path,u=c.string;d.codeCategorizer={findDecls:q}});
//# sourceMappingURL=lively.ast.min-bundle.js.map